if(Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31],Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date.prototype.getMonthDays=function(n){var t=this.getFullYear();return typeof n=="undefined"&&(n=this.getMonth()),0==t%4&&(0!=t%100||0==t%400)&&n==1?29:Date._MD[n]},Date.prototype.getDayOfYear=function(){var n=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,1,0,0,0),i=n-t;return Math.floor(i/Date.DAY)},Date.prototype.getWeekNumber=function(){var i=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,1,0,0,0),r=i-t,n=t.getDay();return n==0&&(n=7),n>4&&(n-=4)||(n+=3),Math.round((r/Date.DAY+n)/7)},Date.prototype.equalsTo=function(n){return this.getFullYear()==n.getFullYear()&&this.getMonth()==n.getMonth()&&this.getDate()==n.getDate()&&this.getHours()==n.getHours()&&this.getMinutes()==n.getMinutes()},Date.prototype.print=function(n){var u=this.getMonth(),e=this.getDate(),a=this.getFullYear(),v=this.getWeekNumber(),o=this.getDay(),t={},i=this.getHours(),y=i>=12,r=y?i-12:i,f=this.getDayOfYear(),s,h,c,l,p;if(r==0&&(r=12),s=this.getMinutes(),h=this.getSeconds(),t["%a"]=Calendar._SDN[o],t["%A"]=Calendar._DN[o],t["%b"]=Calendar._SMN[u],t["%B"]=Calendar._MN[u],t["%C"]=1+Math.floor(a/100),t["%d"]=e<10?"0"+e:e,t["%e"]=e,t["%H"]=i<10?"0"+i:i,t["%I"]=r<10?"0"+r:r,t["%j"]=f<100?f<10?"00"+f:"0"+f:f,t["%k"]=i,t["%l"]=r,t["%m"]=u<9?"0"+(1+u):1+u,t["%M"]=s<10?"0"+s:s,t["%n"]="\n",t["%p"]=y?"PM":"AM",t["%P"]=y?"pm":"am",t["%s"]=Math.floor(this.getTime()/1e3),t["%S"]=h<10?"0"+h:h,t["%t"]="\t",t["%U"]=t["%W"]=t["%V"]=v<10?"0"+v:v,t["%u"]=o+1,t["%w"]=o,t["%y"]=(""+a).substr(2,2),t["%Y"]=a,t["%%"]="%",c=Date._msh_formatRegexp,typeof c=="undefined"){l="";for(p in t)l+=l?"|"+p:p;Date._msh_formatRegexp=c=new RegExp("("+l+")","g")}return n.replace(c,function(n,i){return t[i]})},!window.Calendar){Calendar=function(n,t,i,r){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.timeout=null;this.onSelected=i||null;this.onClose=r||null;this.dragging=!1;this.hidden=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.isPopup=!0;this.weekNumbers=!0;this.mondayFirst=n;this.dateStr=t;this.ar_days=null;this.showsTime=!1;this.time24=!0;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=!1};gx.evt.on_ready(this,function(){var t,n;if(typeof Calendar._SDN=="undefined"){for(typeof Calendar._SDN_len=="undefined"&&(Calendar._SDN_len=3),t=[],n=8;n>0;)t[--n]=Calendar._DN[n].substr(0,Calendar._SDN_len);for(Calendar._SDN=t,typeof Calendar._SMN_len=="undefined"&&(Calendar._SMN_len=3),t=[],n=12;n>0;)t[--n]=Calendar._MN[n].substr(0,Calendar._SMN_len);Calendar._SMN=t}});Calendar._C=null;Calendar.is_ie=/msie|trident/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(n){return gx.dom.position(n)};Calendar.isRelated=function(n,t){var i=t.relatedTarget,r;for(i||(r=t.type,r=="mouseover"?i=t.fromElement:r=="mouseout"&&(i=t.toElement));i;){if(i==n)return!0;i=i.parentNode}return!1};Calendar.removeClass=function(n,t){var i,r,u;if(n&&n.className){for(i=n.className.split(" "),r=[],u=i.length;u>0;)i[--u]!=t&&(r[r.length]=i[u]);n.className=r.join(" ")}};Calendar.addClass=function(n,t){Calendar.removeClass(n,t);n.className+=" "+t};Calendar.getElement=function(n){return Calendar.is_ie?window.event.srcElement:n.currentTarget};Calendar.getTargetElement=function(n){return Calendar.is_ie?window.event.srcElement:n.explicitOriginalTarget?n.explicitOriginalTarget:n.target};Calendar.stopEvent=function(n){return n||(n=window.event),Calendar.is_ie?(n.cancelBubble=!0,n.returnValue=!1):(n.preventDefault(),n.stopPropagation()),!1};Calendar.addEvent=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener?n.addEventListener(t,i,!0):n["on"+t]=i};Calendar.removeEvent=function(n,t,i){n.detachEvent?n.detachEvent("on"+t,i):n.removeEventListener?n.removeEventListener(t,i,!0):n["on"+t]=null};Calendar.createElement=function(n,t){var i=null;return i=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",n):document.createElement(n),typeof t!="undefined"&&t.appendChild(i),i};Calendar._add_evs=function(el){with(Calendar)addEvent(el,"mouseover",dayMouseOver),addEvent(el,"mousedown",dayMouseDown),addEvent(el,"mouseout",dayMouseOut),gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8&&(addEvent(el,"dblclick",dayMouseDblClick),el.setAttribute("unselectable",!0))};Calendar.findMonth=function(n){return typeof n.month!="undefined"?n:typeof n.parentNode.month!="undefined"?n.parentNode:null};Calendar.findYear=function(n){return typeof n.year!="undefined"?n:typeof n.parentNode.year!="undefined"?n.parentNode:null};Calendar.showMonthsCombo=function(){var n=Calendar._C,r,i;if(!n)return!1;var n=n,t=n.activeDiv,u=n.monthsCombo;n.hilitedMonth&&Calendar.removeClass(n.hilitedMonth,"hilite");n.activeMonth&&Calendar.removeClass(n.activeMonth,"active");r=n.monthsCombo.getElementsByTagName("div")[n.date.getMonth()];Calendar.addClass(r,"active");n.activeMonth=r;i=u.style;i.display="block";i.left=t.navtype<0?t.offsetLeft+"px":t.offsetLeft+t.offsetWidth-u.offsetWidth+"px";i.top=t.offsetTop+t.offsetHeight+"px"};Calendar.showYearsCombo=function(n){var t=Calendar._C,o,f;if(!t)return!1;var t=t,i=t.activeDiv,e=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite");t.activeYear&&Calendar.removeClass(t.activeYear,"active");t.activeYear=null;var u=t.date.getFullYear()+(n?1:-1),r=e.firstChild,s=!1;for(o=12;o>0;--o)u>=t.minYear&&u<=t.maxYear?(r.firstChild.data=u,r.year=u,r.style.display="block",s=!0):r.style.display="none",r=r.nextSibling,u+=n?2:-2;s&&(f=e.style,f.display="block",f.left=i.navtype<0?i.offsetLeft+"px":i.offsetLeft+i.offsetWidth-e.offsetWidth+"px",f.top=i.offsetTop+i.offsetHeight+"px")};Calendar.tableMouseUp=function(ev){var cal=Calendar._C,t,i,r,n,u;if(!cal||(cal.timeout&&clearTimeout(cal.timeout),t=cal.activeDiv,!t))return!1;i=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(t,"active");(i==t||i.parentNode==t)&&Calendar.cellClick(t,ev);r=Calendar.findMonth(i);n=null;r?(n=new Date(cal.date),r.month!=n.getMonth()&&(n.setMonth(r.month),cal.setDate(n),cal.dateClicked=!1,cal.callHandler())):(u=Calendar.findYear(i),u&&(n=new Date(cal.date),u.year!=n.getFullYear()&&(n.setFullYear(u.year),cal.setDate(n),cal.dateClicked=!1,cal.callHandler())));with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),cal._hideCombos(),_C=null,stopEvent(ev)};Calendar.tableMouseOver=function(n){var t=Calendar._C,i,f,r,v,o,s;if(t){if(i=t.activeDiv,f=Calendar.getTargetElement(n),f==i||f.parentNode==i?(Calendar.addClass(i,"hilite active"),Calendar.addClass(i.parentNode,"rowhilite")):((typeof i.navtype=="undefined"||i.navtype!=50&&(i.navtype==0||Math.abs(i.navtype)>2))&&Calendar.removeClass(i,"active"),Calendar.removeClass(i,"hilite"),Calendar.removeClass(i.parentNode,"rowhilite")),n||(n=window.event),i.navtype==50&&f!=i){var h=Calendar.getAbsolutePos(i),l=i.offsetWidth,c=n.clientX,e,a=!0;c>h.x+l?(e=c-h.x-l,a=!1):e=h.x-c;e<0&&(e=0);var u=i._range,y=i._current,p=Math.floor(e/10)%u.length;for(r=u.length;--r>=0;)if(u[r]==y)break;while(p-->0)a?--r in u||(r=u.length-1):++r in u||(r=0);v=u[r];i.firstChild.data=v;t.onUpdateTime()}return o=Calendar.findMonth(f),o?o.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(o,"hilite"),t.hilitedMonth=o):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"):(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),s=Calendar.findYear(f),s?s.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(s,"hilite"),t.hilitedYear=s):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")),Calendar.stopEvent(n)}};Calendar.tableMouseDown=function(n){if(Calendar.getTargetElement(n)==Calendar.getElement(n))return Calendar.stopEvent(n)};Calendar.calDragIt=function(n){var t=Calendar._C,i,r,u;return(t&&t.dragging)?(Calendar.is_ie?(r=window.event.clientY+document.body.scrollTop,i=window.event.clientX+document.body.scrollLeft):(i=n.pageX,r=n.pageY),t.hideShowCovered(),u=t.element.style,u.left=i-t.xOffs+"px",u.top=r-t.yOffs+"px",Calendar.stopEvent(n)):!1};Calendar.calDragEnd=function(ev){var n=Calendar._C;if(!n)return!1;n.dragging=!1;with(Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseover",stopEvent),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(ev);n.hideShowCovered()};Calendar.dayMouseDown=function(n){var el=Calendar.getElement(n),t;if(el.disabled)return!1;t=el.calendar;try{typeof t.params.inputField.onfocus=="function"&&t.params.inputField.onfocus()}catch(i){gx.dbg.logEx(i,"calendar.js","Calendar.dayMouseDown")}if(t.activeDiv=el,Calendar._C=t,el.navtype!=300)with(Calendar)el.navtype==50&&(el._current=el.firstChild.data),addClass(el,"hilite active"),addEvent(document,"mouseover",tableMouseOver),addEvent(document,"mousemove",tableMouseOver),addEvent(document,"mouseup",tableMouseUp);else t.isPopup&&t._dragStart(n);return el.navtype==-1||el.navtype==1?(t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout("Calendar.showMonthsCombo()",250)):el.navtype==-2||el.navtype==2?(t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(el.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):t.timeout=null,Calendar.stopEvent(n)};Calendar.dayMouseDblClick=function(n){if(Calendar.cellClick(Calendar.getElement(n),n||window.event),Calendar.is_ie){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())}};Calendar.dayMouseOver=function(n){var el=Calendar.getElement(n),date;if(Calendar.isRelated(el,n)||Calendar._C||el.disabled)return!1;if(el.ttip){if(el.ttip.substr(0,1)=="_"){date=null;with(el.calendar.date)date=new Date(getFullYear(),getMonth(),el.caldate,12,0,0,0);el.ttip=date.print(el.calendar.ttDateFormat)+el.ttip.substr(1)}el.calendar.tooltips.firstChild.data=el.ttip}return el.navtype!=300&&(Calendar.addClass(el,"hilite"),el.caldate&&Calendar.addClass(el.parentNode,"rowhilite")),Calendar.stopEvent(n)};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);return isRelated(el,ev)||_C||el.disabled?!1:(removeClass(el,"hilite"),el.caldate&&removeClass(el.parentNode,"rowhilite"),el.calendar.tooltips.firstChild.data=_TT.SEL_DATE,stopEvent(ev))}};Calendar.cellClick=function(n,t){var i=n.calendar,l=!1,h=!1,r=null,a=!1,u,o,s,e,v,f,y;if(typeof n.navtype=="undefined")Calendar.removeClass(i.currentDateEl,"selected"),Calendar.addClass(n,"selected"),l=i.currentDateEl==n,l||(i.currentDateEl=n),i.date.setDate(n.caldate),i.showsTime||i.date.getDate()==n.caldate||(i.date.setHours(12),i.date.setDate(n.caldate)),r=i.date,h=!0,i.dateClicked=!0;else{if(n.navtype==200){Calendar.removeClass(n,"hilite");i.callCloseHandler();return}r=n.navtype==0||n.navtype==1e3?new Date:new Date(i.date);i.dateClicked=!1;u=r.getFullYear();o=r.getMonth();function c(n){var i=r.getDate(),t=r.getMonthDays(n);i>t&&r.setDate(t);r.setMonth(n)}switch(n.navtype){case 400:Calendar.removeClass(n,"hilite");s=Calendar._TT.ABOUT;typeof s!="undefined"?s+=i.showsTime?Calendar._TT.ABOUT_TIME:"":s='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mishoo@infoiasi.ro> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';alert(s);return;case-2:u>i.minYear&&r.setFullYear(u-1);break;case-1:o>0?c(o-1):u-->i.minYear&&(r.setFullYear(u),c(11));break;case 1:o<11?c(o+1):u<i.maxYear&&(r.setFullYear(u+1),c(0));break;case 2:u<i.maxYear&&r.setFullYear(u+1);break;case 100:i.setMondayFirst(!i.mondayFirst);return;case 50:for(e=n._range,v=n.firstChild.data,f=e.length;--f>=0;)if(e[f]==v)break;t&&t.shiftKey?--f in e||(f=e.length-1):++f in e||(f=0);y=e[f];n.firstChild.data=y;i.onUpdateTime();return;case 0:if(typeof i.getDateStatus=="function"&&i.getDateStatus(r,r.getFullYear(),r.getMonth(),r.getDate()))return!1;break;case 1e3:a=!0;h=!0;i.dateClicked=!0}r.equalsTo(i.date)||(i.setDate(r,a),h=!0)}i.dateIsEmpty=a;h&&i.callHandler();l&&(Calendar.removeClass(n,"hilite"),i.callCloseHandler())};Calendar.prototype.create=function(n){var a=null,f,r,h,u,c,y,p,s,l;n?(a=n,this.isPopup=this.params.flat!=null?!1:!0):(a=document.getElementsByTagName("body")[0],this.isPopup=!0);this.date=this.dateStr?new Date(this.dateStr):new Date;this.dateIsEmpty=!this.dateStr;f=Calendar.createElement("table");this.table=f;f.cellSpacing=0;f.cellPadding=0;f.calendar=this;Calendar.addEvent(f,"mousedown",Calendar.tableMouseDown);r=Calendar.createElement("div");this.element=r;r.className="calendar Calendar";this.isPopup&&(r.style.position="absolute",r.style.zIndex="6",r.style.display="none");r.appendChild(f);var v=Calendar.createElement("thead",f),t=null,i=null,o=this,e=function(n,r,u){return t=Calendar.createElement("td",i),t.colSpan=r,t.className="calendarbutton",u!=0&&Math.abs(u)<=2&&(t.className+=" calendar-nav"),Calendar._add_evs(t),t.calendar=o,t.navtype=u,n.substr(0,1)!="&"?t.appendChild(document.createTextNode(n)):t.innerHTML=n,t};for(i=Calendar.createElement("tr",v),h=6,this.isPopup&&--h,this.weekNumbers&&++h,e("?",1,400).ttip=Calendar._TT.INFO,this.title=e("",h,300),this.title.className="calendartitle",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",e("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",v),i.className="headrow",this._nav_py=e("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=e("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=e(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=e("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=e("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",v),i.className="daynames",this.weekNumbers&&(t=Calendar.createElement("td",i),t.className="name wn",t.appendChild(document.createTextNode(Calendar._TT.WK))),u=7;u>0;--u)t=Calendar.createElement("td",i),t.appendChild(document.createTextNode("")),u||(t.navtype=100,t.calendar=this,Calendar._add_evs(t));for(this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays(),c=Calendar.createElement("tbody",f),this.tbody=c,u=6;u>0;--u)for(i=Calendar.createElement("tr",c),this.weekNumbers&&(t=Calendar.createElement("td",i),t.appendChild(document.createTextNode(""))),y=7;y>0;--y)t=Calendar.createElement("td",i),t.appendChild(document.createTextNode("")),t.calendar=this,Calendar._add_evs(t);for(this.showsTime?(i=Calendar.createElement("tr",c),i.className="time",t=Calendar.createElement("td",i),t.className="time",t.colSpan=2,t.innerHTML="&nbsp;",t=Calendar.createElement("td",i),t.className="time",t.colSpan=this.weekNumbers?4:3,function(){function u(n,i,r,u){var f=Calendar.createElement("span",t),e,s;if(f.className=n,f.appendChild(document.createTextNode(i)),f.calendar=o,f.ttip=Calendar._TT.TIME_PART,f.navtype=50,f._range=[],typeof r!="number")f._range=r;else for(e=r;e<=u;++e)s=e<10&&u>=10?"0"+e:""+e,f._range[f._range.length]=s;return Calendar._add_evs(f),f}var f=o.date.getHours(),l=o.date.getMinutes(),n=!o.time24,c=f>12,e,s,h,r;n&&c&&(f-=12);e=u("hour",f,n?1:0,n?12:23);s=Calendar.createElement("span",t);s.appendChild(document.createTextNode(":"));s.className="colon";h=u("minute",l,0,59);r=null;t=Calendar.createElement("td",i);t.className="time";t.colSpan=2;n?r=u("ampm",c?"pm":"am",["am","pm"]):t.innerHTML="&nbsp;";o.onSetTime=function(){var t=this.date.getHours(),i=this.date.getMinutes(),u=t>12;u&&n&&(t-=12);e.firstChild.data=t<10?"0"+t:t;h.firstChild.data=i<10?"0"+i:i;n&&(r.firstChild.data=u?"pm":"am")};o.onUpdateTime=function(){var t=this.date,i=parseInt(e.firstChild.data,10);n&&(/pm/i.test(r.firstChild.data)&&i<12?i+=12:/am/i.test(r.firstChild.data)&&i==12&&(i=0));var u=t.getDate(),f=t.getMonth(),o=t.getFullYear();t.setHours(i);t.setMinutes(parseInt(h.firstChild.data,10));t.setFullYear(o);t.setMonth(f);t.setDate(u);this.dateClicked=!1;this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){},p=Calendar.createElement("tfoot",f),this.isPopup||(i=Calendar.createElement("tr",p),i.className="clearrow",t=e(Calendar._TT.CLEAR_DATE,this.weekNumbers?8:7,1e3),i.appendChild(t)),i=Calendar.createElement("tr",p),i.className="footrow",t=e(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),t.className="ttip",this.isPopup&&(t.ttip=Calendar._TT.DRAG_TO_MOVE,t.style.cursor="move"),this.tooltips=t,r=Calendar.createElement("div",this.element),this.monthsCombo=r,r.className="calendarcombo",u=0;u<Calendar._MN.length;++u)s=Calendar.createElement("div"),s.className=Calendar.is_ie?"label-IEfix":"label",s.month=u,s.appendChild(document.createTextNode(Calendar._SMN[u])),r.appendChild(s);for(r=Calendar.createElement("div",this.element),this.yearsCombo=r,r.className="calendarcombo",u=12;u>0;--u)l=Calendar.createElement("div"),l.className=Calendar.is_ie?"label-IEfix":"label",l.appendChild(document.createTextNode("")),r.appendChild(l);this._init(this.mondayFirst,this.date);a.appendChild(this.element)};Calendar._keyEvent=function(n){var t,u;if(!window.calendar)return!1;if(Calendar.is_ie&&(n=window.event),t=window.calendar,u=Calendar.is_ie||n.type=="keypress",n.ctrlKey)switch(n.keyCode){case 37:u&&Calendar.cellClick(t._nav_pm);break;case 38:u&&Calendar.cellClick(t._nav_py);break;case 39:u&&Calendar.cellClick(t._nav_nm);break;case 40:u&&Calendar.cellClick(t._nav_ny);break;default:return!1}else switch(n.keyCode){case 32:Calendar.cellClick(t._nav_now);break;case 27:u&&t.hide();break;case 37:case 38:case 39:case 40:if(u){var i=t.date.getDate()-1,f=t.currentDateEl,r=null,e=n.keyCode==37||n.keyCode==38;switch(n.keyCode){case 37:--i>=0&&(r=t.ar_days[i]);break;case 38:i-=7;i>=0&&(r=t.ar_days[i]);break;case 39:++i<t.ar_days.length&&(r=t.ar_days[i]);break;case 40:i+=7;i<t.ar_days.length&&(r=t.ar_days[i])}r||(e?Calendar.cellClick(t._nav_pm):Calendar.cellClick(t._nav_nm),i=e?t.date.getMonthDays():1,f=t.currentDateEl,r=t.ar_days[i-1]);Calendar.removeClass(f,"selected");Calendar.addClass(r,"selected");t.date.setDate(r.caldate);t.callHandler();t.currentDateEl=r}break;case 13:u&&(t.callHandler(),t.hide());break;default:return!1}return Calendar.stopEvent(n)};Calendar.prototype._init=function(n,t,i){var a=new Date,u=t.getFullYear(),h,r,c,l;u<this.minYear?(u=this.minYear,t.setFullYear(u)):u>this.maxYear&&(u=this.maxYear,t.setFullYear(u));this.mondayFirst=n;this.date=new Date(t);this.dateIsEmpty=!!i;var s=t.getMonth(),w=t.getDate(),y=t.getMonthDays();t.setDate(1);var e=t.getDay(),nt=n?1:0,b=n?5:6,k=n?6:0;n&&(e=e>0?e-1:6);var f=1,o=this.tbody.firstChild,tt=Calendar._SMN[s],d=a.getFullYear()==u&&a.getMonth()==s,g=a.getDate(),p=t.getWeekNumber(),v=[];for(h=0;h<6;++h){if(f>y){o.className="emptyrow";o=o.nextSibling;continue}for(r=o.firstChild,this.weekNumbers&&(r.className="day wn",r.firstChild.data=p,r=r.nextSibling),++p,o.className="daysrow",c=0;c<7;++c){if(r.className="day",!h&&c<e||f>y){r.className="emptycell";try{r.innerHTML="&nbsp;"}catch(it){}r.disabled=!0;r=r.nextSibling;continue}r.disabled=!1;r.firstChild.data=f;typeof this.getDateStatus=="function"&&(t.setDate(f),l=this.getDateStatus(t,u,s,f),l===!0?(r.className+=" disabled",r.disabled=!0):(/disabled/i.test(l)&&(r.disabled=!0),r.className+=" "+l));r.disabled||this.dateIsEmpty||(v[v.length]=r,r.caldate=f,r.ttip="_",f==w&&(r.className+=" selected",this.currentDateEl=r),d&&f==g&&(r.className+=" today",r.ttip+=Calendar._TT.PART_TODAY),(e==b||e==k)&&(r.className+=" weekend"));++f;++e^7||(e=0);r=r.nextSibling}o=o.nextSibling}this.ar_days=v;this.title.firstChild.data=Calendar._MN[s]+", "+u;this.onSetTime()};Calendar.prototype.setDate=function(n,t){n.equalsTo(this.date)||this._init(this.mondayFirst,n,t)};Calendar.prototype.refresh=function(){this._init(this.mondayFirst,this.date)};Calendar.prototype.setMondayFirst=function(n){this._init(n,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(n){this.getDateStatus=n};Calendar.prototype.setRange=function(n,t){this.minYear=n;this.maxYear=t};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.dateIsEmpty?gx.date.nullDate():this.date,this.params.inputField);gx.fn.setFocus(this.params.inputField)}};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){var n=this.element.parentNode;n.removeChild(this.element);Calendar._C=null;window.calendar=null};Calendar.prototype.reparent=function(n){var t=this.element;t.parentNode.removeChild(t);n.appendChild(t)};Calendar._checkCalendar=function(n){if(!window.calendar)return!1;if(Calendar.is_ie==!0){if(gx.evt.mouse.update(n),!gx.fx.isUnderMouse(calendar.element))return window.calendar.callCloseHandler(),Calendar.stopEvent(n)}else{for(var t=Calendar.getTargetElement(n);t!=null&&t!=calendar.element;t=t.parentNode);if(t==null)return window.calendar.callCloseHandler(),Calendar.stopEvent(n)}};Calendar.prototype.show=function(){var n,t,i,r,u,f;if(this.params.inputField.disabled==!0)return!1;for(n=this.table.getElementsByTagName("tr"),t=n.length;t>0;)for(i=n[--t],Calendar.removeClass(i,"rowhilite"),r=i.getElementsByTagName("td"),u=r.length;u>0;)f=r[--u],Calendar.removeClass(f,"hilite"),Calendar.removeClass(f,"active");this.element.style.display="block";this.hidden=!1;this.isPopup&&(window.calendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar));this.hideShowCovered()};Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar));this.element.style.display="none";this.hidden=!0;this.hideShowCovered()};Calendar.prototype.showAt=function(n,t){var i=this.element.style;this.params.displayRight?i.right=n+"px":i.left=n+"px";i.top=t+"px";this.show()};Calendar.prototype.showAtElement=function(n,t){var r=this,i=gx.dom.position(n),e;if(!t||typeof t!="string")return this.showAt(i.x,i.y+gx.dom.dimensions(n).h),$(r.element).position({of:n,my:"left top",at:"left bottom",collision:"flip"}),!0;var u=gx.dom.dimensions(r.element).w,f=gx.dom.dimensions(r.element).h,s=t.substr(0,1),o="l";t.length>1&&(o=t.substr(1,1));switch(s){case"T":i.y-=f;break;case"B":i.y+=n.offsetHeight;break;case"C":i.y+=(n.offsetHeight-f)/2;break;case"t":i.y+=n.offsetHeight-f}switch(o){case"L":i.x-=u;break;case"R":i.x+=n.offsetWidth;break;case"C":i.x+=(n.offsetWidth-u)/2;break;case"r":i.x+=n.offsetWidth-u}e=gx.dom.position(r.element.parentNode);r.showAt(i.x-e.x,i.y-e.y);$(r.element).position({of:n,my:"left top",at:"left bottom",collision:"flip"})};Calendar.prototype.setDateFormat=function(n){this.dateFormat=n};Calendar.prototype.setTtDateFormat=function(n){this.ttDateFormat=n};Calendar.prototype.parseDate=function(n){var t=gx.date.dateObject(n);gx.date.isNullDate(t)&&(t=new Date);this.setDate(t)};Calendar.prototype.hideShowCovered=function(){var t=gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8,n;this.isPopup&&t&&(n=this,Calendar.continuation_for_the_fucking_khtml_browser=function(){function e(n){var t=n.style.visibility;return t||(t=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(n,"").getPropertyValue("visibility"):n.currentStyle?n.currentStyle.visibility:""),t}for(var u,t,f,o=["object","applet","iframe","select"],r=n.element,i=Calendar.getAbsolutePos(r),s=i.x,v=r.offsetWidth+s,h=i.y,y=r.offsetHeight+h,c=o.length;c>0;)for(u=document.getElementsByTagName(o[--c]),t=null,f=u.length;f>0;){t=u[--f];i=Calendar.getAbsolutePos(t);var l=i.x,p=t.offsetWidth+l,a=i.y,w=t.offsetHeight+a;n.hidden||l>v||p<s||a>y||w<h?(t.__msh_save_visibility||t.__msh_save_visibility==""||(t.__msh_save_visibility=e(t)),t.style.visibility=typeof t.__msh_save_visibility!="undefined"?t.__msh_save_visibility:""):(t.__msh_save_visibility||(t.__msh_save_visibility=e(t)),t.style.visibility="hidden")}},Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser())};Calendar.prototype._displayWeekdays=function(){for(var i=this.mondayFirst?0:1,r=this.mondayFirst?6:0,u=this.mondayFirst?5:6,n=this.firstdayname,t=0;t<7;++t)n.className="day name",t||(n.ttip=this.mondayFirst?Calendar._TT.SUN_FIRST:Calendar._TT.MON_FIRST,n.navtype=100,n.calendar=this,Calendar._add_evs(n)),(t==r||t==u)&&Calendar.addClass(n,"weekend"),n.firstChild.data=Calendar._SDN[t+1-i],n=n.nextSibling};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};Calendar.prototype._dragStart=function(n){var t,i,r;if(!this.dragging){this.dragging=!0;Calendar.is_ie?(i=window.event.clientY+document.body.scrollTop,t=window.event.clientX+document.body.scrollLeft):(i=n.clientY+window.scrollY,t=n.clientX+window.scrollX);r=this.element.style;this.xOffs=t-parseInt(r.left);this.yOffs=i-parseInt(r.top);with(Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseover",stopEvent),addEvent(document,"mouseup",calDragEnd)}};window.calendar=null}