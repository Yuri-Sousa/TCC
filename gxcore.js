(function(n,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(n.Mustache={},t(n.Mustache))})(this,function(n){function u(n){return"function"==typeof n}function o(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(t,i){function et(n){if("string"==typeof n&&(n=n.split(b,2)),!f(n)||2!==n.length)throw Error("Invalid tags: "+n);ft=RegExp(o(n[0])+"\\s*");nt=RegExp("\\s*"+o(n[1]));ot=RegExp("\\s*"+o("}"+n[1]))}var e,a,u,h,p,st;if(!t)return[];var rt=[],g=[],tt=[],ut=!1,it=!1,ft,nt,ot;for(et(i||n.tags),e=new r(t);!e.eos();){if(a=e.pos,h=e.scanUntil(ft))for(p=0,st=h.length;p<st;++p)if(u=h.charAt(p),v.call(y,u)?it=!0:tt.push(g.length),g.push(["text",u,a,a+1]),a+=1,"\n"===u){if(ut&&!it)for(;tt.length;)delete g[tt.pop()];else tt=[];it=ut=!1}if(!e.scan(ft))break;if(ut=!0,u=e.scan(d)||"name",e.scan(w),"="===u?(h=e.scanUntil(s),e.scan(s),e.scanUntil(nt)):"{"===u?(h=e.scanUntil(ot),e.scan(k),e.scanUntil(nt),u="&"):h=e.scanUntil(nt),!e.scan(nt))throw Error("Unclosed tag at "+e.pos);if(p=[u,h,a,e.pos],g.push(p),"#"===u||"^"===u)rt.push(p);else if("/"===u){if(u=rt.pop(),!u)throw Error('Unopened section "'+h+'" at '+a);if(u[1]!==h)throw Error('Unclosed section "'+u[1]+'" at '+a);}else"name"===u||"{"===u||"&"===u?it=!0:"="===u&&et(h)}if(u=rt.pop())throw Error('Unclosed section "'+u[1]+'" at '+e.pos);return l(c(g))}function c(n){for(var u=[],t,i,r=0,f=n.length;r<f;++r)(t=n[r])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(u.push(t),i=t));return u}function l(n){for(var u=[],i=u,r=[],t,f=0,e=n.length;f<e;++f)switch(t=n[f],t[0]){case"#":case"^":i.push(t);r.push(t);i=t[4]=[];break;case"/":i=r.pop();i[5]=t[2];i=0<r.length?r[r.length-1][4]:u;break;default:i.push(t)}return u}function r(n){this.tail=this.string=n;this.pos=0}function i(n,t){this.view=n;this.cache={".":this.view};this.parent=t}function t(){this.cache={}}var a=Object.prototype.toString,f=Array.isArray||function(n){return"[object Array]"===a.call(n)},v=RegExp.prototype.test,y=/\S/,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},w=/\s*/,b=/\s+/,s=/\s*=/,k=/\s*\}/,d=/#|\^|\/|>|\{|&|=|!/,e;return r.prototype.eos=function(){return""===this.tail},r.prototype.scan=function(n){return(n=this.tail.match(n),!n||0!==n.index)?"":(n=n[0],this.tail=this.tail.substring(n.length),this.pos+=n.length,n)},r.prototype.scanUntil=function(n){var n=this.tail.search(n),t;switch(n){case-1:t=this.tail;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n);this.tail=this.tail.substring(n)}return this.pos+=t.length,t},i.prototype.push=function(n){return new i(n,this)},i.prototype.lookup=function(n){var s=this.cache,r,i,t,f,e,o;if(s.hasOwnProperty(n))r=s[n];else{for(i=this,o=!1;i;){if(0<n.indexOf("."))for(t=i.view,f=n.split("."),e=0;null!=t&&e<f.length;)e===f.length-1&&(o=null!=t&&"object"==typeof t&&f[e]in t||null!=t&&"object"!=typeof t&&t.hasOwnProperty&&t.hasOwnProperty(f[e])),t=t[f[e++]];else t=i.view[n],o=null!=i.view&&"object"==typeof i.view&&n in i.view;if(o){r=t;break}i=i.parent}s[n]=r}return u(r)&&(r=r.call(this.view)),r},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,i){var u=this.cache,f=t+":"+(i||n.tags).join(":"),r=u[f];return null==r&&(r=u[f]=h(t,i)),r},t.prototype.render=function(n,t,r,u){var f=this.parse(n,u),t=t instanceof i?t:new i(t);return this.renderTokens(f,t,r,n,u)},t.prototype.renderTokens=function(n,t,i,r,u){for(var h="",e,o,f,s=0,c=n.length;s<c;++s)f=void 0,e=n[s],o=e[0],"#"===o?f=this.renderSection(e,t,i,r):"^"===o?f=this.renderInverted(e,t,i,r):">"===o?f=this.renderPartial(e,t,i,u):"&"===o?f=this.unescapedValue(e,t):"name"===o?f=this.escapedValue(e,t):"text"===o&&(f=this.rawValue(e)),void 0!==f&&(h+=f);return h},t.prototype.renderSection=function(n,t,i,r){function c(n){return l.render(n,t,i)}var l=this,o="",e=t.lookup(n[1]),s,h;if(e){if(f(e))for(s=0,h=e.length;s<h;++s)o+=this.renderTokens(n[4],t.push(e[s]),i,r);else if("object"==typeof e||"string"==typeof e||"number"==typeof e)o+=this.renderTokens(n[4],t.push(e),i,r);else if(u(e)){if("string"!=typeof r)throw Error("Cannot use higher-order sections without the original template");e=e.call(t.view,r.slice(n[3],n[5]),c);null!=e&&(o+=e)}else o+=this.renderTokens(n[4],t,i,r);return o}},t.prototype.renderInverted=function(n,t,i,r){var u=t.lookup(n[1]);if(!u||f(u)&&0===u.length)return this.renderTokens(n[4],t,i,r)},t.prototype.renderPartial=function(n,t,i,r){if(i&&(n=u(i)?i(n[1]):i[n[1]],null!=n))return this.renderTokens(this.parse(n,r),t,i,n)},t.prototype.unescapedValue=function(n,t){var i=t.lookup(n[1]);if(null!=i)return i},t.prototype.escapedValue=function(t,i){var r=i.lookup(t[1]);if(null!=r)return n.escape(r)},t.prototype.rawValue=function(n){return n[1]},n.name="mustache.js",n.version="3.0.1",n.tags=["{{","}}"],e=new t,n.clearCache=function(){return e.clearCache()},n.parse=function(n,t){return e.parse(n,t)},n.render=function(n,t,i,r){if("string"!=typeof n)throw new TypeError('Invalid template! Template should be a "string" but "'+(f(n)?"array":typeof n)+'" was given as the first argument for mustache#render(template, view, partials)');return e.render(n,t,i,r)},n.to_html=function(t,i,r,f){if(t=n.render(t,i,r),u(f))f(t);else return t},n.escape=function(n){return(""+n).replace(/[&<>"'`=\/]/g,function(n){return p[n]})},n.Scanner=r,n.Context=i,n.Writer=t,n}),function(){window.onpageshow=function(n){n.persisted&&window.location.reload()}}();var gx=function(n){var i=/^(?:gx\.O\.)(.+)$/,r=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,t=function(){return!1};return{$:n.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:t,trueFn:function(){return!0},numericLenDec:function(n){var t=n.split("."),n=2===t.length?t[0]:n,t=2===t.length?t[1]:"",n=(n.match(/9|Z/g)||[]).length,t=(t.match(/9|Z/g)||[]).length;return{Integers:n,Decimals:t}},rtPicture:function(n,t){return t&&t.getAttribute("data-gx-rt-picture")||n&&n.pic||""},dom:{_form:null,_avoidLeaksDiv:null,id:function(n){return void 0==n.id||""==n.id?n.name:n.id},byId:function(n,t){return"string"==typeof n?(t=t||document,t.getElementById(n)):n},byName:function(n){return n?document.getElementsByName(n):[]},byTag:function(n,t){return t=t||document,t.getElementsByTagName(n)},byClass:function(t,i,r){return!i&&(r=document||r,r.getElementsByClassName)?r.getElementsByClassName(t):n((i||"")+"."+t,r).toArray()},bySelector:function(t){return n(t).toArray()},scripts:function(n){var i=document.scripts,t;if(i||(i=document.getElementsByTagName("script")),"undefined"!=typeof i){for(var u=[],f=i.length,r=0;r<f;r++)n&&null!=i[r].getAttribute("data-gx-external-script")||(t=i[r].attributes.src,t&&t.value&&(t=t.value,"//:"!=t&&u.push(t)));return u}return[]},getIntersectionObserver:function(n){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?n&&n(window.IntersectionObserver):gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"intersection-observer.js",!1),function(){n&&n(window.IntersectionObserver)})},_init:function(){gx.evt.on_ready(this,function(){var t,r,u=gx.util.browser,i=[],f;if(document.querySelectorAll)i=document.querySelectorAll("input[type='hidden']");else for(f=gx.dom.byTag("input"),t=0,r=f.length;t<r;t++)"hidden"==f[t].getAttribute("type")&&i.push(f[t]);for(t=0,r=i.length;t<r;t++)i[t].setAttribute("autocomplete","off");n('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(u.isChrome())for(u=document.querySelectorAll("select"),t=0,r=u.length;t<r;t++)!u[t].value&&(i=u[t].querySelectorAll("option[selected]"))&&i.length&&(u[t].value=i[0].value);n('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,skipPromptCtrl:!0,touchTimer:null,hooks:[],types:{VALUECHANGED:1,VALUECHANGING:2},serialRunner:function(){var n=[];return{addTask:function(t){n.push(t);1===n.length&&n[0]()},signalEndTask:function(){n.shift();0<n.length&&n[0]()}}},addHook:function(n,t,i){this.hooks.push({c:n,e:t,f:i})},attach:function(n,t,i,r,u){var f,h;if(u=u||{},"string"==typeof t){if(f=i,r&&(f=i.closure(r)),u.single){var o=f,s=!1,e,f=function(){s||(e&&clearTimeout(e),gx.evt.detach(n,t,o,u),o.apply(this,arguments),s=!0)};u.timeout&&(e=setTimeout(f,u.timeout))}n.addEventListener?n.addEventListener(t,f,u.useCapture||!1):n.attachEvent?n.attachEvent("on"+t,f):n["on"+t]=f;this.addHook(n,t,f)}else if(gx.lang.isArray(t))for(f=0,h=t.length;f<h;f++)this.attach(n,t[f],i,r,u)},on_ready:function(n,t){gx.fx.obs.addObserver("gx.onload",n,t)},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(n,t,i){gx.pO.MasterPage&&n.req.setRequestHeader(i,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(n,t,i,r,u,f){gx.reinit(!f)},oncontentreplace:function(n,t,i,r,u,f,e,o){var n=gx.lang.getType(r),f=(f=f==e?f:e)?gx.lang.getType(f.toLowerCase()):!1,s=gx.ajax.getJsonResponse();s&&gx.fn.setJsonHiddens(null,s.gxHiddens,!1);n.prototype=new gx.GxObject;gx.setParentObj(new n);o?gx.setMasterPage(u):f&&gx.setMasterPage(new f);gx.ajax.clearJsonResponse();s?gx.ajax.setJsonResponse({response:s,isPostBack:!1,afterCmpLoaded:function(){o&&(u.restoreTargetComponents(),u.restoreExoEventHandlers());gx.objectLoad(s.gxGrids,s.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}).done(function(){gx.fn.setFocusAfterLoad(!0)}):gx.objectLoad()}}})})},onready:function(n){gx.lang.emptyObject(n)?"complete"==document.readyState?gx.evt.onload():setTimeout(function(){gx.evt.onready(null)},250):gx.util.browser.isIE()&&"complete"==document.readyState&&gx.evt.onload()},_init:function(){document.gxReadyState="loading";gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE())?this.attach(document,"readystatechange",this.onready):9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini()?this.attach(document,"DOMContentLoaded",this.onload):gx.util.browser.isBlackBerry()?this.attach(window,"load",this.onload):gx.wi(function(){this.onready(null)},gx.evt);gx.wi(function(){this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},gx.evt)}},define:function(n,t,i){for(var u=0,r=window||this,n=n.split("."),f=n.length,u=0;u<f-1;u++)"undefined"==typeof r[n[u]]&&(r[n[u]]={}),r=r[n[u]];r[n[f-1]]=i;t||(r[n[f-1]].prototype=new gx.GxObject)},setParentObj:function(n){gx.pO=n;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout;gx.fx.obs.notify(gx.PARENT_OBJECT_EVT)},createParentObj:function(n){gx.spa&&gx.spa.started||(n instanceof gx.GxObject||(GxObj=new n),GxObj&&this.setParentObj(GxObj))},setExecutableComponent:function(n){gx.spa&&gx.spa.started||gx.wi(function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(n,"")),gx.fn.objectOnload(void 0,!0))},this)},setMasterPage:function(n){gx.wpo(function(){null!=gx.pO&&(gx.pO.MasterPage=n,gx.fx.obs.notify(gx.SETMASTERPAGE_EVT))})},createMasterPage:function(n){gx.wpo(function(){var t;gx.spa.isNavigating()||(n instanceof gx.GxObject||(t=new n),t&&this.setMasterPage(t))},this)},addComponent:function(n,t){null!=gx.pO&&gx.pO.setWebComponent(n,t)},createComponent:function(n,t,i){var r=null,u,n=gx.lang.getType(n);return null!=n&&(n.prototype=new gx.GxObject,u=gx.csv.cmpCtx,gx.csv.cmpCtx=t,r=new n(t),i&&r.setContainer(i),gx.csv.cmpCtx=u,r.serviceUrl=gx.fn.getControlValue(r.CmpContext+"_CMPPGM")),r},getObj:function(n,t){return""==n?!0==t?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(n)},setGxO:function(){var n,t;return 1==arguments.length&&"object"==typeof arguments[0]?gx.O=arguments[0]:(n=arguments[0],t=arguments[1],gx.O=this.getObj(n,t)||gx.pO),gx.csv.cmpCtx=gx.O.CmpContext,gx.O},setVar:function(n,t){gx.O.setVariable(n,t)},getVar:function(n){return gx.O.getVariable(n)},prefixVar:function(n){return"gx.O."+n},unprefixVar:function(n){var t=i,t=t.exec(n);return null!=t&&t[1]?n=t[1]:(t=r,t=t.exec(n),null!=t&&t[1]&&(n=t[1])),n},getMessage:function(n){return void 0==gx.msg[n]?n:gx.msg[n]},setLanguageCode:function(n){gx.languageCode=n},setDateFormat:function(n){gx.dateFormat=n},setTimeFormat:function(n){gx.timeFormat=n},setCenturyFirstYear:function(n){gx.centuryFirstYear=n},setBlankWhenEmptyDate:function(n){gx.blankWhenEmpty=n},setDecimalPoint:function(n){gx.decimalPoint=n},setThousandSeparator:function(n){gx.thousandSeparator=n},setStaticDirectory:function(n){if(gx.staticDirectory=n,""==gx.staticDirectory)gx.staticDirectory="/";else{var t=gx.staticDirectory.length,n="/"!=gx.staticDirectory.charAt(0),t="/"!=gx.staticDirectory.charAt(t-1);gx.staticDirectory=(n?"/":"")+gx.staticDirectory+(t?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var n=gx.fn.getHidden("GX_THEME");n&&n!=this.theme&&(this.theme=n,(n=gx.getThemeElement())&&0>n.href.search("/"+this.theme+".css"))&&(n.href=n.href.replace(/[^/]*.css/,this.theme+".css"))},setTheme:function(t){var i=gx.util.browser,f=i.isIE(),i=i.ieVersion(),r=gx.dom.fixes,u;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{void 0===t&&r.resetFixesStyleElement();gx.HTML5&&r.html5(t);void 0===t&&(f&&(n(document.documentElement).addClass("ie"),n(document.documentElement).addClass("ie"+i),gx.runtimeTemplates&&!Modernizr.flexbox&&n(document.documentElement).addClass("gx-align-fallback")),f&&10==i&&(u=document.createElement("style"),u.innerHTML="input::-ms-clear {display: none;}",document.body.appendChild(u)),r.setPopupMinWidth());r.fixTableResets(t)}catch(e){gx.dbg.logEx(e,"gxapi.js","setTheme")}},typedOld:function(n,t,i){switch(i){case"int":return this.OldInteger(n,t);case"decimal":return this.OldDecimal(n,t,!0);case"date":return this.OldDate(n,t);case"dtime":return this.OldDateTime(n,t);default:return this.Old(n,t)}},isInputEnabled:function(n){return n&&gx.evt.lastEvt==n?!0:!(gx.evt.processing&&!gx.csv.validating||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:t,isJava:function(){return!this.net},resolveObjClass:function(n){var t=n;return gx.gen.isDotNet()&&(t=n.replace(/\.aspx$/,"")),gx.gen.isJava()&&gx.pO&&gx.pO.PackageName&&gx.text.startsWith(n,gx.pO.PackageName)&&(t=n.substring(gx.pO.PackageName.length+1)),t}},util:{executionContext:{getContext:function(){return gx.http.currentUrl()},changedContext:function(n){return n!==gx.util.executionContext.getContext()}},contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},compare:function(n,t,i){if(typeof n!=typeof i)return!1;if("string"==typeof n&&"like"==t)return t=i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),t=gx.text.replaceAll(gx.text.replaceAll(t,"%",".*"),"_","."),RegExp(t,"i").test(n);switch(t){case">":return n>i;case">=":return n>=i;case"<":return n<i;case"<=":return n<=i;case"<>":return n!=i;default:return n==i}},isKnownContentType:function(n){for(var t in this.contentTypes)if(this.contentTypes[t]==n)return!0;return!1},getContentTypeFromExt:function(n){var t=n.lastIndexOf(".");return-1!=t&&(n=n.substring(t+1)),n?this.getContentType(n):""},getContentType:function(n){if(gx.lang.emptyObject(n))return"text/html";if(n=n.toLowerCase(),n=gx.text.trim(n),this.isKnownContentType(n))return n;var t=n.lastIndexOf(".");return-1!=t&&(n=n.substring(t+1)),n=this.contentTypes[n],gx.lang.emptyObject(n)?"text/html":n},getFileName:function(n){var i=n.lastIndexOf("/"),t=n.lastIndexOf("\\"),i=i>t?i:t,t=n.lastIndexOf(".");return n?((0>t||i>t)&&(t=n.length),n.substring(i+1,t)):n},getFileType:function(n){var i=n.lastIndexOf("/"),r=n.lastIndexOf("\\"),t=n.lastIndexOf(".");return 0>t||t<i||t<r?"":n.substring(t+1)},getWindowInfo:function(){var t="",n=!0,i=!1;try{if(i=window.location!=window.parent.location?!0:!1)try{n=window.frameElement.id||window.top.document.body;t=window.name}catch(r){n=!1}}catch(u){}return{insideIframe:i,canAccessFrame:n,frameId:t}},browser:function(){var n=navigator.userAgent,i=/; rv.([0-9]+)/,t;return{w3c:!0,ie5:!0,ie:-1!=n.indexOf("MSIE")||-1!=n.indexOf("Trident"),edge:-1!=n.indexOf("Edge"),ff:-1!=n.indexOf("Firefox"),winCE:-1!=n.indexOf("Windows CE"),iphone:-1!=n.indexOf("iPhone"),ipad:-1!=n.indexOf("iPad"),ipod:-1!=n.indexOf("iPod"),blackBerry:-1!=n.indexOf("BlackBerry"),operaMini:-1!=n.indexOf("Opera Mini"),opera:-1!=n.indexOf("Opera"),chrome:-1!=n.indexOf("Chrome"),android:-1!=n.indexOf("Android"),webkit:-1!=n.search(/webkit/ig),safari:-1!=n.indexOf("Safari"),isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isAndroid:function(){return this.android},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},isOldIE:function(n){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=(n||8)},ieVersion:function(){return t||(t=function(){var t,r,u,f;if(this.ie)try{if(r=n.indexOf("MSIE"),0<=r)return u=n.indexOf(";",r),f=n.substring(r+5,u),parseFloat(f,10);if(t=n.match(i),1<t.length)return parseFloat(t[1],10)}catch(e){gx.dbg.logEx(e,"gxapi.js","ieVersion")}else if(this.edge&&(t=n.match(/ Edge\/([0-9]+)\./),1<t.length))return parseFloat(t[1],10);return-1}.call(this)),t},chromeVersion:function(){if(this.isChrome()){var t=n.match(/Chrome\/([0-9]+)/);if(1<t.length)return parseFloat(t[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&"undefined"!=typeof Range&&!Range.prototype.createContextualFragment&&(Range.prototype.createContextualFragment=function(n){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.outerHTML=n,t});"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1);this.setupIE()}}}(),addOnce:function(n,t,i){void 0==n[i]&&(n[i]=t)},inArray:function(n,t){if(null==n||!gx.lang.isArray(t))return!1;if("function"==typeof t.indexOf)return-1!=t.indexOf(n);for(var r=t.length,i=0;i<r;i++)if(t[i]==n)return!0;return!1},pushOnceSorted:function(n,t){for(var r=!0,i=0,u=t.length;i<u;i++){if(n==t[i]){r=!1;break}if(n<t[i]){t.splice(i,0,n);r=!1;break}}r&&t.push(n)},lastArray:function(n){return 0<n.length?n[n.length-1]:null},noParmsUrl:function(n){var t=n.indexOf("?");return-1!=t&&(n=n.substring(0,t)),n},resolveUrl:function(n){return n?gx.isabsoluteurl(n)?n:gx.isRelativeToHost(n)?0!=n.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+n,!1):n:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+n,!1):n},resourceUrl:function(){var n;return function(t,i){var u,r,f;return(n||(n=RegExp(gx.basePath+"(/|$)","i")),"undefined"==typeof t)?"":-1!=t.indexOf("://")||"."==t.charAt(0)?t:(u="/"!=gx.basePath.charAt(gx.basePath.length-1),r=""==gx.basePath?0:t.search(n),0==r&&!i)?("/"==t.charAt(0)?"":"/")+t:-1!=r||i?(f="",f=-1!=r&&0<gx.basePath.length?gx.text.replaceAll(t.substring(r+gx.basePath.length),"\\","/"):t,"/"==t.charAt(0))?location.protocol+"//"+location.host+t:(r=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0),u=u&&"/"!=f.charAt(0),location.protocol+"//"+location.host+(r?"/":"")+gx.basePath+(u?"/":"")+f):t}}(),sameAppUrl:function(n){return n=new this.Url(n),n.isRelative()?!0:n.isSameApp(location.href)},removeBaseUrl:function(n){var t,i="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1),r=0<gx.basePath.length;return t="/"==gx.staticDirectory.charAt(0)?gx.staticDirectory.substring(1):gx.staticDirectory,t=RegExp("(?:/)?(?:"+gx.basePath+(r?"/":"")+"(?:"+t+(i?"/":"")+")?)?((?:[\\S]*))").exec(n),null!=t&&t[1]&&(n=t[1]),n},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var t=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,i=/^(([^@]+)@)?([^\:]+)(:(.+))?$/,n=function(n){this.url=n;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(n){return n=new gx.util.Url(n),this.protocol==n.protocol&&this.host==n.host},function(n,r){var u=t,u=u.exec(r),f=!gx.lang.emptyObject(u);f&&(n.protocol=u[2]?u[2]:"",f=u[4]?u[4]:"",n.path=u[5]?u[5]:"",n.query=u[7]?u[7]:"",n.hash=u[9]?u[9]:"",u=i,u=u.exec(f),f=!gx.lang.emptyObject(u))&&(n.user=u[2]?u[2]:"",n.host=u[3]?u[3]:"",n.port=u[5]?u[5]:"")}(this,n)};return n.parseWithAnchor=function(n){var t=document.createElement("a");return t.href=n,!t.protocol&&gx.util.browser.isIE()&&(t.href=t.href),t},n}(),regExp:{isMatch:function(n,t){return null!==RegExp(t).exec(n)},replace:function(n,t,i){return n.replace(t,i)},split:function(n,t){return n.split(t)},matches:function(n,t){var i=RegExp(t).exec(n);return null!==i?i:[]}},autoRefresh:{arTimer:null,getProps:function(){var n=gx.fn.getHidden("_GxRefreshTimeout");return null!=n&&(n=gx.json.evalJSON(n),n.Time=parseInt(n.Time)),n},install:function(){var n=this.getProps();null!=n&&(this.create(),"focus"==n.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var n=this.getProps();null!=n&&(this.arTimer=setTimeout(function(){gx.http.reload()},1e3*n.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(n){var i="",r,t;if(-1!=n.indexOf("&"))for(r=n.length,t=0;t<r-1;t++)if("&"==n[t]&&"&"!=n[t+1]){i+=n[t+1];break}return i},accessKeyCaption:function(n){var i="",r,t;if(-1==n.indexOf("&"))return n;for(r=n.length,t=0;t<r-1;t++)if("&"==n[t]&&"&"!=n[t+1]){i+=n.substring(t+1);break}else i+=n[t];return i},invalidFunc:function(n){throw"gxInvalidFunc: "+n;},urlValue:function(n){var t=n;return"string"!=typeof t&&(t=gx.fn.getControlValueInt(n)),encodeURIComponent(t)},help:function(n){open(n,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}},guid:{generate:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(n){(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})}},lang:{inherits:function(n,t,i){var u=n.prototype,r;n.prototype=new t;for(r in u)"undefined"==typeof n.prototype[r]&&(n.prototype[r]=u[r]);"undefined"==typeof n.prototype.base&&(n.prototype.base=t);!0===i&&(n.prototype.constructor=function(){t.prototype.constructor.apply(this,arguments);u.constructor.apply(this,arguments)})},apply:function(n,t){if(n&&t&&"object"==typeof t)for(var i in t)n[i]=t[i];return n},instanceOf:function(n,t){if(null==n||null==t)return!1;if(n instanceof t||t==String&&"string"==typeof n||t==Number&&("number"==typeof n||"undefined"!=typeof gx.num.dec&&n instanceof gx.num.dec.bigDecimal)||t==Array&&"array"==typeof n||t==Function&&"function"==typeof n)return!0;if("string"==typeof n||"number"==typeof n||"array"==typeof n)return!1;for(var i=n.base;"undefined"!=typeof i;){if(i==t)return!0;i=i.base}return!1},clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},cloneDeep:function(n){return JSON.parse(JSON.stringify(n))},isDateType:function(n){return"date"==n||"dtime"==n},isNumericType:function(n){return"int"==n||"decimal"==n},isBooleanType:function(n){return"boolean"==n||"bool"==n},isFixedCharacterType:function(n){return"char"==n||"bits"==n},isCharacterType:function(n){return"char"==n||"svchar"==n||"bits"==n},isArray:function(n){return n&&"number"==typeof n.length&&"function"==typeof n.splice},booleanValue:function(n){return!0==n||!1==n?n:"string"==typeof n&&"true"==n.toLowerCase()?!0:!1},gxBoolean:function(n){if("undefined"==typeof n)return!1;if("boolean"==typeof n)return n;if("number"==typeof n){if(0==n)return!1}else if("string"==typeof n&&(""==n||"false"==n.toLowerCase()||"0"==n.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},emptyNum:function(n){return n&&0===n||!n},emptyObj:function(n){if(n)for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},emptyObject:function(n){return void 0===n||null==n||""==n||"number"==typeof n&&isNaN(n)?!0:!1},supEval:function(n,t){var i=null,i=t instanceof String||"string"==typeof t?n[t]:t;return function(){return i.apply(n,arguments)}},getType:function(n){var u=null;try{for(var i=0,t=window,r=n.split("."),f=r.length,i=0;i<f;i++)t[r[i]]&&(t=t[r[i]]);t&&t!=window&&(u=t)}catch(e){gx.dbg.logEx(e,"gxapi.js","getType")}return u},doEval:function(n,t){return t=t||window,t.execScript?t.execScript(n):eval.call?eval.call(t,n):eval(n)},doCall:function(){try{for(var i=arguments[0],t=[],r=arguments.length,n=1;n<r;n++)t.push(arguments[n]);return i.apply(this,t)}catch(u){gx.dbg.logEx(u,"gxapi.js","doCall")}},doExecTimeout:function(n){clearTimeout(n.t);n.f.call()},doCallTimeout:function(n,t,i,r){return n=n.closure(t,i),r=setTimeout(n,r),{f:n,t:r}},requestAnimationFrame:function(n,t){n=t?n.closure(t):n;window.requestAnimationFrame?window.requestAnimationFrame(n):window.setTimeout(n,10)},htmlDecode:function(){var t=document.createElement("div");return function(i){return i&&"string"==typeof i&&(i=escape(i).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),t.innerHTML=i,i=n(t).text(),n(t).text("")),unescape(i)}}(),arrayUnique:function(n){for(var i,n=n.concat(),t=0;t<n.length;++t)for(i=t+1;i<n.length;++i)n[t]===n[i]&&n.splice(i--,1);return n},objToArray:function(){var t=function(n){return[n]};return function(i){return n.map(i,t)}}()},cache:function(){var n=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(n){return this.exceptionsRegEx?!!n&&-1==n.search(this.exceptionsRegEx):!0},addRemoteFile:function(n){this.isCacheable(n)&&(n=gx.util.noParmsUrl(n),this.remoteFiles[gx.util.resourceUrl(n,!0)]=!0)},addLoadedFile:function(n){this.isCacheable(n)&&(n=gx.util.noParmsUrl(n),this.remoteFiles[gx.util.resourceUrl(n,!0)]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(n){var t;if(n)for(t in this.remoteFiles)n.exec(t)&&(this.remoteFiles[t]=!1)},removeRemoteFile:function(n){n=gx.util.noParmsUrl(n);this.remoteFiles[gx.util.resourceUrl(n,!0)]=!1},fileLoaded:function(n){return n=gx.util.noParmsUrl(n),this.remoteFiles[gx.util.resourceUrl(n,!0)]?!0:!1},updateStyles:function(n,t){for(var i,f=[],e=n.length,r=0;r<e;r++)if(i=n[r],!gx.lang.emptyObject(i)){for(var u=!1,s=t.length,o=0;o<s;o++)if(i==t[o]){u=!0;break}u||f.push(i)}for(u=gx.staticDirectory,"/"==u.charAt(0)&&(u=u.substring(1)),e=f.length,r=0;r<e;r++)i=f[r],"/"!=i.charAt(0)&&(i=u+i),this.removeRemoteFile(i)},addInlineCode:function(n){this.inlineCode[n]=!0},deleteInlineCode:function(n){delete this.inlineCode[n]},codeLoaded:function(n){return this.inlineCode[n]?!0:!1},_init:function(){var r,t;if(!n){n=!0;r=gx.staticDirectory;"/"==r.charAt(0)&&(r=r.substring(1));for(var u=gx.dom.scripts(!0),f=u.length,i=0;i<f;i++)t=u[i],gx.lang.emptyObject(t)||("/"!=t.charAt(0)&&!gx.isabsoluteurl(t)&&(t=r+t),this.addRemoteFile(t));for(u=gx.dom.styles(),f=u.length,i=0;i<f;i++)t=u[i],gx.lang.emptyObject(t)||("/"!=t.charAt(0)&&!gx.isabsoluteurl(t)&&(t=r+t),this.addRemoteFile(t))}}}}(),json:{_nonSerializables:[],setNonSerializable:function(n){this.isNonSerializable(n)||this._nonSerializables.push(n)},isNonSerializable:function(n){for(var i=this._nonSerializables.length,t=0;t<i;t++)if(this._nonSerializables[t]==n)return!0;return!1},evalJSON:function(n,t){try{return window.JSON&&!t?void 0===n?n:JSON.parse(n):eval("("+n+")")}catch(i){gx.dbg.logEx(i,"gxapi.js","evalJSON")}return n},evalValidJSON:function(n){return eval("("+n+")")},serializeSDTJson:function(n,t,i){return n=gx.lang.cloneDeep(n),n=gx.O.applySDTMapping(n,t,!1),gx.json.serializeJson(n,i)},serializeJson:function(n,t){var i,r,u,f;if(t&&window.JSON)return JSON.stringify(n);if(i=this.objToJson(n),null===i)i=this.arrayToJson(n);else return i;if(null===i){if("function"==typeof n)return null;i=[];for(r in n)(t||!this.isNonSerializable(r))&&(u=this.objToJson(r,!0),null!==u&&(f=this.serializeJson(n[r]),"string"==typeof f&&i.push(u+":"+f)));return"{"+i.join(",")+"}"}return i},objToJson:function(n,t){var i=typeof n;if(t){if(!gx.lang.emptyObject(n)){if("string"==i)return gx.text.escapeString(n);if("number"==i)return'"'+n+'"';if("undefined"!=typeof gx.num.dec&&n instanceof gx.num.dec.bigDecimal)return'"'+n.toString()+'"'}}else{if("undefined"==i)return i;if("string"==i)return gx.text.escapeString(n);if("number"==i||"boolean"==i)return n.toString();if("undefined"!=typeof gx.num.dec&&n instanceof gx.num.dec.bigDecimal)return'"'+n.toString()+'"';if(null===n)return"null";if("function"==typeof n.json&&(i=n.json(),n!==i))return this.serializeJson(i)}return null},arrayToJson:function(n){var t;if(Array.isArray(n)){for(var r=[],u=n.length,i=0;i<u;i++)t=this.serializeJson(n[i]),"string"!=typeof t&&(t="undefined"),r.push(t);return"["+r.join(",")+"]"}return null},SDTFromJson:function(n,t,i,r){return(i=gx.json.objFromJson(n,i,r))&&gx.O.applySDTMapping(n,t,!0),i},objFromJson:function(n,t,i){var u,r;try{if(u=this.evalValidJSON(t),Array.isArray(n)&&Array.isArray(u))for(;n.length>u.length;)n.shift();else for(r in n)"function"!=typeof n[r]&&delete n[r];for(r in u)n[r]=u[r];return!0}catch(f){return gx.dbg.logEx(f,"gxapi.js","objFromJson"),i&&i.push({Id:"FromJson Error",Description:gx.dbg.exTxt(f),Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logDebug:function(n){this.enabled&&this.write(n)},logMsg:function(n){(this.enabled||window.console)&&this.write(n)},logEx:function(n,t,i){if(this.enabled||window.console){var r="";if(n&&n instanceof Error)r="["+n.name+": "+this.exTxt(n),r=r+(t?", file: "+t:"")+((i?", func: "+i:"")+"]"),n.fileName&&(r+=" FileName:"+n.fileName),n.lineNumber&&(r+=" ln:"+n.lineNumber);else try{r=""+n}catch(u){r="[Unknown Error]"}this.write(r,!0,n)}},exTxt:function(n){return n?n.message?n.message:n.description?n.description:n.toString():"Unknown Error"},write:function(n,t,i){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900"));gx.dom.write(n+"<BR>",this.dbgWin.document)}catch(r){}window.console&&(t?i&&i.stack?console.error(i,i.stack):console.error(n):console.log(n));t&&window.ga&&ga("send","exception",{exDescription:n,exFatal:t})},writeT:function(n){var t=new Date,i=t.getTime(),r=this.lastTime;0<this.lastTime&&(r=(i-this.lastTime)/1e3);this.lastTime=i;n=t.toString()+" (+"+r+"seg): "+n;this.write(n)},logPerf:function(n,t){if(this.performance)if(void 0===this.hshTimes[n])this.hshTimes[n]=(new Date).getTime();else{var i=((new Date).getTime()-this.hshTimes[n])/1e3;delete this.hshTimes[n];0<i&&this.performanceLog.push((void 0==t?n:t)+":("+i+"seg)")}},printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},stackId:function(n){return"stack_"+gx.util.getWindowInfo().frameId+n},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},csv:{},http:{currentUrl:function(){return location.href.replace(location.hash,"")},loadScript:function(t,i,r){var f=i,s=!1,h,e,o;"string"!=typeof t&&(h=t.callback,s=t.isExternal,e=t.attris,t=t.url,f=function(){h&&h();i()});var a=gx.dom.byTag("head")[0],u,c=n("script[src='"+t+"']"),l=!0;if(0<c.length&&!r&&(s?c.remove():(u=c.get(0),l=!1)),r=function(n){var t=function(){n();u.removeAttribute("data-gx-loading-script")};typeof n=="function"&&(u.addEventListener?gx.evt.attach(u,["load","error"],t,{userCapture:!1}):u.onreadystatechange=function(){(u.readyState=="loaded"||u.readyState=="complete")&&t()})},u)null!==u.getAttribute("data-gx-loading-script")?r(f):f();else{if(u=document.createElement("script"),u.type="text/javascript",u.src=t,e)for(o in e)e.hasOwnProperty(o)&&u.setAttribute(o,e[o]);f&&u.setAttribute("async","");s&&u.setAttribute("data-gx-external-script","");r(f);l&&(a.appendChild(u),u.setAttribute("data-gx-loading-script",""))}}},storage:function(n){if(this._store=window.sessionStorage,this._prefix=n,this.supported=!1,this.set_string=function(n,t){this.supported&&(this._store[this._prefix+n]=t)},this.get_string=function(n){return this.supported?this._store[this._prefix+n]:null},this.set=function(n,t){this.set_string(n,gx.json.serializeJson(t))},this.get=function(n){return(n=this.get_string(n))?gx.json.evalJSON(n):null},this.remove=function(n){this.supported&&this._store.removeItem(this._prefix+n)},"undefined"!=typeof sessionStorage)try{window.sessionStorage.setItem("storage.test",!0);window.sessionStorage.removeItem("storage.test");this.supported=!0}catch(t){gx.http.setCookie("GXLocalStorageSupport","false",1,!1)}},_setBasePath:function(){for(var r,t=gx.dom.scripts(),i=null,n=0,u=t.length;n<u;n++)if(0<=t[n].indexOf("gxgral.js")||0<=t[n].indexOf("gxcore.js")||0<=t[n].indexOf("gxapiSD.js")){i=t[n];break}if(t="",!gx.isRelativeToHost(i)||gx.isabsoluteurl(i))n=location.pathname.lastIndexOf("/"),t=1<n?location.pathname.substring(1,n):"";else for(i=i.split("/"),r=location.pathname.split("/"),i.splice(i.length-1,1),r.splice(r.length-1,1),n=0,u=r.length;n<u;n++)if(r[n]==i[n])t=t+(""==t?"":"/")+r[n];else break;gx.basePath=t},objectLoad:function(t,i){var r=n.Deferred(),u;return gx.evt.execLoad?(u=function(){gx.sec.loadKey();void 0===gx.runtimeTemplates&&(gx.runtimeTemplates=0<n("div[data-abstract-form]").length);var u=!0;gx.setTheme();gx.html.applyCustomHTMLAttributes();gx.fx.obs.addObserver("webcom.render",this,function(n){(n=n.getContainer())&&(gx.setTheme(n),gx.html.applyCustomHTMLAttributes(n),u||(gx.pendingCmps=gx.pendingCmps||0,gx.pendingCmps=gx.pendingCmps+1,gx.plugdesign.applyTemplateObject({selector:"#"+n.id,deferred:!0}).then(function(){typeof gx.pendingCmps!="undefined"&&(gx.pendingCmps=gx.pendingCmps-1,gx.pendingCmps===0&&gx.fx.obs.notify("webcom.all_rendered"))})))});gx.fx.obs.addObserver("grid.onafterrender",this,function(n,t){t||gx.dom.fixes.fixTableResets(n.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();gx.dom.fixes.createLegacyNotification();gx.cache._init();gx.fn.installComponents(!0,i);gx.http.loadStyles();t&&gx.fn.loadJsonGrids(t,!1);gx.plugdesign.init().done(function(){if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var n=jstz.determine().name();!gx.lang.emptyObject(n)&&gx.http.getCookie("GxTZOffset")!=n&&gx.http.setCookie("GxTZOffset",n,365,!1,"/")&&gx.config.timezone.reload&&gx.http.reload()}gx.evt.attach(window,"load",gx.http.applyDeferredStyles);gx.fn.objectOnload();gx.goReady();document.gxReadyState="complete";gx.util.autoRefresh.install();gx.fn.setOpacity("reset","body");gx.evt.setProcessing(!1);gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();gx.evt.setReady(!0);gx.evt.userReadyCnt=0;u=!1;r.resolve()})},gx.popup?gx.goInteractive():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxi.js",!1),function(){gx.goInteractive()}),gx.wpo(function(){u()}),r.promise()):(r.resolve(),r.promise())},objectUnload:function(t){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.notifications.deinit();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(t);gx.plugdesign.deinit();gx._deinit();n(document).off("keypress keyup");gx.evt.detach(document,"keydown",gx.evt.onkeypress_hdlr)},_init_interactive:function(){gx.evt.dispatcher.initialize();gx.base64._init();gx.sec._init();gx.geolocation._init();gx.popup._init();gx.livePrevWS._init()},_init:function(){gx.wi(gx._init_interactive,gx);gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var r=["onblur","onclick","onfocus","onchange"],t=gx.fn.getFormElements(),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r);for(t=gx.dom.byTag("span"),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r);for(t=gx.dom.byTag("img"),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(n){gx.pO.clean(n);gx.objectUnload(n);gx._init()}}}(jQuery);gx.plugdesign=function(n){var t={},o=!1,u,f,h=1,i={},r={},s=function(n,t){return function(i){var r=n[i.property],u;r&&(u=r[i.control.id]);!u&&r&&(u=r[i.control.name]);u&&(r=!0===u.fn.call(u.template,i.control,i.value),t&&(i.cancel=r))}},e=function(n){window.requestIdleCallback?window.requestIdleCallback(n):gx.lang.requestAnimationFrame(n)};return{init:function(){return gx.plugdesign.initialized=!0,gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this)),gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange),gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},onBeforePropertyChange:s(i,!0),onAfterPropertyChange:s(r,!1),registerTemplate:function(n){t[n.name]=n},unRegisterTemplate:function(i){delete t[i];gx.plugdesign.definition.templates=n.grep(gx.plugdesign.definition.templates,function(n){return n!==i})},getDOMContext:function(t,i,r,u,f,e){var o,s,i={};for(e&&(i.text=n(t).text()),e=0,s=t.attributes.length;e<s;e++)o=t.attributes[e],i[o.name]=o.value;return i.el=t,r&&(i.outerHTML=t.outerHTML),u&&(i.innerHTML=t.innerHTML),f&&(i=f.call(this,i,t)||i),i},assingUserAPI:function(n,t){t.fnc_isRO=n.fnc_isRO},getElements:function(t,i,r){return t="function"==typeof t.selector?t.selector(i?i:""):i&&!t.global?n(i).find(t.selector):n(t.selector),r?t.not(r):t},shouldApplyOnElement:function(t,i){return"function"==typeof i.selector?this.getElements(i).is(t):n(t).is(i.selector)},applyTemplateOnElement:function(u,f,o){var s=n.Deferred();return e(function(){var n,e,h;if(("string"!=typeof u||(u=t[u],u))&&(!0!==o||this.shouldApplyOnElement(f,u))){if(h=gx.plugdesign.getDOMContext(f,h,u.outerHTML,u.innerHTML,u.setContext),u.apply(f,h),u.initialize&&u.initialize(h),u.listeners){if(n=u.listeners,h="function"==typeof n.control?n.control(h):n.control,n.before)for(e in n.before)n.before.hasOwnProperty(e)&&(i[e]||(i[e]={}),i[e][h]={id:h,fn:n.before[e],template:u});if(n.after)for(e in n.after)n.after.hasOwnProperty(e)&&(r[e]||(r[e]={}),r[e][h]={id:h,fn:n.after[e],template:u})}s.resolve()}}.closure(this)),s},applyTemplateSelection:function(t,i,r,u){var s=n.Deferred(),e=[],o="data-gx-tpl-applied-"+t.name,f=this.getElements(t,i,r,u);return!0===t.onDemandInvoke||t.reDraw||(f=f.not("["+o+"]")),f.each(function(n,i){if(i)if("function"==typeof t.reDraw)if(null!==i.getAttribute(o)){var r;r=gx.plugdesign.getDOMContext(i,r,!1,!1,t.setContext);t.reDraw(r)}else e.push(gx.plugdesign.applyTemplateOnElement(t,i));else e.push(gx.plugdesign.applyTemplateOnElement(t,i))}),n.when.apply(n,e).done(function(){t.outerHTML&&(f=this.getElements(t,i,r,u));f.attr(o,"");s.resolve()}.closure(this)),s},applyClassMapOnElement:function(n,t){var r,i,u;if(n.initialize&&(r=gx.plugdesign.getDOMContext(t,r,!1,!1,n.setContext)),Array.isArray(n.cssClass))for(i=0,u=n.cssClass.length;i<u;i++)gx.dom.addClass(t,n.cssClass[i]);else gx.dom.addClass(t,n.cssClass);n.initialize&&n.initialize(r)},applyClassSelection:function(n,t,i,r){var u=function(t){"Class"==t.property&&gx.dom.matchesSelector(t.control,n.selector)&&gx.plugdesign.applyClassMapOnElement(n,t.control)};this.getElements(n,t,i,r).each(function(t,i){i&&(gx.plugdesign.applyClassMapOnElement(n,i),gx.plugdesign.assingUserAPI(n,i),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,u,{unique:!1}))})},controlValueChanged:function(n,t){n&&gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:n,property:"Value",value:t}])},applyControlValue:function(n,t){gx.fn.setControlValue(n.id,t);gx.html.onchange(n,t)},applyTemplates:function(i,r,u,f,o){var o=o||{},s=n.Deferred();return 0===i.length?s.resolve():(i=n.map(i,function(i){var s=n.Deferred(),c;return"string"==typeof i?i=t[i]:(i.name=i.name||"auto-generated-"+h++,i=new gx.plugdesign.Template(i)),!f||"function"==typeof f&&f(i)?(c=function(){gx.plugdesign.applyTemplateSelection(i,r,u,o).done(function(){s.resolve()})},!0===o.deferred?e(c):(c(),s.resolve())):s.resolve(),s}),!0===o.deferred?n.when.apply(n,i).done(function(){s.resolve()}):s.resolve(),s)},applyClassMaps:function(t,i,r,u,f){var o=n.Deferred(),s=function(n,t){gx.plugdesign.applyClassSelection(t,i,r,f)};return e(function(){t=n.grep(t,u||gx.trueFn);n.each(t,s);o.resolve()}),o},applyTemplateObject:function(t){var t=t||{},r=t.selector,e=t.excluded,h=t.templateSelector,p=t.classMapSelector,s=n.Deferred(),c,l,v=n.Deferred(),h=h||function(n){return!0!==n.onDemandInvoke},i,a,y;return!gx.runtimeTemplates||!gx.plugdesign.initialized?s.resolve().promise():(o?(l=this.applyTemplates(u,r,e,h,t),c=this.applyClassMaps(f,r,e,p,t),s.resolve()):(i=gx.plugdesign.definition,i.css&&n.each(i.css,function(n,t){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+t+"?"+gx.gxBuild,!1),!1,!0)}),a=[],i.js&&n.each(i.js,function(n,t){a.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+t+"?"+gx.gxBuild,!1))}),y=jQuery,jQuery=gx.$,gx.http.loadScripts(a,function(){o=!0;u=i.templates||[];f=i.class_maps||[];l=this.applyTemplates(u,r,e,h,t);c=this.applyClassMaps(f,r,e,void 0,t);jQuery=y;s.resolve()}.closure(this))),n.when.apply(n,[s,l,c]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",[t]);v.resolve()}),v.promise())},fixBootstrapGridLayout:function(){0===n(".container-fluid, .container").length&&n(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var t=function(t){var i,r=[],t=t||{},u;if(t.name){if(t.selector){if(t.listeners&&(u=t.listeners,!u.control&&(u.before||u.after))){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}return this.preProcessTemplate=function(){var n=this.template,u=/\{\{\$(\w+)\$\}\}/g,t,i=0;for(r=[];null!==(t=u.exec(n));)r[i]=t[1],n=n.replace(t[0],'<span id="hook_'+i+'"><\/span>'),i++;return n},this.postProcessTemplate=function(t){var i,e,u,f;if(r)for(i=0,e=r.length;i<e;i++)u=t[r[i]],f=n("#hook_"+i),u&&f.after(u),f.remove()},this.apply=function(t,r){var u,f=gx.util.browser.isIE(),e=!1;if(!i&&this.template&&(i=this.preProcessTemplate(),Mustache.parse(i)),i){if(u=Mustache.render(i,r),"inner"==this.applyTo){if(f)for(;t.firstChild;)t.removeChild(t.firstChild);t.innerHTML=u}else e=t===document.activeElement,t.parentNode&&!f?t.outerHTML=u:n(t).replaceWith(u);this.postProcessTemplate(r);e&&gx.fn.setFocus(t)}},gx.lang.apply(this,t),this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};return t.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}},t}()}}(gx.$);gx.plugdesign.definition={css:[],js:[],templates:"labels atts-vars readonly-atts-vars checkbox radio-button prompt prompt-trigger datepicker geolocation multimedia-upload navbar navbar-textblock-link navbar-textblock-text textarea-auto-expand image usercontrol errorviewer password-atts-vars".split(" "),class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]):not([type="checkbox"]), .gx-attribute > select, .gx-attribute > textarea',cssClass:"form-control"},{selector:".gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input",cssClass:"form-control"},{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"][data-gx-button], .gx-grid-paging-bar button',cssClass:["btn","btn-default"],first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:["btn","btn-default"],first:!0}]};gx.html=function(n){var r=/<style[^>]*>([\s\S]*?)<\/style>/i,u=RegExp("<style[^>]*>([\\s\\S]*?)<\/style>","ig"),f=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,e=/<link ([^>]*rel=['"]?shortcut icon['"]?[^>]*)>/i,o=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),i=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<.?\/script>)/i,t=/<script([^>]*)>([\s\S]*?)<\/script>/i,s=/data-gx-external-script/;return HREF_ELEMENT_ATT_REGEX=/href=(['"]?)([^'">]*)\1/i,ID_ELEMENT_ATT_REGEX=/id=(['"]?)([^'">]*)\1/i,SRC_ELEMENT_ATT_REGEX_1=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,SRC_ELEMENT_ATT_REGEX_2=/src=(['"]?)([^"']*)\1/i,INPUT_GXSTATE_REGEX=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g,{encodeCaseFormat:function(n,t,i){return t==gx.html.controls.formats.TEXT?n=gx.html.encode(n,!1,i):t==gx.html.controls.formats.TEXT_W_SPACES&&(n=gx.html.encode(n,!0,i)),n},applyCustomHTMLAttributes:function(t){(t?n(t):n(document)).find("input[data-msk-att], textarea[data-msk-att]").each(function(t,i){var r=n(i),u=r.attr("data-msk-att");r.attr(u,r.attr("data-"+u))})},encode:function(n,t,i){var r=["<",">","&"],u=["&lt;","&gt;","&amp;"];return t&&(r.push(" "),u.push("&nbsp;")),i&&(r.push("\n"),u.push("<br/>")),gx.text.charReplace(n,r,u)},getHidden:function(n,t){return'<input type="hidden" id="'+n+'" name="'+n+'" value="'+t+'">'},viewportWidth:function(){var n=document.documentElement;return n&&n.clientHeight?Math.max(n.clientWidth,document.body.clientWidth):document.body.clientWidth},viewportHeight:function(){var n=document.documentElement;return n&&n.clientHeight?Math.max(n.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(n,i){var n,r,f;for((void 0===i||i)&&(n=n.replace(u,"")),n=n.replace(o,""),r=[];r;)if(r=n.match(t))f=this.nestedScripts(r,n),0<f&&(r=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+f+"}"),"i"),r=n.match(r)),(f=r.lastIndex)||(f=r.index+r[0].length),n=n.substring(0,r.index)+n.substring(f);else break;return n},setOuterHtml:function(n,t){n.outerHTML=t},setInnerHtml:function(t,i,r,u,f){var s=gx.dom.styles(),o=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,e;gx.dom.shouldPurge()&&gx.dom.purge(t,!0);e=n(t).children("."+o).get(0);!e&&u&&(e=document.createElement("div"),gx.dom.addClass(e,o),gx.dom.addClass(e,"Form-fx"),t.appendChild(e));u&&gx.pO.fullAjax&&e&&gx.dom.hasClass(e,o)&&!gx.dom.hasClass(t,"transitioning")?(t=document.createElement("div"),t.innerHTML=this.cleanHtmlRefs(i,f),gx.dom.replaceWithFx(e,t.children[0])):n(t).html(this.cleanHtmlRefs(i,f));gx.util.browser.isIE()&&gx.cache.updateStyles(s,gx.dom.styles());!0==r&&this.processCode(i,!1)},setInnerText:function(t,i,r,u){var f=n(t);null!=t.nodeValue?t.nodeValue=i:!gx.util.browser.isChrome()&&null!=t.innerText?t.innerText=i:gx.util.browser.isFirefox()||gx.util.browser.isChrome()?f.html(gx.html.encodeCaseFormat(i,r,u)):"TEXT"==t.tagName&&null!=t.innerHTML?f.html(i):f.html("<text>"+i+"<\/text>")},nodesFromText:function(n){var t=document.createElement("div");t.style.visibility="hidden";t.style.display="none";document.body.appendChild(t);gx.dom.shouldPurge()&&gx.dom.purge(t,!0);t.innerHTML=n;for(var n=[],r=t.childNodes.length,i=0;i<r;i++)n.push(t.childNodes[i].cloneNode(!0));return gx.dom.removeControlSafe(t),n},onTypeAvailable:function(n,t,i){try{eval(gx.gen.resolveObjClass(n));i instanceof Array?t.apply(this,i):t()}catch(r){setTimeout(function(){gx.html.onTypeAvailable(n,t,i)},150)}},processCSS:function(n){if(""!=n){var t=document.createElement("style");t.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(t);t.styleSheet?t.styleSheet.cssText=n:(n=document.createTextNode(n),t.appendChild(n))}},nestedScripts:function(n,r){for(var u=n[0].match(i),f=r,e=0;u;)f=f.replace(u[1],""),e++,u=(n=f.match(t))?n[0].match(i):null;return e},processCode:function(i,u,o,h,c,l,a){var p=i,y=[],g=!1,w=[],b=[],nt=[],v="",tt=[],v=[],k,d,i;if(""!=i){if(void 0===l||l)for(;v;){if(v=i.match(r))(l=v.lastIndex)||(l=v.index+v[0].length),i=i.substring(l);else break;nt.push(v[1])}for(i=p,v=[];v;){if(v=i.match(f))(l=v.lastIndex)||(l=v.index+v[0].length),i=i.substring(l);else break;l=v[1].match(HREF_ELEMENT_ATT_REGEX);idAttr=v[1].match(ID_ELEMENT_ATT_REGEX);l&&!gx.cache.fileLoaded(l[2])&&(b.push({href:l[2],id:idAttr&&2<idAttr.length?idAttr[2]:null}),gx.cache.addRemoteFile(l[2]))}for(i=p,v=[];v;){if(v=i.match(e))(l=v.lastIndex)||(l=v.index+v[0].length),i=i.substring(l);else break;n("head link[rel='shortcut icon'").remove();n(document.head).append(v[0])}for(i=p.replace(INPUT_GXSTATE_REGEX,""),v=[];v;){if(v=i.match(t))p=this.nestedScripts(v,i),0<p&&(v=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+p+"}"),"i"),v=i.match(v)),(l=v.lastIndex)||(l=v.index+v[0].length),i=i.substring(l);else break;void 0!=v[1]&&""!=v[1]?(l=v[1].match(SRC_ELEMENT_ATT_REGEX_1),p=!!v[1].match(s),null==l&&(l=v[1].match(SRC_ELEMENT_ATT_REGEX_2)),l&&!gx.cache.fileLoaded(l[2]))?(k=l[2],gx.lang.emptyObject(l[3])||(k+="?"+l[3]),y.push({url:k,isExternal:p,callback:p?void 0:function(n){return function(){gx.cache.addRemoteFile(n)}}(l[2],p)})):l&&gx.cache.fileLoaded(l[2])?g=!0:!l&&v[2]&&w.push(v[2]):v[2]&&w.push(v[2])}if(!0!=u){if(v=w.join(";"),""!=v&&gx.lang.doEval(v),"function"==typeof o)gx.http.loadScripts(y,function(n,t){t instanceof Array?n.apply(this,t):n()}.closure(this,[o,h]),void 0,a);else for(u={method:"GET",useCash:!0},u.load=function(n,t){gx.lang.supEval(this,tt.push(t))}.closure(this),u.mimetype="text/plain",u.sync=!0,d=y.length,i=0;i<d;i++)u.url=y[i].url,gx.http.doCall(u);for(v=tt.join(""),""!=v&&gx.lang.doEval(v),y=document.getElementsByTagName("style"),scrQty=b.length,i=0;i<scrQty;i++){for(u=!1,a=y.length,w=0;w<a;w++)y[i]&&b[i].href==(y[w].styleSheet&&y[w].styleSheet.cssText?y[w].styleSheet.cssText:y[w].innerHTML)&&(u=!0);u||((u=gx.dom.byId(b[i].id))?u.href=b[i].href:gx.http.loadStyle(b[i].href,gx.emptyFn,!1,b[i].id))}if(v=nt.join(""),gx.html.processCSS(v),0==d&&"function"==typeof o)if(g&&c)gx.html.onTypeAvailable(c,o,h);else h instanceof Array?o.apply(this,h):o()}}},getFieldLabel:function(t,i){var r,f=t.id,u=t.previousSibling;if(u&&"LABEL"===u.tagName&&u.htmlFor===f)labelEl=u;else if("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName?r=t.id:"SPAN"==t.tagName?(r=n(t).attr("data-gx-enabled-id"),!r&&0===f.indexOf("span_")&&(r=f.substring(5))):gx.dom.hasClass(t,gx.uc.gxCssClass)&&(r=gx.uc.CtrlId(t.id)),gx.dom.hasClass(t,gx.html.multimediaUpload.gxCssClass)&&(r=gx.html.multimediaUpload.CtrlId(t.id)),r)return n("label[for='"+r+"']",i).get(0)},multimediaUpload:{gxCssClass:"gx-multimedia-upload",getInputFileEl:function(t){return n("#"+t+"[type='file']")[0]},CtrlId:function(n){return n.replace(/_ct$/,"")},resolveFileName:function(n,t){return n||t||""},onOptionChange:function(n){var n=this.getElements(n),t=n.fileField,i=n.uriField;n.uriOption.checked?(gx.dom.removeClass(t,"field-selected"),gx.dom.addClass(i,"field-selected")):(gx.dom.removeClass(i,"field-selected"),gx.dom.addClass(t,"field-selected"))},imageLoadHandler:function(t,i){var r=function(n){var t="IMG"==n.tagName?"src":"href";return!n[t]||n[t]==document.location.href||"/"==n[t].charAt(n[t].length-1)};if(gx.dom.removeClass(i,"gx-multimedia-unknown"),gx.dom.removeClass(i,"gx-multimedia-download"),!t||r(t)?gx.dom.addClass(i,"gx-multimedia-empty"):gx.dom.removeClass(i,"gx-multimedia-empty"),r(t)&&i&&!r(i)&&(gx.dom.removeClass(i,"gx-multimedia-empty"),("IMG"!==t.tagName||r(t))&&gx.dom.addClass(i,"gx-multimedia-download")),gx.util.browser.isIE()&&t&&"IMG"==t.tagName){var r=n(t),u=parseInt(r.css("maxWidth")),f=parseInt(r.css("maxHeight"));u<t.width&&(r.css("height",gx.dom.addUnits(u*t.height/t.width)),r.css("width",gx.dom.addUnits(u)));f<t.height&&(r.css("width",gx.dom.addUnits(f*t.width/t.height)),r.css("height",gx.dom.addUnits(f)))}},dialogCloseHandler:function(n,t){var i=this.getElements(n);t.style.display="none";n.appendChild(t);i.uriOption.checked?this.refreshPreviewImg(n,i.uriField):this.refreshPreviewImg(n,i.fileField);i.action.focus();gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler)},prevImgClickHandler:function(t,i){var t=t||event,r=gx.evt.source(t);0<n(r).closest(".gx-multimedia-empty").length&&this.actionClickHandler(t,i)},actionClickHandler:function(t,i){var u=gx.html.multimediaUpload.isModal,t=t||event,r,f;t.preventDefault?t.preventDefault():t.returnValue=!1;r=this.getElements(i);f=r.button;r.fieldsCt.style.display="block";var e=130,o=500,s=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(i.style.position="static",r.fileField.style.marginTop="0",r.uriField.style.marginTop="0",e=230);gx.runtimeTemplates&&(s=!1,n(window).width()<o&&(o=n(window).width()-20,e=170));u=gx.popup.openDialog({parentElement:i,w:o,h:e,contentHtml:r.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:s,isModal:void 0===u||u,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[i,r.fieldsCt,f])}});r.fileOption.focus();gx.evt.attach(f,"click",u.close,u,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(n,t){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1;var i=this.getElements(t);i.uriField.value="";i.fileField.value="";i.uriOption.checked=!1;i.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[t]);this.clearPreviewImg(t);this.imageLoadHandler(i.previewImg,i.previewLink)},keypressHandler:function(n){13==n.event.keyCode&&(n.cancel=!0,gx.popup.currentPopup.close())},tapHandler:function(n){this.getElements(n).action.focus()},getElements:function(t){var t=gx.dom.byId(t),i=n(t),t=i.find(".change-action")[0],u=i.find(".clear-action")[0],f=null,r=n(u).next()[0],i=i.find(".fields-ct");return"A"==r.tagName?(f=r,r=r.firstChild):"IMG"!=r.tagName&&(r=null),{previewLink:f,action:t,clearAction:u,previewImg:r,fieldsCt:i[0],uriField:i.find("input[type='text']")[0],fileField:i.find("input[type='file']")[0],uriOption:i.find("input[type='radio'][value='uri']")[0],fileOption:i.find("input[type='radio'][value='file']")[0],button:i.find("input[type='button']")[0]}},getContainer:function(n){for(n=gx.dom.byId(n);n;){if(gx.dom.hasClass(n,gx.html.multimediaUpload.gxCssClass))return n;n=n.parentNode}return null},setPreviewImage:function(n,t){var n=gx.dom.byId(n),i=this.getElements(n);0>gx.util.Url.parseWithAnchor(t).protocol.search(/^https?:/)&&i.uriOption.checked||(this.clearPreviewImg(n),i.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(t),"image")&&("IMG"==i.previewImg.tagName&&(i.previewImg.src=t),this.imageLoadHandler(i.previewImg,i.previewLink)))},setPreviewLink:function(n,t){var n=gx.dom.byId(n),i=this.getElements(n);i.previewLink&&t&&i.previewLink&&(i.previewLink.href=t);this.imageLoadHandler(i.previewImg,i.previewLink)},clearPreviewImg:function(n){n=gx.dom.byId(n);(n=this.getElements(n))&&n.previewImg&&n.previewLink&&(n.previewImg.src="",n.previewLink.href="")},refreshPreviewImg:function(n,t){var n=gx.dom.byId(n),i=this.getElements(n),r,u;if(i.previewImg&&"INPUT"==t.tagName){if(t==i.fileField){if(t.files&&(r=t.files[0]))if(r.type.match(/image.*/))u=new FileReader,u.onload=function(n,t,i){t.src=n.target.result;i.href=n.target.result}.closure(this,[i.previewImg,i.previewLink],!0),u.readAsDataURL(r);else{i.previewLink.href="#";i.previewLink.className="gx-multimedia-download";this.clearPreviewImg(n);return}t.gxctrldeleted&&this.clearPreviewImg(n)}else t==i.uriField&&(i.previewImg.src=t.value,i.previewLink.href=t.value);this.imageLoadHandler(i.previewImg,i.previewLink)}},setType:function(n,t){var n=gx.dom.byId(n),i=this.getElements(n);i.fileOption.checked=t;i.uriOption.checked=!t;t&&(i.uriField.value="");this.onOptionChange(n)},getOptionValue:function(n){return n=gx.dom.byId(n),this.getElements(n).fileOption.checked?"file":"uri"},createControl:function(n){var t,i,r;n=gx.dom.byId(n);n._created||(n._created=!0,t=this.getElements(n),gx.dom.addClass(t.fileField,"field-selected"),t.action.setAttribute("gxfocusable","1"),i=document.createElement("input"),i.type="button",i.className="BtnEnter",i.value=gx.getMessage("GXM_uploadconfirmoption"),t.fieldsCt.appendChild(i),i=this.imageLoadHandler.closure(this,[t.previewImg,t.previewLink]),r=this.onOptionChange.closure(this,[n]),i(),t.previewImg&&gx.evt.attach(t.previewImg,"load",i),r(),gx.evt.attach(t.uriOption,"click",r),gx.evt.attach(t.fileOption,"click",r),gx.evt.attach(t.action,"click",this.actionClickHandler.closure(this,[n],!0)),gx.evt.attach(t.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,[n],!0)),gx.evt.attach(t.clearAction,"click",this.clearActionHandler.closure(this,[n],!0)),gx.evt.attach(n,"touchstart",this.tapHandler.closure(this,[n])))}},controls:function(){var r={},t={label:'<label class="gx-label {{className}} control-label" {{{additionalAtts}}} for="{{relatedElement}}">{{caption}}<\/label>',radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}<\/label>',"{{/values}}","<\/span>"]},i=function(n,i){var u=gx.lang.isArray(t[n])?t[n].join(""):t[n];return r[n]||(r[n]=!0,Mustache.parse(u)),Mustache.render(u,i)},u=/\"/g;return{applyTemplate:i,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,formGroup:28,formGroupEnd:29},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(n){return"combo"==n||"dyncombo"==n||"listbx"==n||"dynlistbx"==n?!0:!1},eventJSCode:function(n,t,i,r,u){var f="";return 4==n&&i?f=i:1==n?f="gx.fn.closeWindow();":7==n?(n="",r&&u&&(n=",'"+r.gridName+"','"+u.gxId+"'"),f="gx.evt.execCliEvt( "+t+n+",this);"):(6==n||5==n)&&(f="gx.evt.execEvt("+t+",this,"+r.gridId+");"),f},onJsEventAttributes:function(n,t,i){var u=gx.GxObject,r=" "+u.GX_EVENT_DATA_ATTR+'="'+n+'"';return scriptAttribute="",4===n&&(scriptAttribute=" "+u.GX_EVENT_CODE_DATA_ATTR+'="'+n+'"'),i?r=t?r+(" "+u.GX_EVENT_CONDITION_DATA_ATTR+'="'+i+'"'+scriptAttribute):r+scriptAttribute:t&&(r+=scriptAttribute),r+" "},startAnchor:function(n,t,i,r,u,f,e){e=e?' class="'+e+'"':"";t=this.onJsEventAttributes(t,i,r);r?n.append('<a href="#"'+t+e+">"):i?n.append('<a href="#"'+t+e+">"):u&&(i=u.replace(/(\\")/ig,"\\u0022"),n.append('<a href="'+i+'"'),""!=f&&n.append(' target="'+f+'"'),n.append(e+">"))},endAnchor:function(n,t,i,r){(t||i||r)&&n.append("<\/a>")},onJSEvent_impl:function(n,t,i){var r=[];return""!=i&&r.push('jsevent="'+i+'" '),r.push(n+'="if( '),""!=t?r.push("gx.evt.jsEvent(this)) {"+t+'} else return false;"'):r.push('!gx.evt.jsEvent(this)) return false;"'),r.join("")},onJSEvent:function(n,t,i,r){n.append(" ");n.append(this.onJSEvent_impl(t,i,r))},htmlControl:function(n,t,i,r,f){this.id=n||"";this.width=t||0;this.widthUnit="px";this.height=i||0;this.heightUnit="px";this.cssClass=r||"";this.style=this.ownCssClass=this.roClass="";this.title=f||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){return this.buffer.clear(),this._getHtml(),this.buffer.toString()};this.append=function(n){return this.buffer.append(n)};this.tagAtt=function(n,t){return t=t.toString(),t=0<=t.indexOf('"')?t.replace(u,"&quot;"):t,this.buffer.append(" "+n+'="'+t+'"')};this.persistValue=function(){var n=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&n&&(this._persistValue?this._persistValue():n.v2v&&n.v2v(this.value))};this.setIndividualProp=function(n,t){this[n]="enabled"==n||"visible"==n||"isPassword"==n||"autoComplete"==n||"hasJsLink"==n?gx.lang.gxBoolean(t):t};this.setGridData=function(n){this.grid=n.grid;this.row=n.row;this.gridId=n.gridId;this.gridRow=n.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var n=this.grid.parentObject;return gx.json.serializeJson([n.CmpContext,n.IsMasterPage])}},singleLineEdit:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt){this.id=n;this.inputType=k;this.step=d;this.title=e;this.placeholder=o;this.width=g;this.widthUnit=nt;this.height=17==tt?0:tt;this.heightUnit=it;this.maxLength=rt;this.visible=0!=p;this.enabled=0!=w;this.rtEnabled=0!=b;this.isPassword=0!=ut;this.format=ft;this.link=u;this.linkTarget=f;this.style=l;this.cssClass=c;this.roClass=a;this.columnClass=v;this.columnHeaderClass=y;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);vt&&(this.rtEnabled||this.enabled)&&(t=pt);this.formattedValue=""===pt?"":gx.lang.emptyObject(t)?gx.applyPicture(this.vStruct,gx.html.encodeCaseFormat(pt||"",ft)):gx.html.encodeCaseFormat(t,ft);this.extraAttributes=i;this.jsScrCode=h;this.usrOnclick=s;this.eventName=r;this.parentId=et;this.hasTheme=ot;this.autoComplete=0!=st;this.autoCorrection=0!=ht;this.value=pt||"";this.domainName=lt;this.rtPicture=yt};this._getHtml=function(){var n="",r="",i=this.getVStruct(),t;if(0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr"),0<this.width&&("chr"==this.widthUnit?n=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";"),0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";"),r=this.style,this.style+=this.visible?"":";display:none;",(this.rtEnabled||this.enabled)&&((this.dataType==gx.types.date||this.dataType==gx.types.dateTime)&&(this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">")),this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"<\/label>"),this.append("<input"),!0==this.isPassword?this.tagAtt("type","password"):(this.tagAtt("type",this.inputType),this.step&&("number"==this.inputType||"range"==this.inputType)&&(this.tagAtt("step",this.step),t=Math.pow(10,this.maxLength)-1,this.tagAtt("min",-1*t),this.tagAtt("max",t),"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"')),this.dataType==gx.types.geolocation&&(this.extraAttributes+=" data-gx-geolocation")),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue),this.append(n),""!=this.title&&this.tagAtt("title",this.title),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.autoComplete||this.tagAtt("autocomplete","off"),this.tagAtt("spellcheck",this.autoCorrection.toString()),"date"!=this.inputType&&"datetime"!=this.inputType&&"datetime-local"!=this.inputType&&this.tagAtt("maxlength",this.maxLength),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.rtPicture&&this.tagAtt("data-gx-rt-picture",this.rtPicture),n=this.style,""!=this.column.align&&(n+=";text-align:"+this.column.align),t=!this.enabled&&this.rtEnabled?";display:none;":"",n+=t,""!=n&&this.tagAtt("style",n),this.append(this.extraAttributes),gx.fn.controlFiresEvent(i)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext())),this.append(">"),this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(n=this.grid.parentObject.getValidStructFld(this.id),void 0!=n.dp&&(0==n.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),t=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+t),this.append(">")),this.append("<\/div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)),!this.enabled){if(t="",this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==gx.types.date||this.dataType==gx.types.dateTime?this.formattedValue:this.value),t=this.hasTheme?0==this.parentId?""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass:""!=this.roClass&&0!=this.roClass.indexOf("Readonly")?"Readonly"+this.roClass:this.roClass:this.cssClass,n="",this.format!=gx.html.controls.formats.RAW_HTML&&(gx.runtimeTemplates&&this.append('<p class="form-control-static">'),r+=this.visible?"":";display:none;",this.append("<span"),gx.runtimeTemplates&&this.append(" data-gx-tpl-applied-readonly-atts-vars"),this.append(this.extraAttributes),""!=t&&this.tagAtt("class",t),""!=r&&this.tagAtt("style",r),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),gx.fn.controlFiresEvent(i)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,i.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"),n=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,n,this.usrOnclick,this.link,this.linkTarget)),this.isPassword)for(r=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength),i=0;i<r;i++)this.append("*");else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,n,this.usrOnclick,this.link),this.append("<\/span>"),gx.runtimeTemplates&&this.append("<\/p>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){this.id=n;this.visible=0!=u;this.enabled=0!=f;this.rtEnabled=0!=e;this.width=o;this.widthUnit=s;this.height=h;this.heightUnit=c;this.style=l;this.cssClass=a;this.columnClass=v;this.columnHeaderClass=y;this.maxLength=p;this.extraAttributes=i;this.autoresize=0!=w;this.format=r;this.link=t;this.linkTarget=k;this.placeholder=d;this.value=ut||"";this.autoCorrection=0!=g;this.domainName=tt;this.maxTextLines=b;this.jsScrCode=rt};this._getHtml=function(){var n=this.getVStruct(),t;this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";(this.rtEnabled||this.enabled)&&(this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"<\/label>"),this.append("<textarea"),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(gx.html.encodeCaseFormat(this.value,gx.html.controls.formats.TEXT,!1)),this.append("<\/textarea>"));this.enabled||(t=this.visible?"":"display:none;",this.autoresize||(t+='overflow="hidden";'),this.rtEnabled||this.grid.addHiddenControl(this.id,this.value),""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(this.cssClass="Readonly"+this.cssClass),this.append("<span "),this.append(this.extraAttributes),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=t&&this.tagAtt("style",t),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),n.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,n.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"),gx.html.controls.startAnchor(this,this.jsScrCode,!!n.evt,"",this.link,this.linkTarget),this.append(gx.html.encodeCaseFormat(this.value,this.format,!0)),gx.html.controls.endAnchor(this,!!n.evt,"",this.link),gx.html.controls.specificDomainCtrls(this),this.append("<\/span>"))}},blob:function(n,t,i,r,u,f,e){this.base(n,t,i,r,u);this.type=gx.html.controls.types.blob;this.display=f||0;this.contentType=e||"text/html";this.parameters=this.url="";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){this.id=n;this.value=t;this.contentType=i||"text/html";this.linkTarget=u;this.parameters=f;this.display=e;this.visible=0!=s;this.enabled=0!=o;this.alt=h;this.title=c;this.borderWidth=l;this.autoresize=0!=a;this.width=v;this.widthUnit=y;this.height=p;this.heightUnit=w;this.vSpace=b;this.hSpace=k;this.jsScrCode=d;this.usrOnclick=g;this.eventName=nt;this.style=tt;this.cssClass=it;this.columnClass=rt;this.columnHeaderClass=ut;this.extraAttributes=ft;this.extraDisplayAttributes=et;this.jsDynCode=ot;this.url=gx.util.resolveUrl(st)};this._getHtml=function(){var n="",t,i;this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");t=-1!=this.contentType.toLowerCase().indexOf("image/");0==this.display?(t?(this.append("<img"),this.tagAtt("alt",this.alt),(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))&&(this.url=gx.ajax.getImageUrl(gx,"blankImage")),this.tagAtt("src",this.url)):(this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url)),this.tagAtt("id","Object_"+this.id),this.style+="display:block;",0==this.width||this.autoresize||(this.style=this.style+"width:"+this.width+this.widthUnit+";"),0==this.height||this.autoresize||(this.style=this.style+"height:"+this.height+this.heightUnit+";"),this.tagAtt("style",this.style),n=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass,this.enabled||""==this.cssClass||0==this.cssClass.indexOf("Readonly")||(n="Readonly"+n),this.tagAtt("class",n),this.append(this.extraDisplayAttributes),this.append(">"),t?this.append("<\/img>"):(this.append(this.parameters),this.append("<\/object>"))):1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("><\/a>"));this.append("<\/div><div>");this.enabled&&(i="",gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data"),n=gx.dom.byId(this.id),this.grid&&this.grid.parentObject.isTransaction()&&n&&this.value===n.value?(t=this.id+"_hook",this.append("<div"),this.tagAtt("id",t),this.append(">"),this.append("<\/div>"),this.grid.addControlToReuse({el:n,hookId:t})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(i+="display:none;"),0!=this.width&&(i=i+"width:"+this.width+";"),this.tagAtt("style",i),this.tagAtt("value",this.value),n=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(n="Readonly"+n),this.tagAtt("class",n),t&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">")));this.append("<\/div><\/div>")}},radio:function(t,r,u,f,e){this.base(t,r,u,f,e);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.possibleValues=n.v||[];this.id=t;this.title=i;this.visible=0!=r;this.enabled=0!=u;this.columns=f;this.orientation=e;this.style=o;this.cssClass=s;this.columnClass=h;this.columnHeaderClass=c;this.jsScrCode=l;this.usrOnclick=a;this.eventName=v;this.extraAttributes=y;this.value=p};this._getHtml=function(){var t,r;this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));t=[];!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?t.push("Readonly"+this.cssClass):t.push(this.cssClass);t.push("gx-radio-button");1==this.orientation&&t.push("gx-radio-button-vertical");t=t.join(" ");r=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(i("radio",{id:this.id,className:t,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",r,this.usrOnclick),values:n.map(this.possibleValues,function(n,t){return{itemId:this.id+"_"+t,itemValue:n[0],itemDesc:n[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(n[0].toString())}}.closure(this))}))}},comboBox:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){this.possibleValues=n.v||[];this.id=t;this.title=o;this.visible=0!=s;this.enabled=0!=h;this.rtEnabled=0!=c;this.rows=i;this.format=l;this.width=a;this.widthUnit=v;this.height=y;this.heightUnit=p;this.style=w;this.cssClass=b;this.columnClass=k;this.columnHeaderClass=d;this.formattedValue=nt;this.jsScrCode=u;this.usrOnclick=r;this.eventName=f;this.extraAttributes=g;this.value=it;this.rawValue=n};this._getHtml=function(){var r,u,n,t,i;if(this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString())),0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit),0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit),r=this.style+" ;overflow:hidden;",u=this.enabled||this.rtEnabled,this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"",u){n=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",n,this.usrOnclick);for(this.append(">"),n=this.possibleValues.length,t=0;t<n;t++)i=this.possibleValues[t],this.append("<option"),this.tagAtt("value",i[0]),gx.text.trim(i[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected"),this.append(">"),this.append(i[1]),this.append("<\/option>");this.append("<\/select>")}if(!this.enabled){for(this.rtEnabled||this.grid.addHiddenControl(this.id,this.value),n="",n=""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass,r+=this.visible?"":";display:none;",this.append("<span "),this.tagAtt("id","span_"+this.id),""!=this.title&&this.tagAtt("title",this.title),""!=n&&this.tagAtt("class",n),""!=r&&this.tagAtt("style",r),u||this.tagAtt(gx.GxObject.GX_DATA_RAW_VALUE_ATTR,gx.json.serializeJson(this.rawValue)),this.append(this.extraAttributes),this.append(">"),n=this.possibleValues.length,t=0;t<n;t++)if(i=this.possibleValues[t],gx.text.trim(i[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(i[1]);break}this.append("<\/span>")}}},listBox:function(n,t,i,r,u,f){this.base(n,t,i,r,u);this.type=gx.html.controls.types.listBox;this.rows=f},checkBox:function(n,t,i,r,u,f,e,o){this.base(n,t,i,r,u);this.type=gx.html.controls.types.checkBox;this.caption=f||"";this.checkedValue=e;this.uncheckedValue=o;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a){this.id=n;this.title=t;this.visible=0!=r;this.enabled=0!=u;this.checkedValue=f;this.caption=e;this.style=o;this.cssClass=s;this.columnClass=h;this.columnHeaderClass=c;this.extraAttributes=l;this.value=a;this.labelCaption=i};this._getHtml=function(){var t=this.getVStruct(),n;this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));n=this.cssClass;this.enabled||""==this.cssClass||0==this.cssClass.indexOf("Readonly")||(n="Readonly"+this.cssClass);this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=n&&this.tagAtt("class",n);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.fn.controlFiresEvent(t)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("<\/label>")}},imageReadOnly:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){this.id=n;this.accessKey=r;this.visible=0!=f;this.enabled=0!=e;this.alt=o;this.title=s;this.borderWidth=h;this.autoresize=0!=c;this.width=l;this.widthUnit=a;this.height=v;this.heightUnit=y;this.vSpace=p;this.hSpace=w;this.link=t;this.linkTarget=i;this.jsScrCode=b;this.usrOnclick=k;this.eventName=d;this.style=g;this.cssClass=nt;this.columnClass=tt;this.columnHeaderClass=it;this.align=rt;this.extraAttributes=ut;this.useMap=ft;this.jsDynCode=et;this.imgSrcSet=ot;this.value=this.imageUrl=st};this._getHtml=function(){var t=this.getVStruct(),n;this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));n=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=n&&(this.accessKey=n);this.style+=this.visible?"":";display:none;";n=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,this.jsScrCode,n,this.usrOnclick,this.link,this.linkTarget,"gx-image-link");this.append("<img");this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);(""==this.cssClass||0<this.borderWidth)&&(this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+this.borderWidth));this.tagAtt("alt",this.alt||this.title);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);t.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&""!=this.link&&""==n&&gx.html.controls.endAnchor(this,n,this.usrOnclick,this.link)};this._persistValue=function(){var n=this.getVStruct();n.v2v&&n.v2v(this.imageUrl)}},multimedia:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.multimedia;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){this.id=n;this.text=t;this.display=0!=i;this.visible=0!=r;this.enabled=0!=u;this.autoresize=0!=f;this.width=e;this.widthUnit=o;this.height=s;this.heightUnit=h;this.jsScrCode=c;this.usrOnclick=l;this.eventName=a;this.style=v;this.cssClass=y;this.columnClass=p;this.columnHeaderClass=w;this.extraInputAttributes=b;this.jsDynCode=d;this.readOnly=0!=g;this.isBlob=gx.lang.gxBoolean(nt);this.multimediaUrl=tt;this.value=gx.util.resolveUrl(tt)};this.startMultimediaUploadControl=function(n,t,i,r){return['<div id="',n,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(r||"")+(t?"":"display:none;"),'">'].join("")};this.endMultimediaUploadControl=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){return i=[],r=gx.html.multimediaUpload.getInputFileEl(this.id),u="checked",f="",e=n.match(/([\w]+)(_\d{4})$/),e=e[1]+"_GXI"+e[2],(y||void 0===y)&&(u="",f="checked",t=""),y=['<div id="',n,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',n,'Option" type="radio" value="file" ',f,"/>",gx.getMessage("GXM_uploadfileoption"),"<\/label>",'<label class="option">','<input name="',n,'Option" type="radio" value="uri" ',u,"/>",gx.getMessage("GXM_uploadurioption"),"<\/label>",'<input type="text" class="field ',c,'" id="',e,'" name="',e,'" value="',t,'" ',a," />"],i.push(y.join("")),y=r?['<div id="',n,'_hook"><\/div>']:['<input type="file" class="field ',c,'" id="',n,'" name="',n,'" accept="',p,'" ',a,"/>"],i.push(y.join("")),y=["<\/div>","<\/div>"],i.push(y.join("")),i.join("")};this.getPreviewHtml=function(){var t=this.cssClass?"Readonly"+this.cssClass:"",n=this.value,i=n?' href="'+n+'"':"",r=this.readOnly||!this.enabled,u=r?this.id:"",f="",f=gx.text.startsWith(gx.util.getContentTypeFromExt(n),"image")||!r&&""===n?["<a",' class="'," gx-multimedia-ro",'"',' target ="_blank"',i,">",'<img id = "Object_',this.id,'" class = "',t,'" alt = "',this.alt,'" src = "',n,'" />','<span id="',u,'" class="',this.placeHolderClass,'"><\/span>',"<\/a>"]:["<a",n?" download":"",' class="'," gx-multimedia-ro",'"',' target = "_blank"',i,">",'<span id = "',u,'" class = "',t," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),'"><\/span>',"<\/a>"];return f.join("")};this._getHtml=function(){if(!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"<\/a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"><\/a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl),this.append(this.getPreviewHtml()),!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var n=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&n&&this.grid.addControlToReuse({el:n,hookId:this.id+"_hook"})}};this._persistValue=function(){var n=this.getVStruct();n.v2v&&n.v2v(this.multimediaUrl)}},image:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at){this.id=n;this.accessKey=r;this.visible=0!=f;this.enabled=0!=e;this.alt=o;this.title=s;this.borderWidth=h;this.autoresize=0!=c;this.width=l;this.widthUnit=a;this.height=v;this.heightUnit=y;this.vSpace=p;this.hSpace=w;this.link=t;this.linkTarget=i;this.jsScrCode=b;this.usrOnclick=k;this.eventName=d;this.style=g;this.cssClass=nt;this.columnClass=tt;this.columnHeaderClass=it;this.align=rt;this.extraInputAttributes=ut;this.extraImageAttributes=ft;this.useMap=et;this.jsDynCode=ot;this.readOnly=0!=st;this.isBlob=gx.lang.gxBoolean(ht);this.isAttribute=gx.lang.gxBoolean(ct);this.imgSrcSet=lt;this.multimediaUrl=at;this.value=gx.util.resolveUrl(at);this.themeName=u;this.className=ct&&nt?"Readonly"+nt:nt;n=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(n);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.value)};this.getPreviewHtml=function(){return['<a target="_blank" class="gx-multimedia-ro"><img id="Object_',this.id,'" class="',this.cssClass?"Readonly"+this.cssClass:"",'" alt="',this.alt,'" src="',this.value,'" /><span class="',this.placeHolderClass,'"><\/span><\/a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"<\/a>");this.append('<a gxfocusable="1" href="" class="action clear-action"><\/a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var n=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&n&&this.grid.addControlToReuse({el:n,hookId:this.id+"_hook"})}}},video:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},file:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.textBlock;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){this.id=n;this.visible=0!=h;this.enabled=0!=c;this.rtEnabled=0!=l;this.format=a;this.title=s;this.link=t;this.linkTarget=i;this.jsScrCode=o;this.usrOnclick=r;this.eventName=u;this.extraAttributes=f;this.cssClass=e;this.value=gx.text.replaceAll(v,"�","'")};this._getHtml=function(){var n,t=this.getVStruct(),i=this.enabled||this.rtEnabled;this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(n=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(n=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",this.id),this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled"),""!=this.cssClass&&this.tagAtt("class",this.cssClass),this.tagAtt("data-gxformat",this.format),""!=n&&this.tagAtt("style",n),""!=this.title&&this.tagAtt("title",this.title),gx.fn.controlFiresEvent(t)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"));n="";i?(n=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,n,this.usrOnclick,this.link,this.linkTarget)):n="";this.append(gx.html.encodeCaseFormat(this.value,this.format));i&&gx.html.controls.endAnchor(this,n,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("<\/div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("<\/span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1)}},label:function(n,t,r,u,f){this.base(n,t,r,u,f);this.type=gx.html.controls.types.label;this.setProperties=function(n,t,i,r,u,f){this.referencedEl=n;this.labelCaption=t;this.labelClass=i;this.extraStyle=f;this.addAttributes=[0===r?"data-gx-sr-only":"",this.extraStyle?'style="'+this.extraStyle+'"':""].join(" ")};this._getHtml=function(){this.append(i("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},button:function(n,t,i,r,u,f){this.base(n,t,i,r,u);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=f||"rounded";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.reset=y;this.id=n;this.title=u;this.accessKey=f;this.style=e;this.cssClass=o;this.visible=0!=s;this.enabled=0!=h;this.buttonStyle=c;this.jsScrCode=r;this.usrOnclick=i;this.eventName=l+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=a;this.jsCode=t;this.jsDynCode=v;this.caption=p};this._getHtml=function(){var t=this.getVStruct(),n;this.style+=this.visible?"":";display:none;";n="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",n),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");n="button";1==this.reset?n="submit":0==this.reset&&(n="reset");this.tagAtt("type",n);n=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==n&&(n=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=n&&(this.accessKey=n);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||this.append(" disabled");this.append(gx.html.controls.onJsEventAttributes(this.jsScrCode,this.jsCode,this.usrOnclick));this.append(this.extraAttributes);gx.fn.controlFiresEvent(t)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");"rounded"==this.buttonStyle&&this.append("<\/span><\/span><\/span><\/span>")}},grid:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(n){this.containerName=n;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("><\/div>")}},userControl:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(n,t){this.id=this.containerName=n;this.visible=0!=t};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("><\/div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(n,t){this.parentName=n;this.containerName=t;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(n){var f,u;this.controlName=n;var i=this.grid.parentObject.getComponentData(this.controlName),n=i.Prefix,t=this.grid.gxComponentContext+"gxHTMLWrp"+n+this.gridRow,r=gx.dom.byId(t),f="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+n+this.gridRow);null!=r?(i=t+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:i,el:t,p:this.grid.gxComponentContext+n+this.gridRow}),t=i):gx.lang.emptyObject(gx.csv.lastEvtResponse)||gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents)||((r=gx.csv.lastEvtResponse.gxComponents[t],gx.lang.emptyObject(r))?f="":(f=gx.html.cleanHtmlRefs(r),u=gx.fn.getHidden(this.grid.gxComponentContext+n+this.gridRow),u||(u=i.GXClass),gx.lang.emptyObject(u)||this.grid.addComponentToDraw({load:!0,n:u.toLowerCase(),p:this.grid.gxComponentContext+n+this.gridRow,c:r})));this.id=t;this.content=f};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("<\/div>")}},embeddedPage:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c){this.id=n;this.value=t;this.visible=0!=i;this.width=r;this.widthUnit=u;this.height=f;this.heightUnit=e;this.borderStyle=o;this.align=s;this.title=h;this.scrollbars=c};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("<\/iframe>")}},table:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){this.id=n;this.visible=0!=t;this.cssClass=i;this.background=r;this.backColor=u;this.borderColor=f;this.align=e;this.title=o;this.borderWidth=s;this.cellPadding=h;this.cellSpacing=c;this.height=l;this.width=a;this.rules=v;this.heightUnit=y;this.widthUnit=p;this.style="";this.header=w};this._getHtml=function(){var t=this.getVStruct(),n;this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");""!=this.backColor&&(n=parseInt(this.backColor),n=isNaN(n)?this.backColor:gx.color.html(n).Html,this.style=this.style+"background-color: "+n+";");""!=this.borderColor&&(n=parseInt(this.borderColor),n=isNaN(n)?this.borderColor:gx.color.html(n).Html,this.style=this.style+"border-color: "+n+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);t.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");""!=this.header&&(this.append("<caption>"),this.append(this.header),this.append("<\/caption>"))}},row:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(n,t,i){t&&(this.cssClass=this.ownCssClass?t+(this.ownCssClass?" "+this.ownCssClass:""):t);this.style=i};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.cell;this.className=this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=function(n,t,i){this.background=n;this.cssClass=i;t&&""!=t&&0<t.indexOf("style=")&&(this.style=t.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(n,t,i,r,u){this.base(n,t,i,r,u);this._getHtml=function(){this.append("<div");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(n,t,i,r,u){this.base(n,t,i,r,u);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(n,t,i,r,u,f,e,o,s){this.id=n;this.caption=t;this.visible=0!=i;this.width=r;this.widthUnit=u;this.height=f;this.heightUnit=e;this.cssClass=o;this.extraAtts=s};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var n="-moz-border-radius:3pt;";"0"!=this.width&&(n+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(n+="height: "+this.height+this.heightUnit+";");this.visible||(n+="display:none;");this.tagAtt("style",n);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("<\/legend>")}},div:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.div;this.setProperties=function(n,t,i,r,u,f,e,o,s,h,c){this.id=n;this.visible=0!=t;this.width=i;this.widthUnit=r;this.height=u;this.heightUnit=f;this.cssClass=e;this.align=o;this.vAlign=s;this.extraAtts=h;this.extraStyle=c};this._getHtml=function(){var t=this.getVStruct(),i=this.align&&"left"!=this.align.toLowerCase(),r=this.vAlign&&"top"!=this.vAlign.toLowerCase(),n=this.visible?"":";display:none;";""!=this.height&&(n=n+"height: "+this.height+this.heightUnit+";");""!=this.width&&(n=n+"width: "+this.width+this.widthUnit+";");n+=this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=n&&this.tagAtt("style",n);""!=this.extraAtts&&this.append(this.extraAtts);i&&this.tagAtt("data-align",this.align.toLowerCase());r&&this.tagAtt("data-valign",this.vAlign.toLowerCase());gx.fn.controlFiresEvent(t)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,t.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");(i||r)&&this.append('<div data-align-outer=""><div data-align-inner="">')}},divEnd:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.divEnd;this.setProperties=function(n,t){this.align=n;this.vAlign=t};this._getHtml=function(){var n=this.align&&"left"!=this.align.toLowerCase(),t=this.vAlign&&"top"!=this.vAlign.toLowerCase();(n||t)&&this.append("<\/div><\/div>");this.append("<\/div>")}},formGroup:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.formGroup;this.setProperties=function(n){this.captionPosition=n};this._getHtml=function(){1===this.captionPosition&&this.append('<div class="form-group gx-form-group">')}},formGroupEnd:function(n,t,i,r,u){this.base(n,t,i,r,u);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(n){this.captionPosition=n};this._getHtml=function(){1===this.captionPosition&&this.append("<\/div>")}},specificDomainCtrls:function(n){if(n.domainName==gx.domains.component&&0==n.enabled){var t=n.enabled?";display:none;":"",i=n.id+"_comp_trigger",r=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);n.append("<img");n.tagAtt("src",r);n.tagAtt("id",i);n.tagAtt("class","");n.tagAtt("style",t+" margin-left:2px; cursor:pointer;");n.tagAtt("onclick","gx.popup.openUrl('"+n.value+"')");n.append("/>");t=[];t.push(n.column.gxId)}else n.dataType==gx.types.geolocation&&(t=n.enabled?"":";display:none;",i=n.id+"_geoLocMe",n.append("<img"),n.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),n.tagAtt("id",i),n.tagAtt("class","GeoLocOption"),n.tagAtt("style",t),n.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),n.append(">"),t=[],t.push(n.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,this.htmlControl)}}}()}}(gx.$);gx.util.Observable=function(){return{observers:[],initialObservers:[],addObserver:function(){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(n,t,i,r){r=r||{};(!1===r.unique||0>this.indexOf(n,t,i))&&(this.observers.push({e:n,o:t,f:i,cfg:r}),!0===r.doNotDelete&&this.initialObservers.push({e:n,o:t,f:i,cfg:r}))},deleteObserver:function(n,t,i){new gx.thread.Mutex(this,this.deleteObserverSync,[n,t,i])},deleteObserverSync:function(n,t,i){n=this.indexOf(n,t,i);0<=n&&this.observers.splice(n,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(n,t,i){for(var u,f=this.observers.length,r=0;r<f;r++)if(u=this.observers[r],u&&u.e==n&&u.o==t&&u.f==i)return r;return-1},notify_count:0,notify:function(n,t,i){var e,f,o,u,r;for(t||(t=[]),e=this.observers.length,this.notify_count+=1,f=[],u=0;u<e;u++)if(r=this.observers[u],r&&r.e==n&&!r.removed)try{r.cfg&&r.cfg.single&&(r.removed=!0);o=r.f.apply(r.o,t);r.cfg&&r.cfg.async&&f.push(o)}catch(s){gx.dbg.logEx(s,"gxfx.js","gx.obs.notify")}gx.$.when.apply($,f).then(function(){if(this.notify_count-=1,0===this.notify_count)for(var n=this.observers.length-1;0<=n;n--)this.observers[n].removed&&this.observers.splice(n,1);i&&i()}.closure(this))}}};gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(n,t){gx.fx.installSuggest(t,!0)})},installSuggest:function(n,t){var r,u,i;if(!t&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[n.id]=n;else try{r=gx.O.getValidStructFld(n.id);r&&!gx.lang.emptyObject(r.gxsgprm)&&(u=0<r.grid?gx.fn.currentGridRowImpl(r.grid):"main",i=r.gxsgprm,i.installed||(i.installed={}),i.installed[u]||(gx.ajax.suggest(gx.O,i[1],n.id,i[0],i[3],i[2]),i.installed[u]=!0,$(n).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(n).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(n).val().length)))}catch(f){gx.dbg.logEx(f,"gxfx.js","installSuggest")}},updateSuggestParms:function(n){var r,t,i;if(n)for(r=n.length,t=0;t<r;t++)i=gx.fn.validStruct(n[t]),i&&"function"==typeof i.c2v&&i.c2v()},firesuggest:function(n,t,i,r){if(this.updateSuggestParms(r),n.textbox.value)return t.requestSuggestions(n.sdtParms,function(){t.values?n.autosuggest(t.values,i):n.hideSuggestions();delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(""===n.textbox.value)gx.evt.onchange_impl(n.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(n,t,i,r,u,f){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=t;this.textbox=n;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=n.onblur);this.ControlRefresh=i;this.typeahead=r;this.suggestParms=u||[];this.sdtParms=f||[];this.requestSuggestions=function(n,t,i){gx.fx.delayedValidation=!0;var r=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(n,t,i,r)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};this.highlightSuggestion=function(n){for(var t,r=this.layer.childNodes.length,i=0;i<r;i++)t=this.layer.childNodes[i],t==n?t.className="current":t.className=="current"&&(t.className="")};this.init=function(){var n=function(n){n||(n=window.event);this.handleKeyUp(n)};gx.evt.attach(this.textbox,"keyup",n.closure(this));gx.evt.attach(this.textbox,"keydown",function(n){n||(n=window.event);this.handleKeyDown(n)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",n.closure(this));this.createDropDown()};this.nextSuggestion=function(){var n=this.layer.childNodes;n.length>0&&(this.cur=this.cur<n.length-1?this.cur+1:0,n=n[this.cur],this.highlightSuggestion(n),this.pickvalue(n.firstChild.nodeValue))};this.previousSuggestion=function(){var n=this.layer.childNodes;n.length>0&&(this.cur=this.cur>0?this.cur-1:n.length-1,n=n[this.cur],this.highlightSuggestion(n),this.pickvalue(n.firstChild.nodeValue))};this.selectRange=function(n,t){if(this.textbox.createTextRange){var i=this.textbox.createTextRange();i.moveStart("character",n);i.moveEnd("character",t-this.textbox.value.length);i.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(n,t);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(n){var t,r,i;for(this.cur=-1,t=null,this.setupLayer(),gx.dom.shouldPurge()&&gx.dom.purge(this.layer,!0),this.layer.innerHTML="",this.IFrameControl||(t=!1,this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame"),this.IFrameControl||(t=!0,this.IFrameControl=document.createElement("IFRAME"),this.IFrameControl.src="about:blank",this.IFrameControl.id="gxAutosuggestIFrame"),$(this.IFrameControl).css({zIndex:1,display:"none",position:"absolute"}),this.IFrameControl.frameBorder="0",t&&document.body.appendChild(this.IFrameControl)),r=n.length,i=0;i<r;i++)t=document.createElement("div"),t.appendChild(document.createTextNode(n[i].d)),t.style.width=this.textbox.offsetWidth,this.layer.appendChild(t);this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(n){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var t=this.textbox.value.length;this.pickvalue(n);n=n.length;t<n&&this.selectRange(t,n)}};this.pickvalue=function(n,t){for(var r=this.aSuggestions.length,i=0;i<r;i++)if(this.aSuggestions[i].d==n){this.textbox.value=n;t===!0&&gx.evt.fireEvent(this.textbox,"input");gx.evt.onchange_impl(this.textbox,void 0,!0);break}};this.autosuggest=function(n,t){this.aSuggestions=n;var i=this.aSuggestions.length;if(t&&this.aSuggestions!=null&&i==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&this.aSuggestions!=null&&i>0&&(i==1&&this.aSuggestions[0].d!=this.textbox||i>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var n=!1;this.layer=gx.dom.byId("gxAutosuggestElement");this.layer||(n=!0,this.layer=document.createElement("div"),this.layer.className="suggestions",this.layer.id="gxAutosuggestElement");this.setupLayer();n&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(n){var n=n||window.event,t=gx.evt.source(n);n.type=="mousedown"?(gx.evt.cancel(n,!0),this.pickvalue(t.firstChild.nodeValue,!0),this.hideSuggestions(),window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)):n.type=="mouseover"?this.highlightSuggestion(t):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var n=this.textbox,t=0;n!=null&&n.tagName!="BODY";)t=t+n.offsetLeft,n=n.offsetParent;for(n=this.textbox;n!=null&&n.tagName!="BODY";)t=t-n.scrollLeft,n=n.parentNode;return t};this.getTop=function(){for(var n=this.textbox,t=0;n!=null&&n.tagName!="BODY";)t=t+n.offsetTop,n=n.offsetParent;for(n=this.textbox;n!=null&&n.tagName!="BODY";)t=t-n.scrollTop,n=n.parentNode;return t};this.handleKeyDown=function(n){switch(n.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(n){if(n=n.keyCode,n==9)this.hideSuggestions();else if(n==8||n==46)this.requestSuggestions(this,this.provider,!1);else if(n<32||n>=33&&n<46||n>=112&&n<=123){if(n===0){var n=this.textbox.value.length,t=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||"0",10);n!==t&&this.requestSuggestions(this,this.provider,this.typeahead)}}else this.requestSuggestions(this,this.provider,this.typeahead);$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};this.init()},suggestProvider:function(n,t,i,r){this.requestSuggestions=function(u,f,e,o){for(var l=gx.ajax.gxObjectUrl(n)+"?",h="gxajaxSuggest_"+r,c=t.length,s=0;s<c;s++)h+=","+encodeURIComponent(gx.fn.evalCtxScope(n,t[s]));for(h+=","+encodeURIComponent(void 0===o?gx.fn.getControlValue_impl(i):o),c=u.length,s=0;s<c;s++)h+=","+encodeURIComponent(gx.fn.evalCtxScope(n,u[s]));l+=gx.ajax.encryptParms(n,h);gx.http.doCall({method:"GET",url:l,handler:function(n,t){var i=gx.json.evalJSON(t);this.values=gx.fx.returnSuggestValues(this.VarRefresh,i[0]);f()},error:e,obj:this})}},returnSuggestValues:function(n,t){return t},addElement:function(n,t,i){if(!this.elementExists(n,t,i)){var r=t.id;!0===i&&(r+=t.types.sort().join(""));n.splice(0,0,t);n[r]=t}},elementExists:function(n,t,i){var r=t.id;return!0===i&&(r+=t.types.sort().join("")),n[r]?!0:!1},deleteElement:function(n,t,i){var u=t,r,f;for(i&&(u+=i.sort().join("")),n[u]&&delete n[u],u=n.length,r=0;r<u;r++)if(f=n[r],f.id==t)if(i){if(this.matchingTypes(i,f.types)){n.splice(r,1);break}}else{n.splice(r,1);break}return n},matchingTypes:function(n,t){for(var u=t.length,i=0;i<u;i++){for(var f=!1,e=n.length,r=0;r<e;r++)t[i].toLowerCase()==n[r].toLowerCase()&&(f=!0);if(!f)return!1}return!0},findControl:function(n,t,i,r){return(t=gx.dom.el(i),null!=t&&"none"!==$(t).css("display"))?t:(t=gx.fn.getRONode(i,!1),r&&null!=t&&$(t).is(":visible"))?t:(t=gx.dom.el("gxHTMLWrp"+i),null!=t)?t:(r&&!n.id&&"A"===n.tagName&&(n=n.parentNode),i="(^"+(r?"("+gx.fn.getRONodePrefix()+")?":"")+"v?"+i+"_(?:(?:[0-9]){4})+$)",i=RegExp(i),null!=n&&i.test(n.id)?n:null)},isUnderMouse:function(n){var r=gx.evt.mouse.x,u=gx.evt.mouse.y,t=gx.dom.position(n),i=gx.dom.dimensions(n);return r>=t.x&&r<=t.x+i.w&&u>=t.y&&u<=t.y+i.h||"DIV"==n.tagName&&0===i.w&&0===i.h&&n.firstChild&&(t=gx.dom.position(n.firstChild),i=gx.dom.dimensions(n.firstChild),r>=t.x&&r<=t.x+i.w&&u>=t.y&&u<=t.y+i.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(n){return"dblclick"==n?this.dblclicks:this.generics},addEventHandler:function(n,t,i,r){i=gx.lang.emptyObject(n)?i:n.CmpContext+i;n={id:t+i,cId:i,type:t,obj:n,hdl:r};t=this.getEventHandlers(t);gx.fx.addElement(t,n,!1)},deleteEventHandlers:function(n){for(var e,o=[this.dblclicks,this.generics],s=o.length,i=0;i<s;i++){for(var r=[],u=o[i],f=u.length,t=0;t<f;t++)e=u[t],e.obj==n&&r.push(e);for(f=r.length,t=0;t<f;t++)gx.fx.deleteElement(u,r[t].id)}},hasEventHandler:function(n,t){for(var i,e=gx.evt.source(t),f=this.getEventHandlers(n),o=f.length,r=!1,u=0;u<o&&!r;u++)i=f[u],i=gx.fx.findControl(e,i.obj,i.cId,!0),null!=i&&(r=t.currentTarget===i||gx.fx.isUnderMouse(i));return r},delayedDispatch:function(n){return gx.fx.dom.hasEventHandler("dblclick",n)},raiseEvent:function(n,t){var o=gx.evt.source(t),r=$(o),u=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,i,e;"dblclick"==n&&(clearTimeout(parseInt(r.attr(u),10)),r.removeAttr(u));for(var r=this.getEventHandlers(n),u=r.length,f=0;f<u;f++)i=r[f],e=gx.fx.findControl(o,i.obj,i.cId,!0),null!=e&&gx.fx.isUnderMouse(e)&&i.hdl.call(i.obj)},highlight:function(n,t,i){var u=gx.color.fromRGB(t[0],t[1],t[2]),r=gx.dom.getStyle(n,"backgroundColor"),f="transparent"==r||"rgba(0, 0, 0, 0)"==r;return{play:function(){n.style.backgroundColor=u.Html;setTimeout(this.end,i)},end:function(){var t=r;f&&(t="transparent");n.style.backgroundColor=t}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(n,t,i){i&&(gx.evt.setEventRow(n,this.dragCtrl),this.obj=i.call(n,this.dragCtrl),this.obj.gxDragTypes=t)},drop:function(n,t,i){i&&i.call(t,n,this.dragCtrl,this.obj)},noDrop:function(){var n=this.noDropCtrl;null!=n&&n.gxDndClassName&&(n.className=n.gxDndClassName+"NoAcceptDrag")},out:function(){var n=this.dropCtrl;n&&n.gxClassName&&(n.className=n.gxClassName);this.dropCtrl=null;n=this.noDropCtrl;null!=n&&n.gxClassName&&(n.className=n.gxClassName);this.noDropCtrl=null},over:function(){var n=this.dropCtrl;null!=n&&n.gxDndClassName&&(n.className=n.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var n=this.clonCtrl;null!=n&&((null==this.toHdl&&(n.dropLeft=parseFloat(n.style.left||"0"),n.dropTop=parseFloat(n.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(n=this.nextCoords(),this.moveDragControl(n.X,n.Y)))},nextCoords:function(){var n=this.clonCtrl,r=parseFloat(n.style.left||"0"),u=parseFloat(n.style.top||"0"),t=0,i=0;return r>=u?(t=r-1,i=n.dropTop-(n.dropTop-n.originalTop)*(n.dropLeft-t)/(n.dropLeft-n.originalLeft)):(i=u-1,t=n.dropLeft-(n.dropTop-i)*(n.dropLeft-n.originalLeft)/(n.dropTop-n.originalTop)),t<=n.originalLeft&&(t=n.originalLeft),i<=n.originalTop&&(i=n.originalTop),{X:t,Y:i}},moveControl:function(n){if(null==this.clonCtrl){var t=document.createElement("DIV");t.style.position="absolute";n.gxDndClassName&&(t.className=n.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(t,!0);t.innerHTML=this.dragInfo();gx.fn.setOpacity(50,t);document.body.appendChild(t);t.originalLeft=gx.evt.mouse.x-10;t.originalTop=gx.evt.mouse.y-10;t.diffLeft=10;t.diffTop=10;this.clonCtrl=t}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var n=this.clonCtrl,t,i;return null==n?!0:(t=parseFloat(n.style.left||"0"),i=parseFloat(n.style.top||"0")-n.originalTop,0>=t-n.originalLeft&&0>=i?!0:!1)},moveDragControl:function(n,t){try{var i=this.clonCtrl;null!=i&&(i.style.left=n-i.diffLeft+"px",i.style.top=t-i.diffTop+"px")}catch(r){this.deleteClonControl()}},dragInfo:function(){var n,i,t,r;if(null!=this.obj){n="";i="";for(t in this.obj){if("gxDragTypes"!=t){if(r=[n],"function"==typeof this.obj[t])continue;i+=t+": "+this.obj[t]+"<\/br>";n=r[0]}if(5<=n){i+="...";break}n++}return i}return""},deleteHandlers:function(n){gx.thread.Mutex(this,this.deleteHandlersSync,[n])},deleteHandlersSync:function(n){for(var r=[],u=this.sources.length,i,t=0;t<u;t++)i=this.sources[t],i.obj!=n&&r.push(i);for(this.sources=r,r=[],u=this.targets.length,t=0;t<u;t++)i=this.targets[t],i.obj!=n&&r.push(i);this.targets=r},addSource:function(n,t,i,r,u){gx.thread.Mutex(this,this.addSourceSync,[n,t,i,r,u])},addSourceSync:function(n,t,i,r,u){t=gx.lang.emptyObject(n)?t:n.CmpContext+t;gx.fx.addElement(this.sources,{id:t,cssClass:i,types:r,obj:n,hdl:u},!1)},addTarget:function(n,t,i,r,u){gx.thread.Mutex(this,this.addTargetSync,[n,t,i,r,u])},addTargetSync:function(n,t,i,r,u){t=gx.lang.emptyObject(n)?t:n.CmpContext+t;gx.fx.addElement(this.targets,{id:t,cssClass:i,types:r,obj:n,hdl:u},!0)},deleteSource:function(n){gx.thread.Mutex(this,this.deleteSourceSync,[n])},deleteSourceSync:function(n){this.sources=gx.fx.deleteElement(this.sources,n)},getSource:function(n){for(var i,t,n=gx.evt.source(n),u=this.sources.length,r=0;r<u;r++)if(i=this.sources[r],t=this.dragCtrl=gx.fx.findControl(n,i.obj,i.id),null!=t&&(t.gxClassName=t.className,t.gxDndClassName=i.cssClass,gx.fx.isUnderMouse(t)))return i;return this.obj=this.dragCtrl=null},getTarget:function(n,t){for(var r,i,f=gx.evt.source(n),e=this.targets.length,u=0;u<e;u++)if(r=this.targets[u],i=gx.fx.findControl(f,r.obj,r.id),null!=i&&(i.gxClassName=i.className,i.gxDndClassName=r.cssClass,gx.fx.isUnderMouse(i)))return gx.fx.matchingTypes(t,r.types)?(this.noDropCtrl=null,this.dropCtrl=i,r):(this.out(),this.noDropCtrl=i,this.noDrop(),null);return this.out(),null}},notifications:{queuedEvents:[],initialize:function(n){if(n.notifications||(n.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",n,gx.fx.notifications.notify.closure(n),{single:!1,doNotDelete:n.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",n,gx.fx.notifications.fireQueuedEvents.closure(n),{single:!1,doNotDelete:n.IsMasterPage})),!this.webSocket){n.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.');var n=gx.fn.getHidden("GX_WEBSOCKET_PORT"),t=gx.basePath&&0<gx.basePath.length?"/":"";this.webSocket=new gx.webSocket({port:n,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:n?location.hostname+":"+n+"/":location.host+"/",resourceUrl:t+(gx.gen.isDotNet()?"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:"notifications"})}},deinit:function(){gx.fx.notifications.queuedEvents=[]},addTracker:function(n,t,i,r,u,f){gx.fx.notifications.initialize(n);n.notifications[t||""]={gxO:n,handler:u,eventName:i,type:r,noWait:f}},notify:function(n){var n=gx.json.evalJSON(n),t=this.notifications[n.GroupName||""];t&&(gx.fx.notifications.queuedEvents.push({notifObj:t,data:n}),(t.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var n,t,f,r,e,u,i=0;i<gx.fx.notifications.queuedEvents.length;i++)n=gx.fx.notifications.queuedEvents[i],n.executed||(gx.fx.notifications.queuedEvents.splice(i--,1),t=n.notifObj.gxO,n.executed=!0,(gx.lang.emptyObject(n.data.Object)||n.data.Object.toUpperCase()==t.ServerClass.toUpperCase())&&(f=n.notifObj.type,r=n.notifObj.eventName,r?(e=t.isServerEvent(r),u={},u[f[0][0]]=n.data,t.setEventParameters(n.notifObj.type,u),gx.evt.dispatcher.dispatch(t.getServerEventName(r),t,0,0,e,void 0,void 0,!0)):n.notifObj.handler(n.data)))}},ctx:{setters:[],trackers:[],deleteHandlers:function(n){gx.thread.Mutex(this,this.deleteHandlersSync,[n])},deleteHandlersSync:function(n){for(var r=[],u=this.setters.length,i,t=0;t<u;t++)i=this.setters[t],i.obj!=n&&r.push(i);for(this.setters=r,r=[],u=this.trackers.length,t=0;t<u;t++)i=this.trackers[t],i.obj!=n&&r.push(i);this.trackers=r},addSetter:function(n,t,i,r,u){gx.thread.Mutex(this,this.addSetterSync,[n,t,i,r,u])},addSetterSync:function(n,t,i,r,u){t=gx.lang.emptyObject(n)?t:n.CmpContext+t;gx.fx.addElement(this.setters,{id:t,cssClass:i,types:r,obj:n,hdl:u},!1)},addTracker:function(n,t,i){gx.thread.Mutex(this,this.addTrackerSync,[n,t,i])},addTrackerSync:function(n,t,i){gx.fx.addElement(this.trackers,{id:n.CmpContext+n.IsMasterPage.toString(),cssClass:"",types:t,obj:n,hdl:i},!0)},deleteSetter:function(n){gx.thread.Mutex(this,this.deleteSetterSync,[n])},deleteSetterSync:function(n){this.setters=gx.fx.deleteElement(this.setters,n)},notify:function(n,t,i){gx.thread.Mutex(this,this.notifySync,[n,t,i])},notifySync:function(n,t,i){var h,r,o;if(n&&n.forcedFocus)n.forcedFocus=!1;else{var f,e=gx.lang.emptyObject,s=function(n,t){var i=gx.O;gx.setGxO(n);t();gx.setGxO(i)},u=null;if(e(t)||e(i))for(h=this.setters.length,f=0;f<h;f++)if(r=this.setters[f],e(n)){if(u=gx.fx.findControl(null,r.obj,r.id),null!=u&&e(u.onfocus)&&gx.fx.isUnderMouse(u)){s.apply(this,[r.obj,function(){gx.evt.setEventRow(r.obj,u);t=r.types;i=r.hdl.call(r.obj,u)}]);break}}else if(n.id==r.id){s.apply(this,[r.obj,function(){u=n;gx.evt.setEventRow(r.obj,u);t=r.types;i=r.hdl.call(r.obj,u)}]);break}if(!e(t)&&(i||""===i))for(e=this.trackers.length,f=0;f<e;f++)o=this.trackers[f],gx.fx.matchingTypes(t,o.types)&&s.apply(this,[o.obj,function(){o.hdl.call(o.obj,null,u,i)}])}}}};gx.date=function(){var n=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,r=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,u=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,t=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,i=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(n){return this.getDay()==n.getDay()&&this.getMonth()==n.getMonth()&&this.getFullYear()==n.getFullYear()?!0:!1},toJson:function(){var n=new gx.date.gxdate("");return n.assign_date(this),n.json()},isoString:function(n){return n.toISOString()},jsonNullFormat:{Default:0,YearOne:1},gxdate:function(t,u){this.json=function(){var r=this.TimeFmt,n,t,i;return this.TimeFmt=24,n=this.HasTimePart,t=this.HasDatePart,this.HasDatePart=this.HasTimePart=!0,i=this.getStringWithFmt("Y4MD")+" "+(n?this.getTimeString(!0,!0,!0,0<this.Value.getMilliseconds()):"00:00:00"),this.TimeFmt=r,this.HasTimePart=n,this.HasDatePart=t,i};this.mapCTODFormatToPattern=function(n){return"ANSI"==n?"Y4MD":n};this.emptyDateString=function(n){return-1==n.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==n?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(n){if(n=this.mapCTODFormatToPattern(n),0==this.Value-i)return this.emptyDateString(n);var t=n,f,e,r,u=this.FormatPos(n);return this.JsonNullFormat===gx.date.jsonNullFormat.YearOne?(e=f="01",r="0001"):(f=gx.text.padl(this.Value.getDate().toString(),2,"0"),e=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),r=gx.text.padl(this.Value.getFullYear().toString(),4,"0")),t=t.replace("D",f+(3>u.DPos?"/":"")),t=t.replace("M",e+(3>u.MPos?"/":"")),-1==n.indexOf("Y4")?(r=r.slice(2,4),t=t.replace("Y",r+(3>u.YPos?"/":""))):t=t.replace("Y4",r+(3>u.YPos?"/":"")),t};this.getString=function(n){return gx.lang.emptyObject(n)&&(n=gx.dateFormat),this.getStringWithFmt(n)};this.toISOString=function(){return this.Value.toISOString()};this.toString=function(){var n=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+n};this.gxdtoc=function(n,t){return this.getStringWithFmt(this.mapCTODFormatToPattern(n)).replace("/",t)};this.getUrlVal=function(){var n,t,i;if(gx.date.isNullDate(this))return"";this.HasDatePart?(n=gx.text.padl(this.Value.getDate().toString(),2,"0"),t=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),i=gx.text.padl(this.Value.getFullYear().toString(),4,"0")):(t=n="01",i="0001");var r=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",u=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",f=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",e=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return i+t+n+r+u+f+e};this.getTimeString=function(n,t,i,r){var f;if(gx.date.isNullDate(this)&&gx.blankWhenEmpty)return f="",i&&(f+="  "),n&&(f+="   "),t&&(f+="   "),r&&(f+="    "),f;var f="",u=this.Value.getHours(),i=i||!0;12==this.TimeFmt&&12<=u?(12<u&&(u-=12),f=" PM"):12==this.TimeFmt&&(f=" AM");var e=this.HasTimePart?gx.text.padl(u.toString(),2,"0"):"",o=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",s=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",h=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return 0===u&&""!==f&&(e="12"),u="",i&&(u=e),n&&(u=u+":"+o),t&&(u=u+":"+s),r&&(u=u+"."+h),u+f};this.FormatPos=function(n){var r,i,t;return"ANSI"==n?(r=1,i=2,n=3):(t=n.indexOf("Y4"),r=-1==t?n.indexOf("Y")+1:t+1,i=n.indexOf("M"),0!==t&&i++,n=n.indexOf("D"),0!==t&&n++),{YPos:r,MPos:i,DPos:n}};this.assign_date=function(n){n instanceof gx.date.gxdate?(this.Value=n.Value,this.HasTimePart=n.HasTimePart,this.HasDatePart=n.HasDatePart):this.Value=void 0===n?i:n};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var n=new gx.date.gxdate("");return n.Value.setTime(this.Value.getTime()+6e4*this.Value.getTimezoneOffset()),n.HasTimePart=this.HasTimePart,n.HasDatePart=this.HasDatePart,n};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var n=new gx.date.gxdate("");return n.Value.setTime(this.Value.getTime()-6e4*this.Value.getTimezoneOffset()),n.HasTimePart=this.HasTimePart,n.HasDatePart=this.HasDatePart,n};this.assign_string=function(t,i,u,f){var y=n,e=y.exec(t),p=0,s,h;if(null!=e&&(s=t.indexOf(e[0]),0<s&&"."==gx.text.substring(t,s,1)&&(e=null)),null==e)-1!=t.indexOf("  /  /  ")&&(u=!0);else for(s=e.length,h=1;h<s;h++)gx.lang.emptyObject(e[h])||p++;var o=this.FormatPos(i),c=h=s=i=0,l=0,a=0,v=0;try{if(this.HasDatePart=!0,6==o.DPos+o.MPos+o.YPos&&null!=e&&3<=p){if(null!=e[o.YPos]&&(i=parseInt(e[o.YPos],10)),isNaN(i))throw"InvalidDate";if(i<this.FYearOfCentury?i+=2e3:100>i?i+=1900:1e3>i&&(i+=1e3),null!=e[o.MPos]&&(s=parseInt(e[o.MPos],10)-1),isNaN(s)||0>s||11<s)throw"InvalidDate";if(null!=e[o.DPos]&&(h=parseInt(e[o.DPos],10)),isNaN(h)||0>h||h>gx.date.maxDays(s,i))throw"InvalidDate";}else this.HasDatePart=!1;if(this.HasTimePart=!1,o=0,null==e?(y=r,e=y.exec(t),null!=e&&(o=1,this.HasTimePart=!0)):3<p&&(o=4,this.HasTimePart=!0),this.HasTimePart&&!u){if(null!=e[o]&&(c=parseInt(e[o],10)),gx.lang.emptyObject(e[o])||isNaN(c))throw this.HasTimePart=!1,"InvalidHour";if(null!=e[o+1]&&(l=parseInt(e[o+1],10)),isNaN(l)&&(l=0),null!=e[o+2]&&(a=parseInt(e[o+2],10)),isNaN(a)&&(a=0),null!=e[o+3]&&(v=parseInt(e[o+3],10)),isNaN(v)&&(v=0),!this.validTime(-1!=t.toLowerCase().indexOf("m"),c,l,a,v))throw"InvalidHour";(-1!=t.indexOf("PM")||-1!=t.indexOf("pm"))&&12>c&&(c+=12);(-1!=t.indexOf("AM")||-1!=t.indexOf("am"))&&12==c&&(c=0)}}catch(w){if(f)throw w;"InvalidDate"==w&&(v=a=l=c=h=s=i=0);"InvalidHour"==w&&(v=a=l=c=0)}this.Value=new Date(i,s,h,c,l,a,v);0<i+s+h+c+l+a+v&&(!this.HasTimePart||u)&&this.Value.getDate()!=h&&(this.Value=new Date(Date.UTC(i,s,h,c+12,l,a,v)))};this.validTime=function(n,t,i,r,u){return n&&12<t||!n&&(24<t||24==t&&0<i+r)?!1:59>=i||59>=r||999>=u};this.compare=function(n){return"string"==typeof n?this.compare_string(n):this.compare_date(n)};this.compare_string=function(n){return this.compare_date(new gx.date.gxdate(n).Value)};this.compare_date=function(n){return n?(n=n instanceof gx.date.gxdate?n.Value:n,this.HasTimePart?this.Value-n:this.Value.getFullYear()>n.getFullYear()?1:this.Value.getFullYear()<n.getFullYear()?-1:this.Value.getMonth()>n.getMonth()?1:this.Value.getMonth()<n.getMonth()?-1:this.Value.getDate()>n.getDate()?1:this.Value.getDate()<n.getDate()?-1:0):null};this.JsonNullFormat=gx.date.jsonNullFormat.Default;this.TimeFmt=gx.timeFormat||12;this.SFmt=u||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof t?this.assign_string(t,this.SFmt):this.assign_date(t)},isANSIDateTime:function(t){return"string"==typeof t&&n.test(t)?!0:!1},isANSIDate:function(n){return"string"==typeof n&&u.test(n)?!0:!1},isLeapYear:function(n){return 0==n%400?!0:0==n%100?!1:0==n%4?!0:!1},dateObject:function(n){return n instanceof this.gxdate?n.Value:"string"==typeof n?new this.gxdate(n,this.isANSIDate(n)?"Y4MD":void 0).Value:n instanceof Date?n:new Date},gxdateObject:function(n){if(n instanceof this.gxdate)return n;if("string"==typeof n)return new this.gxdate(n,this.isANSIDate(n)?"Y4MD":void 0);if(n instanceof Date){var t=new this.gxdate("");return t.assign_date(n),t}return new this.gxdate("")},clonedDate:function(n,t){var i=new this.gxdate("");return i.assign_date(t),n instanceof this.gxdate&&(i.SFmt=n.SFmt,i.HasTimePart=n.HasTimePart,i.HasDatePart=n.HasDatePart),i},nullDate:function(){return new this.gxdate("").Value},now:function(){var n=this.today();return n.HasTimePart=!0,n.HasDatePart=!0,n},today:function(){var n=new this.gxdate("");return n.assign_date(new Date),n},ctot:function(n,t){return new this.gxdate(n,t)},ctod:function(n,t){var i=new this.gxdate(n,t);return i.Value.setHours(0,0,0,0),i},ymdtod:function(n,t,i){return n=new this.gxdate(n+"/"+t+"/"+i,"ANSI"),n.Value.setHours(0,0,0,0),n},ymdhmstot:function(n,t,i,r,u,f){return new this.gxdate(n+"/"+t+"/"+i+" "+r+":"+u+":"+f,"ANSI")},hour:function(n){return new this.gxdate(n).Value.getHours()},minute:function(n){return new this.gxdate(n).Value.getMinutes()},second:function(n){return new this.gxdate(n).Value.getSeconds()},millisec:function(n){return 864e5*n},day:function(n){return new this.gxdate(n).Value.getDate()},month:function(n){return new this.gxdate(n).Value.getMonth()+1},year:function(n){return new this.gxdate(n).Value.getFullYear()},addDays:function(n,t){return this.addMill(n,this.dayToMillisec(t))},addSec:function(n,t){return this.addMill(n,this.secToMillisec(t))},addMill:function(n,t){var i=this.dateObject(n).clone(),r=new this.gxdate,u;return r.assign_date(i),u=i.getMilliseconds(),i.setMilliseconds(u+t),r.getString(this.isANSIDate(n)?"Y4MD":void 0)},secDiff:function(n,t){return this.millisecToSec(this.milliDiff(n,t))},daysDiff:function(n,t){return this.millisecToDay(this.milliDiff(n,t))},milliDiff:function(n,t){var i=this.gxdateObject(n),r=this.gxdateObject(t),n=i.Value.valueOf(),t=r.Value.valueOf();return n-t},dayToMillisec:function(n){return 864e5*n},secToMillisec:function(n){return 1e3*n},millisecToDay:function(n){return n/864e5},millisecToSec:function(n){return n/1e3},dateParm:function(n){return"string"==typeof n?new this.gxdate(n):n},urlDate:function(n,t){var i=new this.gxdate("undefined"!=typeof n.value?n.value:gx.dom.spanValue(n)||n,t);return this.isNullDate(i)?"":i.Value.getFullYear().toString()+gx.text.padl((i.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(i.Value.getDate().toString(),2,"0")},urlDateTime:function(n,t){var i=new this.gxdate("undefined"!=typeof n.value?n.value:gx.dom.spanValue(n)||n,t);return i.HasDatePart?this.isNullDate(i)?"":i.Value.getFullYear().toString()+gx.text.padl((i.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(i.Value.getDate().toString(),2,"0")+gx.text.padl(i.Value.getHours().toString(),2,"0")+gx.text.padl(i.Value.getMinutes().toString(),2,"0")+gx.text.padl(i.Value.getSeconds().toString(),2,"0")+(0===i.Value.getMilliseconds()?"":gx.text.padl(i.Value.getMilliseconds().toString(),3,"0")):"00010101"+gx.text.padl(i.Value.getHours().toString(),2,"0")+gx.text.padl(i.Value.getMinutes().toString(),2,"0")+gx.text.padl(i.Value.getSeconds().toString(),2,"0")},isNullDate:function(n){n instanceof this.gxdate&&(n=n.Value);var t=this.nullDate();return t.getFullYear()!=n.getFullYear()||t.getMonth()!=n.getMonth()||t.getDate()!=n.getDate()||t.getHours()!=n.getHours()||t.getMinutes()!=n.getMinutes()||t.getSeconds()!=n.getSeconds()||t.getMilliseconds()!=n.getMilliseconds()?!1:!0},dtoc:function(n,t,i){return new this.gxdate(n,this.isANSIDate(n)?"Y4MD":void 0).gxdtoc(t,i)},dttoc:function(n,t,i){var n=new this.gxdate(n,this.isANSIDateTime(n)?"Y4MD":void 0),r=gx.dateFormat,u="";return 0<t&&(8<t&&-1==r.indexOf("Y4")&&(r=r.replace("Y","Y4")),u=n.getStringWithFmt(r)+" "),0<i?u+n.getTimeString(3<i,8<=i,1<i,12<=i):u},nulldate_toc:function(n,t){var r=new this.gxdate(""),i,u;return r.HasTimePart=!0,r.HasDatePart=!0,i=gx.dateFormat,u="",0<n&&(8<n&&-1==i.indexOf("Y4")&&(i=i.replace("Y","Y4")),u=r.getStringWithFmt(i)+" "),0<t&&!gx.blankWhenEmpty?u+r.getTimeString(3<t,8<=t,1<t,12<=t):u},addyr:function(n,t){return this.addmth(n,12*t)},addmth:function(n,t){var i=this.gxdateObject(n),n=new Date(this.dateObject(n).getTime()),r=n.getDate();return n.setDate(1),n.setMonth(n.getMonth()+1*t),n.setDate(Math.min(r,this.maxDays(n.getMonth(),n.getFullYear()))),this.clonedDate(i,n)},dtadd:function(n,t){var i=this.gxdateObject(n),n=new Date(this.dateObject(n).getTime()),r=n.getMilliseconds();return n.setMilliseconds(r+1e3*t),this.clonedDate(i,n)},dtdiff:function(n,t){return n=this.dateObject(n),t=this.dateObject(t),(n-t)/1e3},maxDays:function(n,t){return[31,this.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},eom:function(n){var t=this.gxdateObject(n),n=this.dateObject(n),n=new Date(n.getTime()),i=this.maxDays(n.getMonth(),n.getFullYear());return n.setDate(i),this.clonedDate(t,n)},dow:function(n){return n=this.dateObject(n),n.equalsNoTime(this.nullDate())?0:n.getDay()+1},age:function(n,t){var r,i,u;if(i=this.dateObject(n),r=this.dateObject(t),u=this.nullDate(),i.equalsNoTime(u)||r.equalsNoTime(u)||i.equalsNoTime(r))return 0;if(r>=i){if(u=36e5*r.getUTCHours()+6e4*r.getUTCMinutes()+1e3*r.getUTCSeconds()-(36e5*i.getUTCHours()+6e4*i.getUTCMinutes()+1e3*i.getUTCSeconds()),r.getUTCDate()>i.getUTCDate()||r.getUTCDate()==i.getUTCDate()&&0<=u)u=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds()));else for(u=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth()-1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds())),r=r.getUTCMonth()-1,-1==r&&(r=11);u.getUTCMonth()!=r;)u.setUTCDate(u.getUTCDate()-1);return u.getUTCMonth()>=i.getUTCMonth()?u.getUTCFullYear()-i.getUTCFullYear():u.getUTCFullYear()-1-i.getUTCFullYear()}return 0},valid_date:function(n,i,r,u,f,e,o,s){var a=o||!1,v=!1,e=n.value,c="",o=r,h="",h="^[ ]*(",y=0<i?"GXM_invaliddate":"GXM_invalidtime",c=gx.num.replaceFullWidthNumerals(e),c=c.split("\n")[0],r="YMD"==r?1:0,f=12==f?1:0,l;if(t.test(c)?(v=!0,e=c=""):0<i&&4===c.length&&(l=(new Date).getFullYear().toString().substring(10===i?0:2),c=1===r?l+c:c+l),h=0<i?8==i?h+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===r?a?h+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":h+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":a?h+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":h+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":h+"( )?( )?( )?",0<u&&(h+="(",0<i&&(h+="[ ]*"),h+="([0-9]{1,2})",h=2<u?h+"(:?([0-9]{1,2}))?":h+"(( )?)?",h=5<u?h+"(:?([0-9]{1,2}))?":h+"(( )?)?",h=8<u?h+"(\\.?([0-9]{1,3}))?":h+"(( )?)?",h=(1==f?h+"[ ]*(a|am|p|pm)?":h+"(( )?)?")+")?"),r=RegExp(h+")?[ ]*$","i"),r.test(c)){r=c.match(r);0<i?(h="/",0<c.indexOf("-")&&(h="-"),r[2]?h=r[2]+h+r[3]+h+r[4]:(h=1==s?"        ":"  "+h+"  "+h+"  ",10==i&&(h+="  "))):h="";0<u&&(0<i&&(h+=" "),1==s&&!r[6]&&!r[8]&&!r[10]&&!r[12]?h+="        ":(r[6]?h+=r[6]:v?(s=c.match(t),h=s[4]?h+s[4]:h+(1==f?"12":"00")):h+=1==f?"12":"00",2<u&&(h=r[8]?h+":"+r[8]:h+":00"),5<u&&(h=r[10]?h+":"+r[10]:h+":00"),8<u&&(h=r[12]?h+"."+r[12]:h+".000"),1==f&&(h="p"==(r[13]?r[13].substr(0,1):"a").toLowerCase()?h+" PM":h+" AM")));f=new this.gxdate("",o);try{f.assign_string(h,o,0>=u,!0);""!==gx.text.trim(h)&&(h=this.formatDateTime(u,i,o,f))}catch(p){return gx.fn.alert(n,gx.getMessage(y)),gx.csv.setFormatError(n),!1}return h!=e&&(n.value=h,-1!=navigator.userAgent.indexOf("Firefox/2")&&n.onchange(),(i=gx.O.getValidStructFld(n))&&gx.O.refreshDependantGrids(i)),gx.csv.setFormatError(n,!1),!0}return gx.fn.alert(n,gx.getMessage(y)),gx.csv.setFormatError(n),!1},formatDateTime:function(n,t,i,r){var u="";return 0<n&&r.HasTimePart&&(u=r.getTimeString(4<=n,8<=n,void 0,12<=n)),n=i,8<t&&-1==n.indexOf("Y4")&&(n=n.replace("Y","Y4")),0<t?r.getStringWithFmt(n)+(r.HasTimePart?" "+u:""):r.HasTimePart?u:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();gx.text={stringBuffer:function(n){this.capacity=n||10;this.buffer=[];this.append=function(n){return this.buffer.push(n),this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var t=arguments[0],i=arguments.length,n=1;n<i;n++)t=t.replace("%"+n,gx.text.rtrim(arguments[n].toString()));return t},formatString:function(n,t,i,r){if(i)return gx.text.padl("",t,"*");if(!gx.lang.emptyObject(r)&&this.startsWith(r,"@")&&0<r.indexOf("!")){if(t="",i=this.padr("",n?n.length:0,"!"),r=this.replaceAll(i,"!"," "),n)for(var u=0,f=0,e;u<r.length&&f<n.length;)e=n[f],this.isSeparator(i[u])?(e==i[u]?(f++,t+=e):t+=r[u],u++):(t+=this.getCaret(i,e,u,t),u++,f++);else t=r;return gx.text.rtrim(t)}return n},getCaret:function(n,t,i,r){switch(n[i]){case"9":if(isNaN(t))break;else return t;case"X":return t;case"A":case"M":case"!":return t.toUpperCase();case"Z":if("1"<=t&&"9">=t)return t;if("0"==t){for(n=!0,t=0;t<i;t++)if(" "!=r[t]){n=!1;break}if(!n)return"0"}}return" "},isSeparator:function(n){return"9"!=n&&"X"!=n&&"!"!=n&&"Z"!=n&&"A"!=n&&"M"!=n},replaceAll:function(n,t,i){return-1!=n.toString().indexOf(t)?(""+n).split(t).join(i):n},charReplace:function(n,t,i){for(var f="",o=n.length,u=0;u<o;u++){for(var e=!1,s=t.length,r=0;r<s;r++)if(n.charAt(u)==t[r]&&r<i.length){f+=i[r];e=!0;break}!1===e&&(f+=n.charAt(u))}return f},length:function(n){return n.length},upper:function(n){return n.toUpperCase()},lower:function(n){return n.toLowerCase()},padr:function(n,t,i){var r=t-n.length;if(1>r)return n.substring(0,t);for(t=0;t<r;t++)n+=i;return n},padl:function(n,t,i){var u=t-n.length,t,r;if(1>u)return n.substring(0,t);for(t="",r=0;r<u;r++)t+=i;return t+n},ltrimstr:function(n,t,i){return this.ltrim(gx.num.str(n,t,i))},ltrim:function(n){return n.toString().replace(/^ */,"")},rtrim:function(n){return n.toString().replace(/ *$/,"")},trim:function(n){return this.rtrim(this.ltrim(n))},chr:function(n){return String.fromCharCode(n)},like:function(n,t){return null===t?!1:(t=t.replace(RegExp("([\\.\\\\\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:\\-])","g"),"\\$1"),RegExp(t.replace(/%/g,".*").replace(/_/g,".")).test(n))},compare:function(n,t){return this.rtrim(n).localeCompare(this.rtrim(t))},concat:function(n,t,i){return this.rtrim(n)+i+t},space:function(n){for(var t="",i=0;i<n;i++)t+=" ";return t},substring:function(n,t,i){return 0>i?n.toString().substring(t-1):n.toString().substring(t-1,t-1+i)},tostring:function(n){return n.toString()},toformattedstring:function(n){return n.toString().replace(".",gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(n,t){var i=gx.text.escapeMapping[t];return i?i:(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))},escapeString:function(n){return this.escapeRegex.start.test(n)?'"'+n.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+n+'"'},indexOf:function(n,t,i){return i>n.length?0:(0>=i&&(i=1),n.indexOf(t,i-1)+1)},lastIndexOf:function(n,t,i){return i>n.length?0:(0>=i&&(i=n.length),n.lastIndexOf(t,i-1)+1)},endsWith:function(n,t){return-1!==n.indexOf(t,n.length-t.length)},startsWith:function(n,t){return 1==this.indexOf(n,t)},contains:function(n,t){return 0<this.indexOf(n,t)},charAt:function(n,t){return n.charAt(t-1)}};gx.num=function(){var t=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,n=function(n,t,i,r){var u=gx.lang.instanceOf,f="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,e=gx.thousandSeparator,o=gx.decimalPoint;return"string"==typeof i&&(i=gx.num.parseFloat(i,e,o)),"string"==typeof r&&(r=gx.num.parseFloat(r,e,o)),u(i,f)&&u(r,Number)?i[n](new f(r.toString())).toString():u(i,Number)&&u(r,f)?new f(i.toString())[n](r).toString():u(i,Number)&&u(r,Number)||"undefined"==typeof gx.num.dec?t(i,r):i[n](r)};return{str:function(n,t,i){return"string"==typeof n?n:("undefined"==typeof t&&(t=10),("undefined"==typeof i||t-1<=i)&&(i=0),n=n.toFixed(i),n.length<=t?gx.text.padl(n,t," "):gx.text.padr("",t,"*"))},compare:function(n,t){return"number"==typeof n&&"number"==typeof t?n>t?1:n===t?0:-1:("number"==typeof n&&(n=new gx.num.dec.bigDecimal(n.toString())),"number"==typeof t&&(t=new gx.num.dec.bigDecimal(t.toString())),gx.lang.instanceOf(n,gx.num.dec.bigDecimal)&&gx.lang.instanceOf(t,gx.num.dec.bigDecimal)?n.compareTo(t):n-t)},maxNumericPrecision:function(){return 15},extractValue:function(n,t){var u,i,r;if(t=gx.num.replaceFullWidthNumerals(t),gx.lang.instanceOf(t,Number)||this.overflowNumber(t))return t;if(i=void 0===t?"":t,n)for(u="+"==n.charAt(0)||"-"==n.charAt(0)?n.replace(/[\+\-\d,*\.*Z*\s]+/,""):n.replace(/[\d,*\.*Z*\s]+/g,""),n.lastIndexOf(".")!=n.indexOf(".")&&(i=gx.text.replaceAll(i,".","")),r=0;r<u.length;r++)i=i.replace(u.charAt(r),"");return gx.text.trim(i)},formatNumber:function(n,t,i,r,u,f){var h;if(!i)return n?n.toString():"";gx.lang.emptyObject(n)&&(n="0");var r=-1!=i.indexOf(",")?gx.thousandSeparator:"",c=gx.decimalPoint,l=!1,e=gx.numericLenDec(i),s=e.Integers,t=e.Decimals;if("string"==typeof n&&r&&(n=gx.text.replaceAll(n,r,"")),"string"==typeof n&&(n=n.replace(c,".")),gx.num.overflowNumber(n))return n;try{n=0===t?gx.num.trunc(n,0).toString():gx.num.setScale(n,t)}catch(a){n=n.toString()}if(e=n.split("."),e[0]||(e[0]="0"),e[1]||(e[1]=""),f){if(e[1].length>t&&e[1].replace(/0*$/,"").length>t)throw"InvalidNumber";if(u&&"-"==e[0].charAt(0)&&e[0].replace(/0*/,"").length>s||!u&&"-"==e[0].charAt(0)||e[0].replace(/[+]?0*/,"").length>s)throw"InvalidNumber";}if(f=e[0].substring(0,s),0>n&&(u=!0),e[1].length<t){for(s=e[1],n=e[1].length+1;n<=t;n++)s+="0";e[1]=s}if(s="",u&&"-"==f.charAt(0)&&(s="-",f=f.substring(1)),r&&3<f.length){for(var o=f,f="",u=3;u<o.length;u+=3)n=o.slice(o.length-u,o.length-u+3),f=r+n+f+"";u=o.substr(0,0==o.length%3?3:o.length%3);f=u+f}if(c=e[1]?c:"",0<t?(u=i.split("."),u[1]==gx.text.padr("",t,"Z")&&(l=!0)):(u=Array(i),0<u.length&&0===gx.text.replaceAll(gx.text.replaceAll(u[0],",",""),"Z","").length&&(l=!0)),t=0,i="",1<u.length)for(o=u[1],n=0;n<o.length;n++)h=o.charAt(n),"9"==h||"Z"==h?e[1].length>t?(i+=e[1].charAt(t),t++):i+="0":"."!=h&&","!=h&&(i+=h);for(e="",u=u[0],t=f.length-1,n=u.length-1;0<=n;n--)o=u.charAt(n),"9"==o||"Z"==o?0<=t?("Z"==o&&0===Number(f.substring(0,t+1))||(e=f.charAt(t)+e),t--):e=("9"==o?"0":"")+e:"Z"!=o&&","!=o?e=o+e:","==o&&f.charAt(t)==r&&(e=f.charAt(t)+e,t--);return l&&("0"==e||""===e)&&0===i.replace(/0+$/,"").length?"":s+e+(i?c+i:"")},add:function(t,i){return n("add",function(n,t){return n+t},t,i)},subtract:function(t,i){return n("substract",function(n,t){return n-t},t,i)},multiply:function(t,i){return n("multiply",function(n,t){return n*t},t,i)},divide:function(t,i){return n("divide",function(n,t){return n/t},t,i)},negate:function(n){return gx.lang.instanceOf(n,Number)||"undefined"==typeof gx.num.dec?-n:n.negate()},pow:function(t,i){return n("pow",function(n,t){return Math.pow(n,t)},t,i)},mod:function(t,i){return n("remainder",function(n,t){return n%t},t,i)},setScale:function(n,t){var i,r,u;if(gx.lang.instanceOf(n,Number))return n.toFixed(t);if("string"==typeof n&&(n=gx.text.trim(n)),n.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===n.length&&0===t)return"0";if(i=n.split("."),i[1]||(i[1]=""),i[1].length<t){for(u=i[1],r=i[1].length+1;r<=t;r++)u+="0";return i[1]=u,i[0]+(""===i[1]?"":".")+i[1]}return Number(parseFloat(n)).toFixed(t)}return new gx.num.dec.bigDecimal(n).setScale(t,gx.num.dec.ROUND_UP).toString()},parseFloat:function(n,t,i){return gx.lang.instanceOf(n,Number)||this.overflowNumber(n)?n:(n=this.toInvariant(n,t,i),n.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(n):parseFloat(n))},toInvariant:function(n,t,i){return"number"==typeof n||"undefined"!=typeof gx.num.dec&&n instanceof gx.num.dec.bigDecimal?n:gx.text.replaceAll(n,t,"").replace(i,".")},parseInt:function(n,t,i){if("number"==typeof n)return n;var r=n,r=gx.text.replaceAll(n,i,"");return parseInt(r,t)},overflowNumber:function(n){return/\*(\**)/.test(n)},urlDecimal:function(n,t,i){return"undefined"!=typeof n?(n="undefined"!=typeof n.value?n.value:n,n=this.parseFloat(n,t,i),n.toString()):""},random:function(){return Math.random()},intval:function(n){var t=0,n="undefined"!=typeof n?n.toString():"",t=n.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(n,0):new gx.num.dec.bigDecimal(n).setScale(0,gx.num.dec.ROUND_UP);return isNaN(t)&&(t=0),t},val:function(n){return n=gx.text.trim(n).replace(",","."),n=this.parseFloat(n),isNaN(n)&&(n=0),n},trunc:function(n,t){var i=n,n=n.toString(),r=n.indexOf(".");if(-1!=r){if(i=n.substring(0,r),0===t)return Number(i);r=n.substring(r+1,r+1+t);i=gx.num.parseFloat(i+"."+r);isNaN(i)&&(i=0)}return i},round:function(n,t){return 0<=t?parseFloat(gx.num.decimalAdjust("round",n,-t).toFixed(t)):gx.num.roundNeg(n,t)},decimalAdjust:function(n,t,i){return"undefined"==typeof i||0==+i?Math[n](t):(t=+t,i=+i,isNaN(t)||!("number"==typeof i&&0==i%1))?NaN:(t=t.toString().split("e"),t=Math[n](+(t[0]+"e"+(t[1]?+t[1]-i:-i))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+i:i)))},roundNeg:function(n,t){var n=n.toString(),r=n.indexOf("."),u="",i="",i=0,u="."+"0000000000000000000000".substring(1,parseInt(t,0)+1)+"5",i=parseFloat(u);return-1==r?(i="0000000000000000000000",u=""+n):0===r?(u="0",i=0+parseFloat(n)+parseFloat(i),n=i+"0000000000000000000000",i=""+n.substring(1,n.length)):(i=parseFloat(n)+i,u=i.toString().substring(0,r),i=""+(""+i+"0000000000000000000000").substring(r+1,r+1+parseInt(t,0))),i=i.substring(0,parseInt(t,0)),r=parseFloat(u+"."+i),isNaN(r)&&(r=0),r},normalize_decimal_sep:function(n,t,i,r){var u=r.lastIndexOf(i);return 0<=n.indexOf(".")&&","==i&&-1==u&&r.lastIndexOf(".")==r.indexOf(".")?r=r.replace(".",i):-1==n.indexOf(t)&&"."==i&&-1==u&&r.lastIndexOf(",")==r.indexOf(",")&&(r=r.replace(",",i)),r},valid_decimal:function(n,t,i,r){var u=n.value,o=u.lastIndexOf(i),s=!0,f=gx.O.getValidStructFld(n),u=this.normalize_decimal_sep(gx.rtPicture(f,n),t,i,u),e;if(gx.lang.emptyObject(f)||(u=gx.num.extractValue(gx.rtPicture(f,n),u)),o=RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+t+"[0-9]{3})*(\\"+i+"[0-9]*)?)?[ ]*$"),u)if(o.test(u)){o=u.lastIndexOf(i);e=u;-1!=o&&(e=u.slice(0,o+parseInt(r,10)+1));try{gx.lang.emptyObject(f)||(e=gx.num.formatNumber(e,f.dec,gx.rtPicture(f,n),f.len,f.sign,!0));"."!=i&&"SELECT"==n.tagName&&(e=gx.num.toInvariant(e,t,i))}catch(h){s=!1}s&&e!=gx.text.trim(n.value)&&(n.value=e,-1!=navigator.userAgent.indexOf("Firefox/2"))&&n.onchange()}else s=!1;else s=!0;s?gx.csv.setFormatError(n,!1):(gx.csv.setFormatError(n),gx.fn.alert(n,gx.getMessage("GXM_badnum")))},valid_integer:function(n,t){var e,i,u,r=gx.O.getValidStructFld(n),f=gx.lang.emptyObject(r);if(i=n.value,f||(i=gx.num.extractValue(gx.rtPicture(r,n),i)),e=!f&&-1!=gx.rtPicture(r,n).indexOf(",")?RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+t+"[0-9]{3})*[ ]*$"):/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/,u=!0,i)if(e.test(i)){try{f||(i=gx.num.formatNumber(i,r.dec,gx.rtPicture(r,n),r.len,r.sign,!0))}catch(o){u=!1}i!=gx.text.trim(n.value)&&(n.value=i,-1!=navigator.userAgent.indexOf("Firefox/2"))&&n.onchange()}else u=!1;else u="number"===n.type&&"undefined"!=typeof n.validity?n.validity.valid:!0;u?gx.csv.setFormatError(n,!1):(gx.csv.setFormatError(n),gx.fn.alert(n,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(n){return"string"==typeof n?n.replace(t,function(n){return 8213==n.charCodeAt()||12540==n.charCodeAt()?String.fromCharCode(45):String.fromCharCode(n.charCodeAt()-65248)}):n}}}();gx.color={rgb:function(n,t,i){return 65536*n+256*t+i},css:function(n){return"rgb"==n.substring(0,3)?eval(n):"#"==n.charAt(0)?parseInt(n.substring(1),16):0},html:function(n){n=this.toHex(n);gx.lang.emptyObject(n)&&(n="000000");var n=gx.text.padl(n,6,"0"),t={};return t.Hexa=n,t.Html="#"+n,t.R=parseInt(n.substring(0,2),16),t.G=parseInt(n.substring(2,4),16),t.B=parseInt(n.substring(4,6),16),t},fromRGB:function(n,t,i){var r={};return"undefined"!=typeof n&&"undefined"!=typeof t&&"undefined"!=typeof i&&(r.Hexa=this.toHex(n)+this.toHex(t)+this.toHex(i),r.Html="#"+r.Hexa,r.R=n,r.G=t,r.B=i),r},ARGBToHex:function(n){var t=this.toHex(n>>16&255),i=this.toHex(n>>8&255),n=this.toHex(n&255);return t+i+n},toHex:function(n){if(void 0===n)return"000000";if(0>n)return gx.color.ARGBToHex(n);if(0===n)return n+"0";for(var i=0,t="";0!==n;)i=n%16,n=(n-i)/16,t="0123456789ABCDEF".charAt(i)+t;return 0!=t.length%2&&(t="0"+t),t}};gx.grid=function(n){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,"0":"none",1:"uniform",2:"header",3:"report"},getImplClass:function(n,t){if(t){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,n.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0);gx.lang.inherits(t,gx.ui.grid,!0);var i=new t(gx.$);return n&&(i.ParentObject=n.parentObject,i.ControlName=n.gridName,n.parentObject.setUserControl(i)),i}return n.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(n){var t=n,t=void 0!=n?n:1;return 0!=t?t:9999},setActiveGridRow:function(n,t){"string"==typeof n&&(n=(n=gx.O.getGrid(n))?n.grid:null);n&&n.gxAllowSelection&&(gx.csv.currentGridSelection=n,"undefined"!=typeof t&&(n.toggleRowHoverById(n.gxHoveredRowId,!1),n.gxHoveredRowId=parseInt(t,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(n){n&&gx.csv.currentGridSelection!==n.grid||(delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler))},clearActiveGridHandler:function(n){n=gx.evt.source(n.event);n=gx.fn.rowGridId(n);n=gx.fn.getGridObj(n);n&&n.grid.gxAllowSelection||gx.grid.clearActiveGrid()},handleKeyUpEvt:function(n){var t=gx.csv.currentGridSelection,i=!1;if(!t||!t.gxAllowSelection||t.gxAllowHovering)return i;switch(n.keyCode){case 38:case 40:t.ownerGrid.setSelection(t.ownerGrid.getSelection(),!0);gx.evt.cancel(n,!0);i=!0}return i},handleKeyPressEvt:function(n){var t=gx.csv.currentGridSelection,i=!1,r;if(!t||!t.gxAllowHovering&&!t.gxAllowSelection)return i;r=t.gxAllowHovering;switch(n.keyCode){case 38:r?i=t.setPreviousRowHovered():t.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(n,!0);break;case 40:r?i=t.setNextRowHovered():t.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(n,!0);break;case 13:i=t.ownerGrid.setSelection(t.gxHoveredRowId)&&t.gxOnLineActivate}return i},grid:function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt){var ni=function(n){return function(t){return t=this.parentObject.getGridById(u,t||gx.fn.currentGridRow(u)),n.call(this,t||this)}.closure(this)}.closure(this),dt,kt,gt;this.parentObject=t;this.parentObject["sub"+f+"_Rows"]=ni(function(n){return n.grid.pageSize/n.grid.gxGridCols});this.parentObject[e.toUpperCase()+(h?"_MPAGE":"")+"_nFirstRecordOnPage"]=ni(function(n){return n.grid.firstRecordOnPage});this.parentObject[e.toUpperCase()+(h?"_MPAGE":"")+"_nEOF"]=ni(function(n){return n.grid.eof});this.gridLvl=i;this.gridLvlName=r;this.gridId=u;this.gridName=f;this.realGridName=e;this.containerName=o||this.gridName+"Container";this.parentName=c||"";this.pagingParms=[];this.lvlKey=l||[];this.isFreestyle=a||!1;this.isResponsive=at||!1;this.allowHovering=(this.allowSelection=y||!1)&&p||!1;this.allowCollapsing=ct||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=ft||!1;this.hasAddlines=et||!1;this.hasForEachLine=ot||!1;this.width=void 0!=nt?nt:0;this.widthUnit=tt||"";this.height=void 0!=it?it:0;this.heightUnit=rt||"";this.gridCols=void 0!=v?v:1;this.gridCols=0!=this.gridCols?this.gridCols:9999;this.gridRows=void 0!=w?w:5;this.gridResponsiveCols=vt||[1,1,1,1];this.usePaging=(this.usePaging=b||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=k||!1;this.defaultSetsContext=d||!1;this.boundedCollType=g||"";this.boundedCollName=lt||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=s;this.isMasterPageGrid=h;this.htmlTags="";this.onLineActivate=ht;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=st;this.grid=gx.grid.getImplClass(this,st);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=ut?ut:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=wt;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||"undefined"===this.grid.useHiddensForControlValues);this.gxCreateGridCode=function(n){var i,u=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+n,this.gridName,this.containerName+"_"+n,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,!1,0,this.grid.isAbstract,this.InverseLoading),t=this.grid,r=u.grid;if(r.ControlLvl=this.gridLvl,r.GridId=this.gridId,r.GridRow=n,r.GridBaseName=this.gridName,t.Properties)for(i in t.Properties)r.setProp(i,t.Properties[i],t[i],t.PropTypes[i]);if(t.DynProperties)for(n=0,len=t.DynProperties.length;n<len;n++)i=t.DynProperties[n],r.setDynProp(i,t.Properties[i],t[i],t.PropTypes[i],!0);return u}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=yt;this.InverseLoading=bt;this.ScrollType=pt;this.isAbstract=wt;this.addColumnDinCode=function(n,t){this.gxAddColumnsCode.push(function(){n.apply(this,t)})};this.addSingleLineEdit=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){this.addColumnDinCode(this.addSingleLineEdit,arguments);var rt=this.newColumn(r,e,l,o);rt.visible=w;rt.htmlName=i;rt.gxId=t;rt.gxAttId=n;rt.gxAttName=f;rt.gxTooltip=u;rt.gxWidthUnit=s;rt.gxColSize=c;rt.gxSetsContext=k;rt.gxCssClass=g;rt.gxColumnClass=tt;rt.gxColumnHeaderClass=it;rt.gxControl=new gx.html.controls.singleLineEdit;rt.gxControl.column=rt;rt.gxControl.isPassword=d;rt.gxControl.visible=rt.visible;rt.gxControl.dataType=rt.type;rt.gxControl.clickEvent=a;this.grid.addColumn(rt)};this.addPostingVar=function(n){this.postingVariables.push(n)};this.addMultipleLineEdit=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var k=this.newColumn(r,f,a,e);k.visible=y;k.htmlName=i;k.gxId=t;k.gxAttId=n;k.gxAttName=u;k.gxWidthUnit=o;k.gxSetsContext=p;k.gxColumnClass=b;k.gxControl=new gx.html.controls.multipleLineEdit;k.gxControl.column=k;k.gxControl.dataType=k.type;k.gxControl.visible=k.visible;k.gxControl.heightUnit=h;k.gxControl.clickEvent=v;this.grid.addColumn(k)};this.addBlob=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){this.addColumnDinCode(this.addBlob,arguments);var y=this.newColumn(r,f,"left",s);y.visible=l;y.htmlName=i;y.gxId=t;y.gxAttId=n;y.gxAttName=u;y.gxWidthUnit=c;y.gxSetsContext=a;y.gxColumnClass=v;y.gxControl=new gx.html.controls.blob;y.gxControl.column=y;y.gxControl.dataType=y.type;y.gxControl.visible=y.visible;y.gxControl.height=o;y.gxControl.width=s;this.grid.addColumn(y)};this.addRadioButton=function(n,t,i,r,u,f,e,o,s,h,c){this.addColumnDinCode(this.addRadioButton,arguments);var l=this.newColumn(r,f,"left","");l.visible=s;l.htmlName=i;l.gxId=t;l.gxAttId=n;l.gxAttName=u;l.gxSetsContext=h;l.gxColumnClass=c;l.gxControl=new gx.html.controls.radio;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.vertical=o;l.gxControl.visible=l.visible;l.gxControl.clickEvent=e;this.grid.addColumn(l)};this.addComboBox=function(n,t,i,r,u,f,e,o,s,h,c,l,a){this.addColumnDinCode(this.addComboBox,arguments);var v=this.newColumn(r,f,"left",c);v.visible=s;v.htmlName=i;v.gxId=t;v.gxAttId=n;v.gxAttName=u;v.gxSetsContext=h;v.gxWidthUnit=l;v.gxColumnClass=a;v.gxControl=new gx.html.controls.comboBox;v.gxControl.column=v;v.gxControl.dataType=v.type;v.gxControl.rtEnabled=1==o;v.gxControl.visible=v.visible;v.gxControl.clickEvent=e;this.grid.addColumn(v)};this.addListBox=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){this.addColumnDinCode(this.addListBox,arguments);var y=this.newColumn(r,f,"left",c);y.visible=s;y.htmlName=i;y.gxId=t;y.gxAttId=n;y.gxAttName=u;y.gxSetsContext=h;y.gxWidthUnit=l;y.gxColumnClass=a;y.gxControl=new gx.html.controls.listBox;y.gxControl.column=y;y.gxControl.dataType=y.type;y.gxControl.rows=void 0!==v?v:4;y.gxControl.rtEnabled=1==o;y.gxControl.visible=y.visible;y.gxControl.clickEvent=e;this.grid.addColumn(y)};this.addCheckBox=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){this.addColumnDinCode(this.addCheckBox,arguments);var p=this.newColumn(r,e,"left",a);p.visible=c;p.htmlName=i;p.gxId=t;p.gxAttId=n;p.gxAttName=f;p.gxChecked=o;p.gxUnChecked=s;p.gxSetsContext=l;p.gxWidthUnit=v;p.gxColumnClass=y;p.gxControl=new gx.html.controls.checkBox;p.gxControl.column=p;p.gxControl.checkedValue=o;p.gxControl.uncheckedValue=s;p.gxControl.dataType=p.type;p.gxControl.visible=p.visible;p.gxControl.clickEvent=h;this.grid.addColumn(p)};this.addBitmap=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addBitmap,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.image;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addVideo=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addVideo,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.video;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addAudio=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addAudio,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.audio;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addFile=function(n,t,i,r,u,f,e,o,s,h,c,l){this.addColumnDinCode(this.addVideo,arguments);var a=this.newColumn(h,"","left",r);a.htmlName=t;a.gxId=i;a.gxAttId=n;a.gxWidthUnit=u;a.gxControl=new gx.html.controls.file;a.gxControl.column=a;a.gxControl.dataType=a.type;a.gxControl.width=r;a.gxControl.widthUnit=u;a.gxControl.height=f;a.gxControl.heightUnit=e;a.gxControl.clickEvent=o;a.gxCssClass=c;a.gxColumnClass=l;this.grid.addColumn(a)};this.addTextBlock=function(n,t,i){this.addColumnDinCode(this.addTextBlock,arguments);var r=this.newColumn("","","left");r.gxId=i;r.htmlName=n;r.gxControl=new gx.html.controls.textBlock;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.clickEvent=t;this.grid.addColumn(r)};this.addLabel=function(n){this.addColumnDinCode(this.addLabel,arguments);var t=this.newColumn("","","left");t.htmlName=n;t.gxControl=new gx.html.controls.label;t.gxControl.column=t;this.grid.addColumn(t)};this.addButton=function(n,t){this.addColumnDinCode(this.addButton,arguments);var i=this.newColumn("","","left");i.htmlName=t;i.gxId=n;i.gxControl=new gx.html.controls.button;i.gxControl.column=i;i.gxControl.dataType=i.type;this.grid.addColumn(i)};this.addGrid=function(n){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(n);var t=this.newColumn("","","left");t.htmlName=n.getContainerControlId();t.gxControl=new gx.html.controls.grid;t.gxControl.column=t;this.grid.addColumn(t)};this.addUsercontrol=function(n,t,i,r,u,f,e,o,s,h){this.addColumnDinCode(this.addUsercontrol,arguments);var c="",l=this.parentObject;l.GridUCsProps&&l.GridUCsProps[u]&&(c=l.GridUCsProps[u].title||"");c=this.newColumn(c,"","left");c.gxUCId=n;c.gxUCLastId=t;c.gxUCClassName=i;c.gxUCContainerName=r;c.gxUCControlName=u;c.gxUCFieldName=f;c.gxShowFunc=e;c.gxC2VFuncs=o;c.gxV2CFuncs=s;c.visible=h;c.gxControl=new gx.html.controls.userControl;c.gxControl.column=c;c.gxControl.dataType=c.type;c.htmlName=u.toUpperCase();c.isUserControl=!0;this.grid.addColumn(c)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.userControlContainer;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("<\/div>")};this.addWebComponent=function(){this.addColumnDinCode(this.addWebComponent,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.webComponent;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.addEmbeddedPage=function(){this.addColumnDinCode(this.addEmbeddedPage,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.embeddedPage;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.addHtmlCode=function(n){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(n)};this.startTable=function(n,t,i){this.addColumnDinCode(this.startTable,arguments);var r=this.newColumn("","","left");r.gxId=t;r.htmlName=n+"_"+t;r.gxControl=new gx.html.controls.table;r.gxControl.column=r;r.gxControl.width=i;r.gxControl.dataType=r.type;this.grid.addColumn(r)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("<\/table>")};this.startRow=function(n,t,i,r,u,f){this.addColumnDinCode(this.startRow,arguments);var e=this.newColumn("","","left");e.gxControl=new gx.html.controls.row;e.gxControl.column=e;e.gxControl.title=n;e.gxControl.align=t;e.gxControl.verticalAlign=i;e.gxControl.backColor=r;e.gxControl.borderColor=u;e.gxControl.cssClass=f;e.gxControl.ownCssClass=f;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("<\/tr>")};this.startCell=function(n,t,i,r,u,f,e,o,s,h){this.addColumnDinCode(this.startCell,arguments);var c=this.newColumn("","","left");c.gxControl=new gx.html.controls.cell;c.gxControl.column=c;c.gxControl.title=n;c.gxControl.align=t;c.gxControl.verticalAlign=i;c.gxControl.backColor=r;c.gxControl.borderColor=u;c.gxControl.height=f;c.gxControl.width=e;c.gxControl.colSpan=o;c.gxControl.rowSpan=s;c.gxControl.cssClass=h;c.gxControl.dataType=c.type;this.grid.addColumn(c)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("<\/div>"):this.currentBuffer.append("<\/td>")};this.startGroup=function(n,t,i,r,u){this.addColumnDinCode(this.startGroup,arguments);var f=this.newColumn("","","left");f.htmlName=n;f.gxControl=new gx.html.controls.group;f.gxControl.column=f;f.gxControl.id=n;f.gxControl.caption=t;f.gxControl.height=i;f.gxControl.width=r;f.gxControl.cssClass=u;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("<\/fieldset>")};this.startDiv=function(n,t,i,r){this.addColumnDinCode(this.startDiv,arguments);var u=this.newColumn("","","left");u.gxId=n;u.htmlName=t+"_"+n;u.gxControl=new gx.html.controls.div;u.gxControl.column=u;u.gxControl.width=r;u.gxControl.height=i;u.gxControl.dataType=u.type;this.grid.addColumn(u)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.divEnd;n.gxControl.column=n;this.grid.addColumn(n)};this.startFormGroup=function(n,t,i,r){this.addColumnDinCode(this.startFormGroup,arguments);var u=this.newColumn("","","left");u.gxId=n;u.htmlName=t+"_"+n;u.gxControl=new gx.html.controls.formGroup;u.gxControl.column=u;u.gxControl.width=r;u.gxControl.height=i;u.gxControl.dataType=u.type;this.grid.addColumn(u)};this.endFormGroup=function(){this.addColumnDinCode(this.endFormGroup,arguments);var n=this.newColumn("","","left");n.gxControl=new gx.html.controls.formGroupEnd;n.gxControl.column=n;this.grid.addColumn(n)};this.newColumn=function(n,t,i,r){return t=this.getColumnType(t),n=new gx.grid.column(n,t,r,i),this.currentBuffer=n.buffer,n.htmlName="",n.gxId="",n.gxAttId="",n.gxAttName="",n};this.getColumnType=function(n){switch(n){case"decimal":case"int":n=gx.types.numeric;break;case"date":n=gx.types.date;break;case"dtime":n=gx.types.dateTime;break;case"boolean":n=gx.types.bool;break;case"GeneXus\\Geolocation":n=gx.types.geolocation;break;default:n=gx.types.character}return n};this.addOldComponent=function(n,t){"undefined"==typeof this.oldCmps[n]&&(this.oldCmps[n]=[]);this.oldCmps[n].push(t)};this.updateOldComponents=function(){for(var i,t=this.grid.rows.length,n=0;n<t;n++)delete this.oldCmps[this.grid.rows[n].gxId];for(i in this.oldCmps){for(t=this.oldCmps[i];0<t.length;)n=t.shift(),gx.fn.deleteHidden(n);delete this.oldCmps[i]}};this.addHidden=function(n){this.hiddens.push(n)};this.addHiddenControl=function(n,t,i){gx.fn.setHidden(n,t);!0!=i&&this.addHidden(n)};this.clearHiddens=function(){for(var n=0;n<this.hiddens.length;n++)gx.fn.deleteHidden(this.hiddens[n]);this.hiddens=[]};dt={};this.setHtmlTags=function(n){var i,n,t;gx.lang.apply(dt,n);i=' style="'+("0"==dt.Visible?"display:none;":"");n=""+(' class="'+dt.Class+'"');t=gx.lang.emptyObject;i+=t(dt.Background)?"":"background:"+dt.Background+";";i+=!t(dt.Backcolor)&&"0"!=dt.Backcolor?"background-color:"+gx.color.html(dt.Backcolor).Html+";":"";i+=!t(dt.Bordercolor)&&"0"!=dt.Bordercolor?"border-color:"+gx.color.html(dt.Bordercolor).Html+";":"";i+=!t(dt.Borderwidth)&&"0"!=dt.Borderwidth?" border-width:"+dt.Borderwidth+";":"";i+=!t(dt.Width)&&"0"!=dt.Width?" width:"+gx.dom.addUnits(dt.Width,this.width==dt.Width?this.widthUnit:"")+";":"";i+=!t(dt.Height)&&"0"!=dt.Height?"max-height:"+gx.dom.addUnits(dt.Height,this.height==dt.Height?this.heightUnit:"")+";":"";n+=t(dt.Align)?"":' align="'+dt.Align+'"';n+=t(dt.Tooltiptext)?"":' title="'+dt.Tooltiptext+'"';n+=t(dt.Cellpadding)?"":' data-cellpadding="'+dt.Cellpadding+'"';n+=t(dt.Cellspacing)?"":' data-cellspacing="'+dt.Cellspacing+'"';this.htmlTags=gx.text.trim(n+(i+'"'));this.grid.gxHtmlTags=this.htmlTags;t(dt.Width)||(this.grid.gxWidth=dt.Width);t(dt.Height)||(this.grid.gxHeight=dt.Height)};kt={};this.setGridStyles=function(n){gx.lang.apply(kt,n);this.grid.header=n.Header;this.visible=void 0!=kt.Visible?gx.lang.gxBoolean(kt.Visible):!0;this.setSortable(void 0!=kt.Sortable?gx.lang.gxBoolean(kt.Sortable):!0);this.background=void 0!=kt.Background?kt.Background:"";this.cssClass=void 0!=kt.Class?kt.Class:"";this.titleBackstyle=void 0!=kt.Backcolorstyle?kt.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=kt.Titlefont?kt.Titlefont:"";this.linesFont=void 0!=kt.Linesfont?kt.Linesfont:"";this.borderWidth=void 0!=kt.Borderwidth?kt.Borderwidth:"";this.toolTipText=void 0!=kt.Tooltiptext?kt.Tooltiptext:"";try{this.backcolor=void 0!=kt.Backcolor?gx.color.html(kt.Backcolor).Html:"";this.titleBackcolor=void 0!=kt.Titlebackcolor?gx.color.html(kt.Titlebackcolor).Html:"";this.titleForecolor=void 0!=kt.Titleforecolor?gx.color.html(kt.Titleforecolor).Html:"";this.linesBackcolorOdd=void 0!=kt.Backcolorodd?gx.color.html(kt.Backcolorodd).Html:"";this.linesBackcolorEven=void 0!=kt.Backcoloreven?gx.color.html(kt.Backcoloreven).Html:"";this.bordercolor=void 0!=kt.Bordercolor?gx.color.html(kt.Bordercolor).Html:""}catch(t){gx.dbg.logEx(t,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=kt.Borderwidth?kt.Borderwidth:"";this.toolTipText=void 0!=kt.Tooltiptext?kt.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(n){if(this.sortable!=n){this.sortable=n;for(var i=this.grid.columns.length,t=0;t<i;t++)this.grid.columns[t].sortable=n}};this.lastRowId=0;this.addRow=function(n){var u,i,f,e=this.lastRowId++,t=gx.grid.rowId(e+1),t=new gx.grid.row(e,n,t,this.grid.gxParentRowId),o;t.gxCmpContext=this.gxComponentContext;t.Grids=n.Grids;t.ownerGrid=this;t.gxLvl=this.gridLvl;this.setRowHiddens(n.Hiddens);for(var s=this.grid.columns,h=s.length,r=0;r<h;r++){if(o=s[r],0!==e)for(f=this.grid.rows[0].gxProps[r],u=n.Props[r].length,i=this.grid.rowsValues?f.length-1:f.length;u<i;u++)t.gxProps[r].push(f[u]);i=n.Props[r];i=i[i.length-1];(f=this.grid.rowsValues)&&!this.autoRefreshing&&(u=f[e],void 0!==u&&0<u.length&&(i=f[e][r]));t.values[r]=i;this.grid.rowsValues&&t.gxProps[r].push(i);this.parentObject.isTransaction()&&(o=this.columnIndexInKey(o.gxAttId),-1!=o&&(t.gxKeyValues[o]=i))}return this.isFreestyle&&(t.IsNew=!0,this.installChildGrids(t)),this.grid.addRow(t),t};this.installChildGrids=function(n){for(var r,t,u,f=this.childGrids.length,i=0;i<f;i++)r=this.childGrids[i],t=r.gxCreateGridCode(n.gxId),t.grid.parentGxObject=this.parentObject,u=(t.isMasterPageGrid?"MP":this.grid.gxCmpContext)+t.realGridName+"Container",t.gxContainerDivName=u+"Div_"+n.gxId,t.gxContainerDataName=u+"Data_"+n.gxId,t.gxContainerValuesName=u+"DataV_"+n.gxId,n.gxGrids.push(t),t.parentGrid=this,t.parentRow=n,this.parentObject.setGrid(t),r.copyPropertiesTo(t),t.grid.gxCmpContext=this.grid.gxCmpContext,t.grid.gxParentRowId=n.gxId,this.installChildGridColumns(t,r)};this.installChildGridColumns=function(n,t){for(var r=t.gxAddColumnsCode.length,i=0;i<r;i++)t.gxAddColumnsCode[i].call(n)};this.copyPropertiesTo=function(n){n.cssClass=this.cssClass;n.titleBackstyle=this.titleBackstyle;n.titleBackcolor=this.titleBackcolor;n.linesBackcolorOdd=this.linesBackcolorOdd;n.linesBackcolorEven=this.linesBackcolorEven;n.grid.gxCssClass=this.grid.gxCssClass;n.grid.gxTitleClass=this.grid.gxTitleClass;n.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;n.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;n.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;n.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(n){if(n&&this.parentObject.isTransaction())for(var t in n)gx.fn.setHidden(t,n[t])};this.executeEvent=function(n,t){gx.evt.setGridEvt(this.gridId.toString(),t);this.instanciateRow(t);this.parentObject[n].call(this.parentObject,t)};this.getHiddenName=function(n){var t="";return this.parentRow&&(t="_"+this.parentRow.gxId),this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+n+t};this.updatePagingVars=function(n,t){void 0==n&&void 0==t?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=n,this.grid.firstRecordOnPage=t)};this.setPagingVars=function(n,t){this.grid.eof=n;this.grid.firstRecordOnPage=t;gx.fn.setHidden(this.getHiddenName("nEOF"),n);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),t)};this.clearDefaultEventHandlers=function(){var i=0,n,t,u,r;if(this.defaultDragable||this.defaultSetsContext)for(i=this.grid.rows.length,n=0;n<i;n++)t=this.containerName+"Row_"+this.grid.rows[n].gxId,this.defaultDragable&&gx.fx.dnd.deleteSource(t),this.defaultSetsContext&&gx.fx.ctx.deleteSetter(t);for(i=this.grid.columns.length,n=0;n<i;n++)if(t=this.grid.columns[n],!0==t.gxSetsContext)for(u=this.grid.rows.length,r=0;r<u;r++)gx.fx.ctx.deleteSetter(t.htmlName+"_"+this.grid.rows[r].gxId)};this.setDefaultEventHandlers=function(){var r=0,f=this.additiveResponse?this.firstAdditiveRow:0,u=this.getRowAsTypes(),t,i,n,e;if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(r=this.grid.rows.length,t=f;t<r;t++)i=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[t].gxId,i=gx.dom.byId(i),null!=i&&(i.gxGrid=this.containerName,i.gxGridName=this.gridName,i.gxId=this.grid.rows[t].gxId),i=this.containerName+"Row_"+this.grid.rows[t].gxId,n=function(n){return this.returnRowData(n)}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,i,this.cssClass,u,n),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,i,this.cssClass,u,n);else r=this.grid.gxCmpContext+this.containerName+"Div",n=function(){return this.returnGridData()}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,r,this.cssClass,[this.boundedCollType],n),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,r,this.cssClass,[this.boundedCollType],n);if(this.parentGrid)for(n=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"],r=this.grid.rows.length,t=f;t<r;t++)i=this.containerName+"Row_"+this.grid.rows[t].gxId,n&&n.hdl&&gx.fx.ctx.addSetter(this.parentObject,i,this.cssClass,u,n.hdl);if(!this.additiveResponse)for(r=this.grid.columns.length,t=0;t<r;t++)if(u=this.grid.columns[t],!0==u.gxSetsContext)for(i=this.grid.rows.length,n=f;n<i;n++)e=gx.dom.el(this.gxComponentContext+u.htmlName+"_"+this.grid.rows[n].gxId,!0),null!=e&&(e.gxHtmlName=u.htmlName,gx.fx.ctx.addSetter(this.parentObject,u.htmlName+"_"+this.grid.rows[n].gxId,"",[u.gxAttName],this.returnColumnContext))};this.infinite_scrolling_ensure_loading_scroll=function(){if(!this.mock_element){var t=n("#"+this.getGridInnerTableId());this.mock_element=n('<div class="gx-grid-loading" style="visibility:hidden;">'+gx.getMessage("GXM_Loading")+"<\/div>");this.mock_element.insertAfter(t)}};this.infinite_scrolling_before_scroll=function(){this.infinite_scrolling_ensure_loading_scroll();!0!==this.isScrolling&&(this.mock_element.css("visibility","visible"),this.isScrolling=!0)};this.hide_loading_message=function(){this.mock_element&&this.mock_element.css("visibility","hidden")};this.remove_loading_message=function(){this.mock_element&&(n(this.mock_element).remove(),this.mock_element=void 0)};this.infinite_scrolling_after_scroll=function(){var t=this.getGridInnerTableId();n("#"+t);this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.hide_loading_message()};this.fixColumnsWidth=function(t){if(!this.isFreestyle){var i=this.getGridInnerTableId();rows=n("#"+i).find("tbody tr[data-gxrendering_row]");n.each(rows,function(i,r){n(r).children().map(function(n,i){i.style.width=t[n]+"px";i.style.maxWidth=t[n]+"px"})});rows.removeAttr("data-gxrendering_row")}};this.unInstallScrollListener=function(){this.ScrollingElement&&(n(this.ScrollingElement).scrollTop(0),this.remove_loading_message(),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(t){var f,i,r,e,o=gx.grid.scrollingThreshold||4,s=function(){var u,i,r,e,s;return this.InverseLoading?t.scrollTop<=30*t.clientHeight/100:(1==this.ScrollType?(r=n(window),u=n(document).height(),i="CSS1Compat"===(document.compatMode||""),i=void 0!==window.pageXOffset?window.pageYOffset:i?document.documentElement.scrollTop:document.body.scrollTop,r=r.height()):(u=t.scrollHeight,i=t.scrollTop,r=t.clientHeight),e=i,s=f,f=e,e<s?!1:u-i-r<r*o)}.closure(this),u=this;i=!0;e=function(){i=!0;r&&(r=!1,u.ScrollingHandler())};f=0;r=!1;this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(i){var n=u.grid;!0!==u.isScrolling&&!n.isLastPage()&&s()&&(u.infinite_scrolling_before_scroll(),n.changeGridPage("NEXT",!1));i=!1;setTimeout(e,300)}else r=!0})};this.infinite_scrolling_ensure_loading_scroll();t.addEventListener("scroll",this.ScrollingHandler,{passive:!0})};this.installFixedGridHeader=function(){var t;if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&0<this.grid.rows.length&&(t=this.getContainerControl(),t)){var i=n(t),s=this,u=this.getGridInnerTableId(),t=n("#"+u),r=t.find("tbody tr:first").children(),o=n("#"+u+"> tbody"),f=n("#"+u+"> thead > tr"),e=n("#"+u+"> thead"),u=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=t.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=r.map(function(){return n(this).width()}).get());i.addClass("gx-infinite-scrolling-container");(!this.width||u)&&(u?(i.addClass("gx-grid-fixed-header-ie7"),i.wrap("<div style='position:relative;'>"),t.css("width",""),i.width(this.fixedContainerWidth+n.position.scrollbarWidth()+2),r=e.position(),f.css("top",r.top),r=f.outerHeight(!0),i.css("paddingTop",gx.dom.addUnits(r,"px")),t.attr("data-bkgstyle",""),r=t.css("background-color"),e=f.css("background-color"),r&&(!e||"transparent"===e)&&f.css("background-color",r)):t.width(this.fixedContainerWidth+n.position.scrollbarWidth()+2));0<this.fixedColumnsWidth.length&&(t.find("thead tr").children().each(function(t,i){n(i)[0].style.width=s.fixedColumnsWidth[t]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));o.addClass("gx-infinite-scrolling-element");i=u?i:o;t.css("max-height","");i.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}};this.handleInfiniteScrolling=function(){var f,e,r,t,i,l,s;if(this.InfiniteScrolling&&(i=this.getContainerControl(),i&&(f=n(i),f.removeClass("gx-infinite-scrolling-container"),0<this.grid.rows.length))){if(e=this,r=this.getGridInnerTableId(),1==this.ScrollType)t=window,this.fixedColumnsWidth=[];else{this.ScrollingHeight&&n(t).css({height:this.ScrollingHeight});var u=n("#"+r),v=u.find("tbody tr:first").children(),o=n("#"+r+">tbody"),c=n.grep(this.grid.columns,function(n){return!0==n.visible}).length;this.fixedColVisibleCount!=c&&(this.fixedColVisibleCount=c,this.isFreestyle||(this.fixedColntainerWidth=u.width(),this.fixedColumnsWidth=v.map(function(){return this.offsetWidth}).get()));f.addClass("gx-infinite-scrolling-container");this.isFreestyle||u.width(this.fixedColntainerWidth+n.position.scrollbarWidth()+2);!this.isFreestyle&&0<this.fixedColumnsWidth.length&&(u.find("thead tr").children().each(function(t,i){n(i)[0].style.width=e.fixedColumnsWidth[t]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));t=0<o.length?o[0]:i;n(t).addClass("gx-infinite-scrolling-element")}if(this.ScrollingHeight&&1!=this.ScrollType&&n(t).css({height:this.ScrollingHeight}),this.ScrollingElement=t,this.infinitScrollingInstalled=!0,i=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector,l=this.infinite_scrolling_before_scroll.closure(this),!this.ScrollingHeight&&(this.isFreestyle||this.grid.rows.length>=this.grid.pageSize&&0<this.grid.pageSize)&&(1!=this.ScrollType&&(s=n(t).height()-2,n(t).css({height:s})),this.ScrollingHeight=s),t){var h=0,y=function(){var n=!1;return 10==h?(h=0,!1):((n=this.InverseLoading?0==t.scrollTop:1==this.ScrollType?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:document.body.scrollHeight<=document.body.clientHeight:t.clientHeight==t.scrollHeight)&&h++,n)}.closure(this),a=function(){if(!this.grid.isLastPage()&&y())return l(),this.grid.changeGridPage("NEXT",!1).then(function(){e.InverseLoading&&(t.scrollTop=t.scrollHeight);a()})}.closure(this);gx.lang.requestAnimationFrame(function(n,t,i,r){a();this.installScrollListener(n,t,i,r)}.closure(this,[this.ScrollingElement,r,o,i]))}}};this.returnColumnContext=function(n){var t="",t="SPAN"==n.nodeName?gx.dom.spanValue(n):gx.fn.getControlValue_impl(n.id);return null!=t?t:""};this.returnRowData=function(n){var r={},u,t,i;if(n=this.grid.getRowByGxId(n.gxId))for(u=this.grid.columns.length,t=0;t<u;t++)i=this.grid.columns[t].gxAttName,""!=i&&(r[i]=n.values[t]);return r};this.returnGridData=function(){for(var i,r,u=[],f=this.grid.rows.length,n=0;n<f;n++){i={};u[n]=i;for(var e=this.grid.rows[n],o=this.grid.columns.length,t=0;t<o;t++)r=this.grid.columns[t].gxAttName,""!=r&&(i[r]=e.values[t])}return u};this.doDrop=function(n){this.getNewRows(void 0!=n.length?ropObj.length:1,null,function(t){this.addDropedRows(t,n)})};this.addDropedRows=function(n,t){var n,r,i;if(n.gxHiddens&&gx.fn.setJsonHiddens(null,n.gxHiddens),n=n.gxContainer?n.gxContainer:n,r=t.length,void 0!=r)for(i=0;i<r;i++)this.setDroppedRow(n[i],t[i]);else this.setDroppedRow(n[0],t);this.setNewRows(n)};this.setDroppedRow=function(n,t){for(var f=this.grid.columns.length,i=0;i<f;i++){var e=n.Props[i],r=this.grid.columns[i].gxAttName,u="";""!=r&&void 0!=t[r]&&(u=t[r]);e.Value=u;e.FormattedValue=u}};this.getRowAsTypes=function(){for(var t,i=[],r=this.grid.columns.length,n=0;n<r;n++)t=this.grid.columns[n].gxAttName,""!=t&&i.push(t);return i};this.addRows=function(n){var i=n.Count,t;for(this.grid.rowsValues=n.values,t=0;t<i;t++)this.addRow(n[t])};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var n=this.grid.rows[this.grid.rows.length-1];return n.gxExists()||n.gxIsMod()?!0:!1};this.getNewRows=function(n,t,i){var i=void 0!=i?i:this.setNewRows,r=gx.util.browser.isFirefox()?"keypress":"keydown";null==t||(t.type==r&&(32==t.charCode||32==t.keyCode||13==t.keyCode)||"click"==t.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,n+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,i),gx.csv.pkDirty=!1,null!=t&&gx.evt.cancel(t,!0)):null!=t&&(32==t.keyCode||13==t.keyCode)&&gx.evt.cancel(t,!0)};this.setNewRows=function(n){return this.setNewRows_impl(n,function(){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(n){return n.gxHiddens&&gx.fn.setJsonHiddens(null,n.gxHiddens),n=n.gxContainer?n.gxContainer:n,this.setNewRows_impl(n,function(n){this.loadGrid({rowProps:n,isPostback:!0,addRows:!0})})};this.setNewRows_impl=function(n,t){var n,r,i;if(n.gxHiddens&&gx.fn.setJsonHiddens(null,n.gxHiddens),n=n.gxContainer?n.gxContainer:n,void 0!=n.Count){for(i=0,this.grid.rowsValues||(this.grid.rowsValues=[]),this.grid.rowsValues=this.grid.rowsValues.concat(n.values),i=0;i<n.Count;i++)r=this.addRow(n[i]),gx.fn.setCurrentGridRow(this.gridId,r.gxId);0<n.Count&&(this.addingRows=!0,t.call(this,n),this.addingRows=!1,this.setFocusFirstControl(n[0]))}return r};this.gxNewRowFocused=function(n){n.style.textDecoration="underline";var t=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(n,t,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(n){var t=gx.evt.source(n);void 0!=t&&n.ctrlKey&&46==n.keyCode&&(this.setRowDeleted(t),gx.evt.cancel(n,!0))};this.gxHasDuplicateKey=function(){for(var n,u=[],f=this.grid.rows,e=f.length,t=0;t<e;t++)if(n=f[t],(n.gxExists()||n.gxIsMod())&&!n.gxDeleted()){for(var i="",o=n.gxKeyValues.length,r=0;r<o;r++)i+=n.gxKeyValues[r].toString();if(void 0!=u[i])return!0;u[i]=1}return!1};this.columnIndexInKey=function(n){for(var i=this.lvlKey.length,t=0;t<i;t++)if(this.lvlKey[t]==n)return t;return-1};this.refreshVars=[];this.addRefreshingVar=function(n){var t,r,i;if(!gx.lang.emptyObject(n))if(t="",r=function(){this.filterVarChanged()},this.refreshVars[this.refreshVars.length]=n,n.fld){if(i=gx.dom.el(this.gxComponentContext+n.fld,!1,!0),void 0!=i&&gx.lang.emptyObject(n.hc)&&(t="radio"==i.type||"checkbox"==i.type?"click":"SELECT"==i.tagName?"change":gx.evt.eachKeyAutorefreshType(n.type)?["keyup","input"]:"blur",""!=t))if("radio"==i.type)for(var i=gx.dom.byName(this.gxComponentContext+n.fld),n=i.length,u=0;u<n;u++)gx.evt.attach(i[u],t,r,this);else"search"==i.type&&(t=[t,"search"]),gx.evt.attach(i,t,r,this)}else if((t=this.parentObject.VarControlMap[n.rfrVar])&&(t=this.parentObject.getValidStructFld(t.id))&&t.isuc)for(i in t.ucInstances)t.ucInstances.hasOwnProperty(i)&&(t.ucInstances[i].autoRefreshFn=r.closure(this))};this.refreshParms=[];this.addRefreshingParm=function(n){gx.lang.emptyObject(n)||(this.refreshParms[this.refreshParms.length]=n)};this.doRefresh=function(){this.callAsyncRefresh(this.getRefreshParmsUrl())};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var n=this.getRefreshParmsUrl();this.lastRefreshParms!=n&&(this.lastRefreshParms=n,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var i,n,r=this.refreshVars.length,t=0;t<r;t++)if(n=this.refreshVars[t],"undefined"==typeof n.rfrVar&&(i=gx.fn.getHidden(this.gxComponentContext+"GXH_"+n.fld),n=n.val(),void 0!==i&&i!=n))return!0;return!1};this.getRefreshParmsUrl=function(n){return this.getParmsValues(n,this.refreshParms).join(",")};this.getParmsValues=function(n,t){var c=gx.O,o,r,l=t.length,e=[],s,i,f,h,u;for(gx.setGxO(this.parentObject),s=0;s<l;s++)i=t[s],i&&("function"==typeof i.c2v&&i.c2v(),"function"==typeof i.v2bc&&i.v2bc.call(gx.O),"undefined"!=typeof i.rfrVar)&&(r=gx.fn.vStructForVar(i.rfrVar),r||!(r=gx.fn.getVarControlMapForVar(i.rfrVar))||n||(f=this.parentObject.getValidStructFld(r.id),f&&f.isuc&&(h=f&&f.grid?gx.fn.currentGridRowImpl(f.grid):void 0,(f.getUCInstance(h)||f.uc).execC2VFunctions())),r&&("undefined"==typeof i.rfrProp||this.isValueProperty(i.rfrProp))&&(o=r.type)),"undefined"!=typeof i.rfrVar?(r=ctrlName=colVStruct=void 0,"undefined"!=typeof i.rfrProp?("undefined"!=typeof i.gxAttId&&(u=this.grid.getColumnByGxAttId(i.gxAttId)),u||(u=this.grid.getColumnForVar(i.rfrVar)),u?(i=i.rfrProp.toLowerCase(),r=u.hasOwnProperty(i)?u[i]:u.gxControl[i],this.isValueProperty(i)&&u.gxControl.type==gx.html.controls.types.image&&(r=gx.util.removeBaseUrl(r)),(colVStruct=this.parentObject.getValidStruct(u.gxId))&&this.isValueProperty(i))&&(o=colVStruct.type):r=""):("undefined"!=typeof this.parentObject.VarControlMap[i.rfrVar]&&(ctrlName=this.parentObject.VarControlMap[i.rfrVar].id),gx.lang.emptyObject(this.parentObject[i.rfrVar])?"undefined"==typeof r&&"undefined"!=typeof ctrlName&&(r=gx.fn.getHidden(this.gxComponentContext+ctrlName)):r=this.parentObject[i.rfrVar],"object"==typeof r&&"date"!=o&&"dtime"!=o&&(r=gx.json.serializeJson(r))),e.push(this.getFormattedParm(r,o))):"string"==typeof i.gxGrid?(r=gx.O.getGridByBaseName(i.gxGrid),"string"==typeof i.rfrProp&&"Rows"==i.rfrProp&&e.push(r?r.grid.pageSize:9999)):(gx.lang.emptyObject(i.hc)?e.push(this.getFormattedVStructParm(i)):(r=gx.fn.getHidden(this.gxComponentContext+"GXH_"+i.fld),e.push(encodeURIComponent(n&&"undefined"!=typeof r?r:this.parentObject[i.hc]))),gx.fn.setHidden(this.gxComponentContext+"GXH_"+i.fld,i.val()));return this.parentObject.IsComponent&&e.push(encodeURIComponent(this.parentObject.CmpContext)),gx.setGxO(c),e};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.isValueProperty=function(n){return"undefined"!=typeof n&&"value"==n.toLowerCase()};this.getFormattedVStructParm=function(n){var t;return"date"==n.type||"dtime"==n.type?(t=gx.dom.el(this.gxComponentContext+n.fld),t="undefined"!=typeof t.value?t.value:gx.dom.spanValue(t)||t):t=n.val(),this.getFormattedParm(t,n.type)};this.getFormattedParm=function(n,t){return"date"===t?n=gx.date.urlDate(n,gx.dateFormat):"dtime"===t&&(n=gx.date.urlDateTime(n,gx.dateFormat)),encodeURIComponent(n)};this.callAsyncRefresh=function(n,t){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0));gx.evt.setReady(!1);var i=gx.util.executionContext.getContext();this.refreshTimer=window.setTimeout(function(){gx.util.executionContext.changedContext(i)||(this.autoRefreshing||gx.evt.processing?this.callAsyncRefresh(n):(gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:!0}),typeof n=="undefined"&&(n=this.getRefreshParmsUrl()),gx.ajax.refreshGrid(this,n),gx.evt.setReady(!0)))}.closure(this),t||400)};this.updatePropsHidden=function(n){var t=this.getDataHiddenName();gx.fn.setHidden(t,n)};this.updatePagingVarsAfterRefresh=function(n){if(this.usePaging){var t=this.grid.gxGridName.toUpperCase()+"_nEOF",i=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(n[t],n[i])}};this.getSelection=function(){if(this.allowSelection)for(var t=this.grid.rows.length,n=0;n<t;n++)if(this.grid.rows[n].selected)return n;return-1};this.setNextRowSelected=function(n){var t=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(t,n);this.grid.keepGridItemVisible(t)};this.setPreviousRowSelected=function(n){var t=Math.max(this.getSelection()-1,0);this.setSelection(t,n);this.grid.keepGridItemVisible(t)};this.setProperty=function(n){if(n.Selectedindex)if(n=Number(n.Selectedindex),-1==n)this.setSelection(n);else return this.setSelectionRowCtrl(this.grid.getRowByPos(n));return!1};this.setSelection=function(n,t){if(this.allowSelection){if(-1==n)return this.grid.setRowSelected(void 0,"",void 0,void 0,t),!0;if(0<=n)return this.setSelectionRowCtrl(this.getRowCtrlByIdx(n),t)}return!1};this.setSelectionRowCtrl=function(n,t){return this.allowSelection&&n?(this.grid.setRowSelected(n,n.getAttribute("data-gxrow"),void 0,void 0,t),!0):!1};this.getRowCtrlByIdx=function(n){return gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+gx.grid.rowId(n+1))};this.blankGridRows=function(){this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);this.InfiniteScrolling&&this.additiveResponse||(this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues)};this.setRowDeleted=function(n){var t=null,t="string"==typeof n?this.grid.getRowByGxId(n):void 0==n.gxId?this.getRowFromHtmlCtrl(n):n;t.setDeleted(!t.gxDeleted());this.setRowModified(t.gxId);gx.fn.removeGridRow(t.gxId,this.gridId.toString());this.refreshGrid({loadChildGrids:!1});gx.dom.indexElements()};this.setFocusFirstControl=function(n){for(var t,i=0;i<n.Count;i++)if(t=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId),t&&(t=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[i].htmlName+"_"+t.gxId),void 0!=t&&gx.fn.isAccepted(t))){gx.grid.lastFocusCtrl=this.grid.columns[i].gxId;gx.fn.setFocus(t);break}};this.instanciateRow=function(n){var h=gx.O,e,f,s,u,o,t,i,r;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{if(t=n,"string"==typeof t&&(t=this.grid.getRowByGxId(n)),null!=t)for(gx.fn.setCurrentGridRow(this.gridId,t.gxId),o=t.values.length,u=0;u<o;u++)i=this.grid.columns[u],""!=i.gxId&&(r=this.parentObject.getValidStruct(i.gxId),r&&(this.useUserControlModelValues()?r.v2v&&(r.v2v(this.grid.properties[t.id][i.index].value),gx.fn.setHidden(this.grid.properties[t.id][i.index].id,this.grid.properties[t.id][i.index].value)):"function"==typeof r.c2v&&r.c2v()));else for(gx.fn.setCurrentGridRow(this.gridId,n),o=this.grid.columns.length,u=0;u<o;u++)i=this.grid.columns[u],""!=i.gxId&&(r=this.parentObject.getValidStruct(i.gxId))&&"function"==typeof r.c2v&&r.c2v();e=this.parentObject.UserControls;for(s in e)e.hasOwnProperty(s)&&(f=e[s],f.GridId===this.gridId&&f.GridRow===t.gxId&&(this.parentObject[f.DesignContainerName]=f))}catch(c){gx.dbg.logEx(c,"gxgrid.js","instanciateRow")}return gx.setGxO(h),!0};this.setRenderProp=function(n,t,i,r){this.grid.setProp(n,t,i,r)};this.setRenderDynProp=function(n,t,i,r){this.grid.setDynProp(n,t,i,r)};this.addRenderEventHandler=function(n,t){this.grid.addEventHandler(n,t)};this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid=this.grid.selectedRows=null;this.unInstallScrollListener()};this.loadGrid=function(t){var u,f;gx.dbg.logPerf("loadGrid_"+this.gridName);var t=t||{},i=t.rowProps,o=t.isPostback,r=t.addRows,t=t.isNestedLoad;if(this.isNestedLoad=this.isNestedLoad||t,t=gx.O,gx.setGxO(this.parentObject),this.isLoading=!0,f=this.parentObject.isTransaction(),f&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this)),void 0!=i){var f=i.GridName?i[i.GridName.toUpperCase()+"_nEOF"]:void 0,s=i.GridName?i[i.GridName.toUpperCase()+"_nFirstRecordOnPage"]:void 0,e=this.getContainerControl();null!=e&&(this.autoRefreshing?this.updatePagingVarsAfterRefresh(i):this.updatePagingVars(f,s),this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage),o&&(r||(i.values=this.getValuesFromHidden()),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(e),this.additiveResponse||this.clearHiddens(),this.setRowsProperty(),o=this.getSelection(),this.autoRefreshing?this.updatePagingVarsAfterRefresh(i):this.updatePagingVars(f,s),r||this.blankGridRows(),this.setHtmlTags(i),this.setGridStyles(i),this.setDeleteMethod(i.DeleteMethod),this.setSelectionAndHover(i.Allowselection,i.Selectioncolor,i.Allowhover,i.Hovercolor,i.Selectedindex),this.setCollapsing(i.Allowcollapsing,i.Collapsed),this.setSflColumns(i.SflColumns),this.setColumnsProperties(i.Columns),r||this.addRows(i),this.updateOldComponents(),this.initRefreshParms(),u=this.getGridInnerTableId(),u=void 0!==n("#"+u).attr("data-gx-grid-nodata"),u=this.refreshGrid({addRows:r&&!u,loadChildGrids:null,fromAutoRefresh:this.autoRefreshing}),this.setProperty({Selectedindex:o+1}))}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=f||this.isFreestyle?9999:this.gridRows,e=this.getContainerControl(),null!=e?(this.grid.setContainerDelayed(e),r=this.getRowsFromHidden(),null!=r?(r.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(r),this.setGridStyles(r),this.setDeleteMethod(r.DeleteMethod),this.setSelectionAndHover(r.Allowselection,r.Selectioncolor,r.Allowhover,r.Hovercolor,r.Selectedindex),this.setCollapsing(r.Allowcollapsing,r.Collapsed),this.setSflColumns(r.SflColumns),this.setColumnsProperties(r.Columns),this.updatePagingVars(),this.addRows(r),this.initRefreshParms(),this.addingRows=!0,u=this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),u=this.refreshGrid())):u=this.loadWrappedGridChilds();return this.isLoading=!1,gx.setGxO(t),gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded"),u};this.loadWrappedGridChilds=function(){var f=n.Deferred(),t,i,e,r,u;try{if(t=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId),"undefined"!=typeof t){for(t=parseInt(t),i=0;i<t;i++)for(e=this.grid.columns.length,r=0;r<e;r++)u=this.grid.columns[r],u.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(i+1),c:u});this.setupGridUsercontrols(this.GridUserControls)}}catch(o){gx.dbg.logEx(o,"gxgrid.js","loadWrappedGridChilds")}return f.resolve(),f};this.getRowsFromHidden=function(){var t=this.getDataHiddenName(),n=gx.fn.getHidden(t);return gx.json.setNonSerializable(t),"string"==typeof n?gx.json.evalJSON(n):"object"==typeof n?n:null};this.deleteGridData=function(){var n=this.getDataHiddenName();gx.json.setNonSerializable(n)};this.getValuesFromHidden=function(){var n=this.getValuesHiddenName(),t=gx.fn.getHidden(n);return gx.lang.emptyObject(t)&&(t=gx.fn.getControlValue(n)),gx.json.setNonSerializable(n),n=null,null!=t&&""!=t&&(n=gx.json.evalJSON(t)),n};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var n=gx.dom.byId(this.getContainerControlId());n&&(this.gxContainerCtrl=n,n.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(n,"gx-grid"),this.isResponsive&&gx.dom.addClass(n,"gx-responsive-grid"),gx.dom.addClass(n,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),n.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(n){var f,t,r,i,u;try{if(!gx.lang.emptyObject(n))for(f=n.length,t=0;t<f;t++){r=this.grid.columns[t];for(i in n[t])u=n[t][i],i=this.fixColumnPropName(i),this.isUsercontrol&&(r[i]=u),r[i.toLowerCase()]=u;this.checkPromptColumn(r)}}catch(e){gx.dbg.logEx(e,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(n){var t;try{if(this.isPromptColumn(n)&&(t=gx.fn.getAttachedCtrl(n.htmlName),t&&t.info&&t.info.controls)){for(var r=!1,u=!1,e=t.info.controls.length,i=0;i<e;i++){var f=this.grid.getColumnByGxId(t.info.controls[i]),o=gx.lang.gxBoolean(f.enabled),s=gx.lang.gxBoolean(f.visible);o&&(u=!0);s&&(r=!0)}u||(n.enabled="0");r||(n.visible="0")}}catch(h){gx.dbg.logEx(h,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(n){return"Horizontalalignment"==n?"align":n};this.setDeleteMethod=function(n){if(this.parentObject.isTransaction()){var t="DSP"==this.parentObject.Gx_mode;!t&&n&&"none"==n&&(t=!0);this.deleteMethod=t?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(n,t,i,r,u){try{"undefined"!=typeof n&&(this.allowSelection=gx.lang.gxBoolean(n));"undefined"!=typeof t&&(this.selectionColor=null);"undefined"!=typeof r&&(this.hoverColor=null);this.allowSelection&&"undefined"!=typeof t&&("undefined"!=typeof i&&(this.allowHovering=gx.lang.gxBoolean(i)),t=eval(t),this.selectionColor="undefined"!=typeof t[0]?gx.color.fromRGB(t[0],t[1],t[2]):gx.color.html(t),this.allowHovering&&"undefined"!=typeof r)&&(r=eval(r),this.hoverColor="undefined"!=typeof r[0]?gx.color.fromRGB(r[0],r[1],r[2]):gx.color.html(r));this.grid.gxAllowSelection=this.allowSelection;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxHoverColor=this.hoverColor;this.grid.selectedRows=[];u=Number(u||0);0<u&&(this.grid.Selectedindex=u-1)}catch(f){gx.dbg.logEx(f,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(n,t){try{(void 0!==n&&(this.allowCollapsing=gx.lang.gxBoolean(n),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==t)&&(this.collapsed=gx.lang.gxBoolean(t),this.grid.gxCollapsed=this.collapsed)}catch(i){gx.dbg.logEx(i,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(n){try{gx.lang.emptyObject(n)&&0!==n||(this.gridCols=gx.grid.validGridColsValue(parseInt(n)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols))}catch(t){gx.dbg.logEx(t,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(n){return n.gxAttId.indexOf&&-1!=n.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var n=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=n){try{this.gridRows=parseInt(n,10)}catch(t){gx.dbg.logEx(t,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var n,i=this.grid.columns.length,t=0;t<i;t++)n=this.parentObject.getValidStruct(this.grid.columns[t].gxId),n&&n.gxsgprm&&n.gxsgprm.installed&&(n.gxsgprm.installed={})};this.refreshCollection=function(n){var u,t,r;try{for(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),u=n.length,t=0;t<u;t++){for(var f={Props:[]},e=n[t],o=this.grid.columns.length,i=0;i<o;i++)r=this.grid.columns[i],f.Props[r.index]=[e[r.gxAttName]];this.addRow(f)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(s){gx.dbg.logEx(s,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(t){var u=n.Deferred(),t=t||{},e=t.loadChildGrids,o=t.fromAutoRefresh,f=t.fromCollection,i=t.isNestedLoad,s=t.immediateApplyInfiniteScroll,r;return this.isNestedLoad=this.isNestedLoad||i,this.DatePickersControls=[],this.GridUserControls=[],this.GridComponents=[],this.GridControls=[],this.ColumnPropertiesAfterRender=[],this.additiveResponse||(t.addRows||this.clearDefaultEventHandlers(),this.clearHiddens()),this.crearInstalledSuggests(),this.setRowsProperty(),void 0==this.parentRow||gx.lang.emptyObj(this.parentRow.Grids)||(i=this.parentRow.Grids[this.realGridName],null!=i&&(this.setHtmlTags(i),this.setGridStyles(i),this.setColumnsProperties(i.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(i))),r=!1,i=function(){var f;this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);this.installFixedGridHeader();var i=this,e=this.getGridInnerTableId(),o=this.grid.scroll_last_row_selector(this.gridRows),h=this.grid.scroll_first_row_selector(this.gridRows);this.grid.firstItemSelector="#"+e+h;this.grid.lastItemSelector="#"+e+o;f=function(t){t=n.map(t,function(n){return n.onLoadDeferred});n.when.apply(n,t).done(function(){if(i.InfiniteScrolling)if(s)i.handleInfiniteScrolling();else{var n=i.getContainerControl();gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",i,i.handleInfiniteScrolling,{single:!0}):gx.fn.isVisible(n)?gx.ol(i.handleInfiniteScrolling,i):gx.dom.getIntersectionObserver(function(t){var r=new t(function(){gx.fn.isVisible(n)&&(r.disconnect(),i.handleInfiniteScrolling())},{root:document.body});r.observe(n)})}u.resolve()})};this.setupGridComponents(this.GridComponents).then(function(){var u=n.map(i.GridComponents,function(n){return gx.pO.getWebComponent(n.p)});i.isFreestyle&&i.loadRowsGrids(r,t);gx.fx.obs.notify("grid.onafterrender",[i.grid,i.isNestedLoad]);i.isNestedLoad?(i.isNestedLoad=!1,f(u)):i.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",i,function(){i.infinite_scrolling_after_scroll()}):i.infinite_scrolling_after_scroll():i.applyTemplateObject().then(function(){f(u)});i.additiveResponse=!1});this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)}.closure(this),this.grid.doSort(),!1==e?this.grid.render(r,!1,f,i,t):(r=!0,this.grid.render(r,o,f,i,t)),u};this.getGridInnerTableId=function(){return this.gxComponentContext+this.containerName+"Tbl"};this.applyTemplateObject=function(){var n=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";return gx.plugdesign.applyTemplateObject({selector:"#"+this.getContainerControl().id,excluded:n})};gt="gx-wc-bkp_"+s+"_"+f;this.getComponentsBackupContainer=function(){var n=gx.dom.byId(gt);return n||(n=document.createElement("div"),n.id=gt,n.style.display="none",document.body.appendChild(n)),n};this.destroyComponentsBackup=function(){var n=gx.dom.byId(gt);n&&n.parentNode&&gx.dom.removeControlSafe(n)};this.backupComponents=function(){var f,i,e,t,o,n,u;try{if(!this.additiveResponse)for(f=this.grid.rows.length,i=0;i<f;i++){for(var r=this.grid.rows[i],s=this.grid.columns.length,n=0;n<s;n++)this.grid.columns[n].gxControl.type==gx.html.controls.types.webComponent&&(e=this.gxComponentContext+"gxHTMLWrp"+this.parentObject.getComponentPrefix(r.gxProps[n][0])+r.gxId,t=gx.dom.byId(e),t&&(t.parentNode.removeChild(t),this.getComponentsBackupContainer().appendChild(t)));for(o=r.gxGrids.length,n=0;n<o;n++)u=r.gxGrids[n],u&&u.isFreestyle&&u.backupComponents()}}catch(h){gx.dbg.logEx(h,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(n){var r=this.getContainerControl(),i;if(!r)return[];if(i=r.firstChild,r=[],i.querySelectorAll)r=gx.fn.toArray(i.querySelectorAll("td[data-colindex='"+n+"'], th[data-colindex='"+n+"']"));else{for(var u=gx.dom.byTag("TD",i),i=gx.dom.byTag("TH",i),t=0,f=u.length;t<f;t++)u[t].getAttribute("data-colindex")==n&&r.push(u[t]);for(t=0,f=i.length;t<f;t++)i[t].getAttribute("data-colindex")==n&&r.push(i[t])}return r};this.applyPropEntireColumn=function(n,t,i){for(var n=this.getEntireGridColumn(n),r=0;r<n.length;r++)gx.fn.setCtrlPropertyImpl(n[r],t,i)};this.setupFixedColumnProperties=function(){for(var t,n=0;n<this.ColumnPropertiesAfterRender.length;n++)t=this.ColumnPropertiesAfterRender[n],this.applyPropEntireColumn(t.colIndex,t.ptyName,t.ptyValue)};this.addColPropertyAfterRender=function(n,t,i){i={colIndex:n,ptyName:t,ptyValue:i};n="gxpty"+t+n;(t=this.ColumnPropertiesAfterRender[n])?this.ColumnPropertiesAfterRender[t]=i:(t=this.ColumnPropertiesAfterRender.push(i)-1,this.ColumnPropertiesAfterRender[n]=t)};this.setupCellAttributes=function(n){var t,i,r,u;for(t in n)if(i=n[t],r=gx.dom.byId(t),r)for(u in i)r.setAttribute(u,i[u])};this.setupGridControls=function(n){for(var t=0,r=n.length;t<r;t++){var u=n[t],i=gx.dom.byId(u.hookId),f=i.parentNode;f&&(f.insertBefore(u.el,i),gx.dom.removeControlSafe(i))}};this.setupGridComponents=function(){var t=function(n,t){for(var f=n.length,r,u,i=0;i<f;i++)if(r=n[i],!1!==r.create&&(u=gx.createComponent(r.n,r.p),null!=u)){if(gx.addComponent(u),u.readServerVars(),r.load)u.onload(void 0,!0);i==f-1&&t.resolve()}},i=function(n){for(var i=n.length,t=0;t<i;t++)gx.dom.removeClass(n[t],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(r){var e=n.Deferred(),f,s=r.length,h=[],c,o,l,u;for(0==s&&e.resolve(),c=[],f=0;f<s;f++)u=r[f],!1===u.create?(o=gx.dom.byId(u.existingEl),o&&(l=o.parentNode,u=gx.dom.byId(u.el),gx.dom.removeControlSafe(o),l.appendChild(u),c.push(u)),f==s-1&&e.resolve()):h.push(u.c);return gx.lang.requestAnimationFrame(i.closure(this,[c])),0<h.length&&gx.html.processCode(h.join(""),!1,t.closure(this,[r,e])),this.destroyComponentsBackup(),e.promise()}}();this.setupGridUsercontrols=function(n){var e=n.length,u,f,r;for(gx.uc.StartRender(),u=0;u<e;u++){var i=n[u].r,t=n[u].c,i=gx.uc.getNew(this.parentObject,t.gxUCId,t.gxUCLastId,t.gxUCClassName,t.gxUCContainerName+"_"+i,t.gxUCControlName,t.gxUCFieldName,this.gridLvl,this.gridId,i);for(i.DesignContainerName=t.gxUCContainerName,i.setC2ShowFunction(t.gxShowFunc),f=t.gxC2VFuncs.length,r=0;r<f;r++)i.addC2VFunction(t.gxC2VFuncs[r]);for(f=t.gxV2CFuncs.length,r=0;r<f;r++)i.addV2CFunction(t.gxV2CFuncs[r],t.gxUCFieldName);i.setGridProperties();i.setGridEventHandlers();this.parentObject.setUserControl(i);i.execV2CFunctions(!0);i.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(n){for(var u=n.length,i=0;i<u;i++){for(var f=n[i].CtrlId,s=n[i].Grid,h=n[i].Row,e=gx.O,t=null,o=gx.fn.controlIds(),c=o.length,r=0;r<c&&!(t=gx.fn.validStruct(o[r]),t.grid==s&&e.CmpContext+t.fld+"_"+h==f);r++);null!=t&&void 0!=t.dp&&gx.fn.installDatePicker(f,t,e,t.dp.f,t.dp.st,t.dp.wn,t.dp.mf,gx.fn.datePickerFormat(t.dp.pic,t.dp.dec,t.len),t.len,t.dp.dec)}};this.installImageControls=function(){var t=this.gxContainerCtrl,n=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null,i;if(this.additiveResponse&&n&&n.childNodes[0]&&(t=n),t=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",t),t[0])for(n=0,i=t.length;n<i;n++)gx.html.multimediaUpload.createControl(t[n])};this.addComponentToDraw=function(n){this.GridComponents.push(n)};this.addUsercontrolToDraw=function(n){this.GridUserControls.push(n)};this.addDatepickerToSetup=function(n){this.DatePickersControls.push(n)};this.addControlToReuse=function(n){n.el.parentNode&&gx.dom.removeControlSafe(n.el);this.GridControls.push(n)};this.loadRowsGrids=function(n,t){for(var t=t||{},r=this.grid.rows.length,i=this.additiveResponse||t.addRows?this.firstAdditiveRow:0;i<r;i++)this.loadRowGrids(this.grid.rows[i],n)};this.loadRowGrids=function(n,t){for(var i,f,u=n.gxGrids.length,r=0;r<u;r++)i=n.gxGrids[r],i.grid.setContainerDelayed(gx.dom.byId(i.gxContainerDivName)),t?(void 0==i.parentRow||gx.lang.emptyObj(i.parentRow.Grids)||(f=i.getDataHiddenName(),gx.fn.setHidden(f,gx.json.serializeJson(i.parentRow.Grids[i.realGridName]))),i.loadGrid({isNestedLoad:!0})):i.refreshGrid({isNestedLoad:!0}),n.IsNew=!1};this.updateRcdCount=function(){(this.hasForEachLine||this.parentObject.isTransaction())&&gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var n=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");(0==this.lastRowId||parseInt(n,10)>this.lastRowId)&&(this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,""))};this.updateControlValue=function(n,t,i){var e,r,o,s,h;try{var r=this,u=i=i||gx.fn.currentGridRow(n.grid).toString(),f=i.length;if(4<f){if(e=i.substring(4,f),r=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+e,this.isMasterPageGrid),!r)return;u=i.substring(0,4)}return o=parseInt(u,10)-1,!0==t&&r.setRowModified(i),s=r.getColumnIndexByName(n.fld),h=gx.dom.el(this.gxComponentContext+n.fld+"_"+i),r.updateRowValue(s,o,h),r}catch(c){gx.dbg.logEx(c,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(n,t,i){var r=n.lastIndexOf("_"),u,f;-1!=r&&(u=n.substring(0,r),(r=this.grid.getRowByGxId(n.substring(r+1)))&&(u=this.grid.getColumnByHtmlName(u))&&(f=this.parentObject[i.gxvar],"decimal"==i.type&&gx.lang.instanceOf(f,Number)&&(f=f.toFixed(i.dec)),r.values[u.index]=f,r.gxProps[u.index]||(r.gxProps[u.index]={}),(n=gx.dom.el(n))&&"SELECT"==n.tagName&&(r.gxProps[u.index].Values=gx.dom.comboBoxToObj(n)),r.gxProps[u.index].Value=f,r.gxProps[u.index].FormattedValue=t))};this.getColumnIndexByName=function(n){for(var i=this.grid.columns,r=i.length,t=0;t<r;t++)if(i[t].htmlName==n)return t;return-1};this.setRowModified=function(n){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+n,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(n)};this.validateRow=function(n){var t,i;if(n)try{t=n.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(t,n.gxrow);i=gx.fn.lastGridControl(t);gx.csv.validControls(gx.csv.lastId,i+1,!0,gx.O)}catch(r){gx.dbg.logEx(r,"gxgrid.js","validateRow")}};this.updateRowValue=function(n,t,i){var t=this.grid.getRowById(t),r=this.grid.columns[n];"checkbox"==i.type&&(i.value=i.checked?r.gxChecked:r.gxUnChecked);i=this.parentObject.getValidStruct(this.grid.columns[n].gxId).val(t.gxId);t.values[n]=i;gx.lang.emptyObject(t.gxProps[n])||(t.gxProps[n].Value=i,t.gxProps[n].FormattedValue=gx.fn.getControlValue(this.grid.columns[n].htmlName+"_"+t.gxId,"screen"));this.parentObject.isTransaction()&&(n=this.columnIndexInKey(r.gxAttId),-1!=n&&(t.gxKeyValues[n]=i));r.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+r.htmlName+"_"+t.gxId+"_gxBlob",i)};this.expandCollapse=function(t,i){gx.evt.cancel(i,!0);var r=gx.dom.byId(this.getGridInnerTableId());null!=r&&(this.collapsed?(n(r).removeAttr("data-gx-sr-only"),t.src=gx.ajax.getImageUrl(gx,"collapseImage")):(n(r).attr("data-gx-sr-only",""),t.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(r=this.gridName.substring(this.gridName.lastIndexOf("_")),r=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+r):r=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(r,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(n){var t=n.gxrow;return gx.lang.emptyObject(t)&&(t=n.id.lastIndexOf("_"),t=n.id.substring(t+1)),this.grid.getRowByGxId(t)};this.showContextMenu=function(n,t){this.contextMenu.show(n,t)}},contextMenu:function(n){this.gxgrid=n;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var t=new gx.text.stringBuffer;this.show=function(n,i){this.gxgrid.validateRow(n);this.contextEvent=i;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(i,!0);this.rowClicked=n;this.startMenu();t.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("<\/div>");this.endMenu()};this.startMenu=function(){t.clear();var n=this.getMenuCoords();t.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');t.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');t.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");t.append("top:"+n.top+"; left:"+n.left+";").append('">')};this.endMenu=function(){t.append("<\/div>");var n=gx.dom.byId(this.controlName);null==n&&(n=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),n.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(n),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));gx.dom.shouldPurge()&&gx.dom.purge(n,!0);n.innerHTML=t.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var t=0,i=0,n=this.contextEvent;return n.pageX||n.pageY?(t=n.pageX,i=n.pageY):(n.clientX||n.clientY)&&(t=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=n.clientY+document.body.scrollTop+document.documentElement.scrollTop),{left:t,top:i}};this.contextMenuClicked=function(n){this.handleContextMenuAction(gx.evt.source(n).id);this.hide()};this.handleContextMenuAction=function(n){switch(n){case"deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case"undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(n){return n=""+n,"0000".substring(0,4-n.length)+n},rowId:function(n){for(n=n.toString();4>n.length;)n="0"+n;return n},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);gx.grid.impl=function(n){return function(t){var r=/style="([^"]*)"/ig,i;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName="";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnAutoHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=t;this.container=null;this.setContainerDelayed=function(n){this.container=n};this.addColumn=function(n){n.isGxRemove()&&(n.visible=!1);var t=this.columns.length;return n.index=t,n.table=this,this.columns[t]=n,typeof n.htmlName!="undefined"&&(this.columnsHtmlName[n.htmlName]=n),typeof n.gxId!="undefined"&&(this.columnsGxId[n.gxId]=n),typeof n.gxAttId!="undefined"&&(this.columnsGxAttId[n.gxAttId]=n),n};this.getColumnByIndex=function(n){return this.columns[n]};this.getColumnByCtrlType=function(t){return n.map(this.columns,function(n){return n.gxControl.type==t?n:null})};this.addRow=function(n,t){return n.table=this,n!=null?(this.rows[this.rows.length]=n,typeof n.id!="undefined"&&(this.rowsById[n.id]=n),typeof n.gxId!="undefined"&&(this.rowsByGxId[n.gxId]=n),gx.lang.booleanValue(t)&&this.render(),n):void 0};this.getColumnByHtmlName=function(n){var t,i;return t=this.columnsHtmlName[n],typeof t=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<n.length&&(i=n.substring(0,this.gxCmpContext.length),i==this.gxCmpContext&&(n=n.substring(this.gxCmpContext.length,n.length),t=this.columnsHtmlName[n])),t};this.getColumnByGxId=function(n){return this.columnsGxId[n]};this.getColumnByGxAttId=function(n){return this.columnsGxAttId[n]};this.getColumnForVar=function(n){for(var i,t=0;t<this.columns.length;t++)if(i=this.parentGxObject.getValidStruct(this.columns[t].gxId),i&&i.gxvar==n)return this.columns[t];return null};this.getRowById=function(n){return this.rowsById[n]};this.getRowByGxId=function(n){return this.rowsByGxId[n]};this.setSort=function(n,t){n==this.sortColumn?this.ascSort=t==null?!this.ascSort:gx.lang.booleanValue(t):(this.sortColumn=n,this.ascSort=t==null?!0:gx.lang.booleanValue(t));this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:!0})};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(n,t){return this.gxCmpContext+t.htmlName+"_"+n.gxId};this.getControlId=function(n,t){return this.getControlName(n,t)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(n){return this.gxCmpContext+"delete"+this.gxGridName+"_"+n};this.showDeleteImage=function(n){this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn()&&(n=gx.dom.byId(this.deleteImgId(n)))&&!gx.fn.isVisible(n)&&(n.style.display="inline",n.parentNode.nodeName=="A"&&(n.parentNode.style.display="inline"))};this.appendDeleteHeader=function(n,t){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var i=this.isGxTrn(),r=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(t==gx.grid.deletePositions.left)r=!0;else return;else gx.grid.deletePosition==t&&(r=!0);i&&r&&(i="&nbsp;",this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(i=gx.grid.deleteTitle),n.append('<th class="'+this.columnAutoHeaderClass+'">'+i+"<\/th>"))}};this.appendDeleteImage=function(n,t,i){var f,e,o,r,u;if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){if(f=!1,e=!1,this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"&&(f=t.gxDeleted(),e=t.gxIsMod()||t.gxExists()),o=this.deleteImgId(t.gxId),r=!1,this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(i==gx.grid.deletePositions.left)r=!0;else return;else this.gxIsFreestyle||gx.grid.deletePosition!=i?this.gxIsFreestyle&&(u=gx.grid.deletePositionFree,i==gx.grid.deletePositions.left?r=u==gx.grid.deletePositions.topL||u==gx.grid.deletePositions.bottomL:i==gx.grid.deletePositions.right&&(r=u==gx.grid.deletePositions.topR||u==gx.grid.deletePositions.bottomR),i=u):r=!0;if(r){var s="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(i)+" gx-remove-row-"+this.deleteVerticalAlign(i)+'" style="text-align:'+this.deleteImageAlign(i)+";vertical-align:"+this.deleteVerticalAlign(i)+'">',i="<\/"+this.CELL_TAG+">",r="",u=!1;f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?r=gx.grid.undeleteImage:e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?r=gx.grid.deleteImage:f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu?r=gx.grid.deleteImage:(r=gx.grid.deleteImage,u=!0);f="";n.append(s);this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(e=gx.fn.firstGridControl(this.ownerGrid.gridId),f=gx.grid.deleteTooltip,n.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+t.gxId+"');\""),n.append(' onfocus="gx.evt.onfocus(this,'+e+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+t.gxId+"',"+this.ownerGrid.gridId+')"'),t="",u&&(t=t+"display:none;"),t&&n.append(' style="'+t+'"'),n.append(">"));n.append('<img id="'+o+'" src="'+r+'"');f&&n.append(' title="'+f+'"');n.append(' style="border-style: none;');u&&n.append("display:none;");n.append('"');n.append(' class="gx-grid-delete"/>');this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&n.append("<\/a>");n.append(i)}}};this.deleteVerticalAlign=function(n){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var t="top";return(n==gx.grid.deletePositions.bottomL||n==gx.grid.deletePositions.bottomR)&&(t="bottom"),t}return"middle"};this.deleteImageAlign=function(n){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var t="right";return(n==gx.grid.deletePositions.bottomL||n==gx.grid.deletePositions.topL)&&(t="left"),t}return"center"};this.getRowByPos=function(n){return this.container.querySelector(" tbody>tr:nth-child("+n+")")};this.scroll_last_row_selector=function(n){return this.ownerGrid.additiveResponse?" tbody tr:nth-last-child("+Math.min(n/2,1)+")":" tbody tr:last-child"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(n,t){var r=this.ROW_TAG,i=this.ROW_BASE_CLASS;return this.gxIsFreestyle&&(r=this.CELL_TAG),i=i+((i?" ":"")+(n?this.evenRowClass:this.oddRowClass)+(t?" RowDeleted":"")),{cls:i,tag:r}};this.simpleAppendFn=function(n){return function(t){t.append(n)}};this.appendGridStyle=function(n){var t=r.exec(this.gxHtmlTags);t&&t.length>1&&n.append(t[1]);gx.lang.emptyObject(this.gxBackground)||n.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,!0)+"');");gx.lang.emptyObject(this.gxBorderWidth)||n.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?n.append(";"):n.append(this.gxBordercolor+";");this.ownerGrid.width>0&&n.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(n){n.append(this.gxHtmlTags.replace(r,""));this.gxAllowCollapsing&&this.gxCollapsed&&n.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(n){this.gxHtmlTags.indexOf("class=")==-1&&n.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(n){n.append('<div valign="top" ><div>');n.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?n.append(gx.ajax.getImageUrl(gx,"expandImage")):n.append(gx.ajax.getImageUrl(gx,"collapseImage"));n.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"><\/div><div>')};this.appendCollapsingWrapperEnd=function(n){n.append("<\/div><\/div>")};this.appendContainerStart=function(n,t){t.append("<table ");this.appendGridClassAttribute(t);t.append(' id="'+n+'" ');gx.lang.emptyObject(this.gxToolTipText)||t.append('title="'+this.gxToolTipText+'" ');t.append('style="');this.appendGridStyle(t);t.append('" ');this.appendGridAttributes(t);this.isAbstract||(t.append('data-bkgstyle="'),t.append(gx.grid.styles[this.gxTitleBackstyle]),t.append('" '));t.append(">");gx.lang.emptyObject(this.header)||(t.append("<caption>"),t.append(this.header),t.append("<\/caption>"))};this.appendContainerEnd=this.simpleAppendFn("<\/table>");this.appendHeaderText=function(n,t){gx.lang.emptyObject(this.headerText)||t.append('<tr><td colspan="'+n+'" class="'+this.headerClass+'">'+this.headerText+"<\/td><\/tr>")};this.appendFooterText=function(n,t){gx.lang.emptyObject(this.footerText)||t.append('<tr><td colspan="'+n+'" class="'+this.footerClass+'">'+this.footerText+"<\/td><\/tr>")};this.appendHeader=function(n,t){var e=n.length,o=[],s=gx.ajax.getImageUrl(gx,"ascImage"),h=gx.ajax.getImageUrl(gx,"descImage"),f=0,i,u,r;for(t.append("<thead>"),t.append("<tr>"),this.appendDeleteHeader(t,gx.grid.deletePositions.left),u=0;u<e;u++)r=n[u],i=[r.gxColumnClass,r.columnheaderclass||"",this.columnAutoHeaderClass].join(" "),t.append('<th class="'+i+'"'),i="white-space:nowrap;",gx.lang.gxBoolean(r.visible)||(i=i+"display:none;"),r.width&&(r.gxWidthUnit||(r.gxWidthUnit="px"),i=i+("width:"+r.width+r.gxWidthUnit+";")),r.align&&(i=i+("text-align:"+r.align+";")),gx.lang.emptyObject(this.gxTitleBackColor)||this.gxTitleBackstyle!=gx.grid.styles.header&&this.gxTitleBackstyle!=gx.grid.styles.report||(i=i+("background-color:"+this.gxTitleBackColor+";"),this.gxRealTitleBackColor=this.gxTitleBackColor),gx.lang.emptyObject(this.gxBackColor)||this.gxTitleBackstyle!=gx.grid.styles.uniform||(i=i+("background-color:"+this.gxBackColor+";"),this.gxRealTitleBackColor=this.gxBackColor),gx.lang.emptyObject(this.gxTitleForeColor)||(i=i+("color:"+this.gxTitleForeColor+";")),gx.lang.emptyObject(this.gxTitleFont)||(i=i+this.gxTitleFont),r.titlefontunderline?i=i+"text-decoration: underline;":r.titlefontstrikethru&&(i=i+"text-decoration: line-through;"),r.titlefontbold&&(i=i+"font-weight: bold;"),r.titlefontitalic&&(i=i+"font-style: italic;"),r.titlebackcolor&&(i=i+("background-color:"+gx.color.html(r.titlebackcolor).Html+";")),r.titleforecolor&&(i=i+("color:"+gx.color.html(r.titleforecolor).Html+";")),t.append(' style="'+i+';"'),t.append(' data-colindex="'+f+'"'),t.append(">"),f++,gx.lang.emptyObject(gx.text.trim(r.title))?t.append("&nbsp;"):(t.append("<span"),r.gxTooltip&&t.append(' title="'+r.gxTooltip+'"'),r.sortable&&t.append(' onclick="'+this.gridObject()+".grid.setSort("+r.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\""),t.append(">"),t.append(r.title),this.ascLabel!=null&&this.descLabel!=null&&(this.ascLabel.src=s,this.descLabel.src=h,r.sortable&&this.sortColumn==r.index&&t.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,o))),t.append("<\/span>")),t.append("<\/th>");this.appendDeleteHeader(t,gx.grid.deletePositions.right);t.append("<\/tr>");t.append("<\/thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("<\/tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");this.appendFooterWrapperEnd=this.simpleAppendFn("<\/tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("<\/tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("<\/tbody><\/table><\/td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnAutoHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;n.each(this.beforeRenderCallbacks,function(n,t){t()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var i=this.ownerGrid,t=i.getGridInnerTableId();i.emptyText&&n("#"+t+" + .gx-text-gridnodata").length===0&&n(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(i.emptyText).insertAfter(n("#"+t));this.rows.length===0?n("#"+t).attr("data-gx-grid-nodata",""):n("#"+t).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){for(var r=["onblur","onclick","onfocus","onchange"],t=gx.dom.byTag("input",this.container),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r);for(t=gx.dom.byTag("textarea",this.container),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r);for(t=gx.dom.byTag("select",this.container),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r);for(t=gx.dom.byTag("span",this.container),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r);for(t=gx.dom.byTag("img",this.container),n=0,i=t.length;n<i;n++)gx.dom.purgeElement(t[n],r)};this.render=function(n,t,i,r,u){var n=!!n,e=this.ownerGrid.getGridInnerTableId(),o=this.container;this.beforeRender();this.ownerGrid.additiveResponse&&this.doSort();n=this.drawGrid(e,n,t,i,u);gx.dom.shouldPurge()&&this.purgeGrid();var f=gx.dom.getActiveElement(),t=f?f.tagName.toUpperCase():"",o=f&&(f.id||f.name)&&t!="FORM"&&gx.dom.isChildNode(f,o),s=gx.dom.getCaretOffset(f);this.setGridHtml(this.container,n,u);this.gxIsFreestyle||this.ownerGrid.instanciateRow(gx.fn.currentGridRowImpl(this.ownerGrid.gridId));this.ownerGrid.additiveResponse&&this.sortColumn!=-1&&this.ownerGrid.handleInfiniteScrolling();o&&setTimeout(function(){var n=gx.dom.el(f.id||f.name,!1,!0);n&&(gx.csv.disableFocus=!0,n.offsetWidth>0&&n.offsetHeight>0&&gx.fn.setFocus(n,function(){gx.dom.setCaretOffset(n,s)}))},10);this.drawEmptyContent();this.afterRender(e);r();this.rendered=!0};this.setGridHtml=function(t,i,r){r=r||{};gx.csv.IgnoreBlur=!0;var u,f=this.ownerGrid.InverseLoading,e;this.ownerGrid.additiveResponse||r.addRows?this.sortColumn!==-1?(t.innerHTML=i,gx.plugdesign.applyTemplateObject({selector:t})):(this.gxIsFreestyle?(t=document.createElement("div"),t.className="gx-sr-only",t.innerHTML=i,t.setAttribute("data-gx-grid-rendering-additive-rows",""),u=n(t),i=f?this.firstItemSelector:this.lastItemSelector,f?u.insertBefore(i):u.insertAfter(i)):f?u=n(i).insertBefore(this.firstItemSelector):t=n(i).insertAfter(this.lastItemSelector),this.newAdditiveRows=u,gx.plugdesign.applyTemplateObject({selector:u,deferred:!0}).then(function(){this.newAdditiveRows&&(e=this.newAdditiveRows.children(),f?e.insertBefore(this.newAdditiveRows):e.insertAfter(this.newAdditiveRows),this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render"),this.newAdditiveRows.remove(),delete this.newAdditiveRows)}.closure(this))):t.innerHTML=i;gx.csv.IgnoreBlur=!1};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=function(n,t,i,r,u){var u=u||{},k=this.isGxTrn(),v=this.gxIsFreestyle&&this.gxGridCols>1,e=new gx.text.stringBuffer,y=this.columns,i=y.length,s,h,o,w,tt,d,a,f,g=this.ownerGrid.additiveResponse||u.addRows,c,l,nt,b,p,n;if(!this.gxIsFreestyle&&k&&i++,g||u.immediateApplyInfiniteScroll?(c=this.firstRecordOnPage=="0"||this.sortColumn!=-1?0:this.lastRenderedRow,l=this.rows.length,this.ownerGrid.firstAdditiveRow=c):Number(this.pageSize)!==0?(u=this.getMaxPage(),this.currentPage<=0?this.currentPage=1:this.currentPage>u&&(this.currentPage=u),c=Math.max(this.pageSize*(this.currentPage-1),0),l=Math.min(c+this.pageSize,this.rows.length)):(c=0,l=this.rows.length),this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(e),nt=y.length,!this.gxIsFreestyle&&l>c)for(u=0;u<nt;u++)if(o=y[u],d=gx.lang.gxBoolean(o.visible)){for(b=!1,s=c;s<l&&!b;s++)h=this.rows[s],f=o.gxControl,a=h.gxProps[o.index],r||f.setProperties.apply(f,a),f.visible&&(b=!0);b||(o.visible=!1)}if(g&&this.sortColumn==-1||(this.appendContainerStart(n,e),this.appendHeaderText(i,e),this.gxIsFreestyle||this.appendHeader(y,e),this.appendBodyWrapperStart(e)),p=!0,n=function(){var u,n,g;p=!p;h=this.rows[s];t&&s===c&&!gx.fn.currentGridRowImpl(this.gxId)&&gx.fn.setCurrentGridRow(this.gxId,h.gxId);var it=h.gxDeleted(),i=new gx.text.stringBuffer,b=this.getRowRenderingProps(p,it,s,c,l);for(v&&this.gxIsFreestyle&&(s>0&&s%this.gxGridCols==0||s===0&&this.gxGridCols>0)&&(s>0&&this.appendRowEnd(e,s,c,l),this.appendRowStart(e,s,c,l)),u="",this.gxTitleBackstyle==gx.grid.styles.report&&(u=p?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd),this.gxTitleBackstyle==gx.grid.styles.header&&(u=this.gxLinesBackcolorOdd),this.gxTitleBackstyle==gx.grid.styles.uniform&&(u=this.gxBackColor),(!this.gxIsFreestyle||this.gxIsFreestyle&&v)&&(this.appendRowPrefix(i,s,c,l),i.append("<"+b.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+h.gxId+"'"),this.gxIsFreestyle||i.append(' data-gxrendering_row=""'),this.gxIsFreestyle&&v?(i.append(' data-gxrow="'+h.gxId.toString()+'"'),(tt=this.columns[1].gxControl.verticalAlign)&&i.append(' data-cell-valign="'+tt+'"')):i.append(' data-gxrow="'+h.gxId.toString()+'"'),i.append(' class="'+b.cls+'"'),h.selected&&i.append(' data-selected="1"'),n="",u&&(n="background-color:"+u+";"),gx.lang.emptyObject(this.gxLinesFont)||(n=n+this.gxLinesFont),n&&i.append(' style="'+n+'" '),i.append(">"),e.append(i.toString())),this.gxIsFreestyle&&(v&&this.appendRowBreaksWrapperStart(e,h),w=this.gxBuffer.toString(),e.append(w)),this.gxIsFreestyle||this.appendDeleteImage(e,h,gx.grid.deletePositions.left),this.appendCellPrefixStart(e,s,c,l,h,b),i=0;i<nt;i++){if(o=y[i],d=gx.lang.gxBoolean(o.visible),a=h.gxProps[o.index],n=h.values[o.index],f=o.gxControl,this.gxIsFreestyle&&f.type==gx.html.controls.types.row&&o.index===0&&(f.isFreestyleRow=!0),f.setGridData({grid:this.ownerGrid,row:h,gridId:this.gxId,gridRow:h.gxId}),r?(delete f.formattedValue,f.value=n,f.id=o.htmlName+"_"+f.gridRow):(f.setProperties.apply(f,a),f.isFreestyleRow&&(f.cssClass=b.cls)),t)delete gx.usrPtys[f.id];else if(gx.usrPtys[f.id]!==void 0)for(g in gx.usrPtys[f.id])g=="enabled"&&(f.rtEnabled=!0),f.setIndividualProp(g,gx.usrPtys[f.id][g]);it&&(f.rtEnabled=!0,f.enabled=!1);n=this.parentGxObject.getValidStruct(o.gxId);typeof a.Value!="undefined"&&(f.value=gx.decimalPoint!="."&&n&&n.type=="decimal"&&typeof a.Value=="string"?a.Value.replace(".",gx.decimalPoint):a.Value);typeof a.FormattedValue!="undefined"&&(f.formattedValue=a.FormattedValue);typeof f.formattedValue=="undefined"&&(r&&n&&n.v2c?(f.persistValue(),n.v2c(h.gxId),f.formattedValue=gx.fn.getControlValue(f.id)):f.formattedValue=f.value);a.Values&&(f.possibleValues=a.Values.v);this.gxIsFreestyle&&f.type==gx.html.controls.types.row&&o.index===0&&(f.id=this.gxCmpContext+this.gxGridObject+"Row_"+h.gxId,k&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&(f.oncontextmenu=this.gridObject()+".showContextMenu(this, event);"),u&&(f.style=f.style+("background-color:"+u+";")));this.gxIsFreestyle||(e.append("<"+this.CELL_TAG+' class="gx-attribute '+(f.columnClass||"")+'" data-cell-valign="'+o.valign+'"'),e.append(' data-colindex="'+i+'"'),n="",d||(n=n+"display:none;",!f.visible||o.isGxRemove()||this.ownerGrid.isPromptColumn(o)||this.ownerGrid.addColPropertyAfterRender(i,"Visible",1)),o.width?(o.gxWidthUnit||(o.gxWidthUnit="px"),n=n+("width:"+o.width+o.gxWidthUnit+";")):o.gxColSize&&(f.colSize=o.gxColSize),o.align&&(n=n+("text-align:"+o.align+";")),f.style&&(n=n+f.style),n&&e.append(' style="'+n+'" '),e.append(">"));e.append(f.getHtml());this.gxIsFreestyle&&f.type==gx.html.controls.types.row&&o.index===0&&this.appendDeleteImage(e,h,gx.grid.deletePositions.left);f.persistValue();this.gxIsFreestyle||e.append("<\/"+this.CELL_TAG+">");this.gxIsFreestyle&&(o.index==this.columns.length-1&&this.appendDeleteImage(e,h,gx.grid.deletePositions.right),w=o.buffer.toString(),e.append(w))}this.appendCellPrefixEnd(e,s,c,l);this.gxIsFreestyle&&v?this.appendRowBreaksWrapperEnd(e):this.appendDeleteImage(e,h,gx.grid.deletePositions.right)},this.ownerGrid.InverseLoading)for(s=l-1;s>=c;s--)n.apply(this);else for(s=c;s<l;s++)n.apply(this);return this.gxIsFreestyle&&this.gxGridCols>0&&v&&this.appendRowEnd(e),this.lastRenderedRow=l,g||(this.appendBodyWrapperEnd(e),this.appendFooterWrapperStart(e),!this.ownerGrid.InfiniteScrolling&&(k||this.hasPagingButtons())&&this.appendNavigationBar(i,e),this.appendFooterText(i,e),this.appendFooterWrapperEnd(e),this.appendContainerEnd(e),this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(e)),n=e.toString(),e.clear(),e=null,n};this.defineEventHandlers=function(){this.gxIsFreestyle||(gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this),gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this));this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[],!0),this);gx.evt.attach(this.container,"click",this.clickHandler,this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(t){return t&&t.tagName.toLowerCase()==this.ROW_TAG&&t.getAttribute("data-gxrow")!=null&&n(t).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(n,t){for(var i=n;i&&gx.dom.isChildNode(i,this.container);){if(this.isGridRow(i)&&(!t||t=="body"&&i.parentNode.tagName=="TBODY"||t=="header"&&i.parentNode.tagName=="THEAD"))return i;i=gx.dom.findParentByTagName(i,this.ROW_TAG)}};this.mouseOverHandler=function(n){!gx.runtimeTemplates&&this.gxAllowHovering&&(n=this.getTargetRow(gx.evt.source(n)))&&n.getAttribute("data-selected")!="1"&&(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(n),this.gxHoveredRowId=parseInt(n.getAttribute("data-gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(n){!gx.runtimeTemplates&&this.gxAllowHovering&&(n=this.getTargetRow(gx.evt.source(n)))&&n.getAttribute("data-selected")!="1"&&this.endRowHover(n)};this.contextMenuHandler=function(n){var t=this.getTargetRow(gx.evt.source(n));t&&this.ownerGrid.showContextMenu(t,n)};this.mouseDownHandler=function(n,t){var i=this.getTargetRow(gx.evt.source(n));i&&(t=typeof t=="undefined"?this.gxAllowSelection&&!this.gxIsFreestyle:t,this.setRowSelected(i,i.getAttribute("data-gxrow"),!1,t))};this.keyDownHandler=function(n){this.getTargetRow(gx.evt.source(n))&&this.ownerGrid.rowKeyPressed(n)};this.clickHandler=function(n){var t=gx.evt.source(n);t.parentNode&&gx.dom.hasClass(t.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(t,n)}.closure(this))};this.pagingHandler=function(n,t){var i="";gx.evt.cancel(t,!0);gx.dom.hasClass(n,this.pagingButtonDisabled)||(gx.dom.hasClass(n,this.pagingButtonFirstClass)?i="FIRST":gx.dom.hasClass(n,this.pagingButtonPreviousClass)?i="PREV":gx.dom.hasClass(n,this.pagingButtonNextClass)?i="NEXT":gx.dom.hasClass(n,this.pagingButtonLastClass)&&(i="LAST"),this.changeGridPage(i))};this.changeGridPage=function(t,i){var f=n.Deferred(),e=this.gxGridName.toUpperCase()+"PAGING",r=this.ownerGrid,u="",o;if(t)return r.InfiniteScrolling||this.mask(),gx.pO.fullAjax?(gx.setGxO(this.parentGxObject),u="E"+r.realGridName.toUpperCase()+"_"+t+"PAGE"+(r.isMasterPageGrid?"_MPAGE":""),r.parentGrid&&(o=r.parentGrid.gridId)):(gx.fn.setHidden(this.gxCmpContext+e,t),u=this.gxCmpContext+"E"+e+"."),gx.evt.execEvt(void 0,void 0,u,gx.evt.dummyCtrl,o,void 0,void 0,!1,function(){this.unmask();f.resolve()}.closure(this),i),f.promise()};this.setRowSelected=function(t,i,r,u,f){gx.grid.setActiveGridRow(this,i);var u=u===void 0||u,f=f===void 0||f,e=function(){var h=gx.O,r;if(!gx.lang.emptyObject(this.parentGxObject)){u&&!gx.runtimeTemplates&&t.gxOriginalBackcolor===void 0&&(t.gxOriginalBackcolor=t.style.backgroundColor);this.instanciateSelectionVars(i);var e=this.getRowByGxId(i),o=this.selectedRows||[],s=[];for(e&&o.push(e),e=0;e<o.length;e++)r=o[e],r.selected=r.gxId==i,r.selected?(u&&(gx.runtimeTemplates||(t.gxSBackcolor=t.gxOriginalBackcolor!==void 0?t.gxOriginalBackcolor:t.style.backgroundColor,this.gxSelectionColor&&(t.style.backgroundColor=this.gxSelectionColor.Html)),gx.dom.addClass(t,this.selectedRowClass),n(t).attr("data-gxselected","")),s.push(r)):u&&(r=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+r.gxId),r==null||r.gxSBackcolor===void 0||gx.runtimeTemplates||(r.style.backgroundColor=r.gxSBackcolor),gx.dom.removeClass(r,this.selectedRowClass),n(r).removeAttr("data-gxselected"));for(e=0;e<s.length;e++)this.instanciateSelectedRow(s[e],!f);gx.setGxO(h)}};r&&(u||gx.O.isTransaction())?setTimeout(e.closure(this),100):e.call(this)};this.instanciateSelectionVars=function(n){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,n);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",n.substring(0,4))};this.instanciateSelectedRow=function(n,t){var i,r;this.selectedRows=[n];this.setSelectedRowVars(n);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&(gx.csv.instanciatedRowGrid=this.ownerGrid,t||(i=this.parentGxObject,i.fullAjax?(r=i.isServerEvent(this.gxOnLineActivate),gx.evt.dispatcher.dispatch(i.getServerEventName(this.gxOnLineActivate),i,this.ownerGrid.gridId,n.gxId,r)):i[this.gxOnLineActivate].call(i,n.gxId)))};this.setSelectedRowVars=function(n){for(var t,r=this.parentGxObject,u=this.columns.length,i=0;i<u;i++)t=r.GXValidFnc[this.columns[i].gxId],t!=null&&t.c2v&&t.c2v(n.gxId)};this.scrollIntoView=function(n,t,i){function f(n,t,i,r){return{left:n,top:t,width:i,height:r,right:n+i,bottom:t+r,translate:function(u,e){return f(u+n,e+t,i,r)},relativeFromTo:function(e,o){var s=n,h=t,e=e.offsetParent,o=o.offsetParent;if(e===o)return u;for(;e;e=e.offsetParent)s=s+(e.offsetLeft+e.clientLeft),h=h+(e.offsetTop+e.clientTop);for(;o;o=o.offsetParent)s=s-(o.offsetLeft+o.clientLeft),h=h-(o.offsetTop+o.clientTop);return f(s,h,i,r)}}}for(var r,e,o,u=f(n.offsetLeft,n.offsetTop,n.offsetWidth,n.offsetHeight);r=n.parentNode;)e=r.offsetLeft+r.clientLeft,o=r.offsetTop+r.clientTop+i,u=u.relativeFromTo(n,r).translate(-e,-o),r.scrollTop=!1===t||u.top<=r.scrollTop+r.clientHeight&&r.scrollTop<=u.bottom-r.clientHeight+i+r.clientHeight?Math.min(u.top,Math.max(u.bottom-r.clientHeight+i,r.scrollTop)):(u.bottom-r.clientHeight+i+u.top)/2,u=u.translate(e-r.scrollLeft,o-r.scrollTop),n=r};this.keepGridItemVisible=function(t,i){var u=gx.util.browser.isOldIE(),f=n(this.ownerGrid.getContainerControl()),r=u?f.closest(".gx-grid-fixed-header-ie7"):n("#"+this.ownerGrid.getContainerControlId()+" > table > tbody");r.length>0&&r[0].offsetHeight<r[0].scrollHeight&&(r=this.ownerGrid.getRowCtrlByIdx(t))&&(u=u?parseInt(f.css("paddingTop"),10):0,this.scrollIntoView(r,i,u))};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+1,!0,!1)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,!0,!0)};this.toggleRowHoverById=function(n,t,i){var r=this.ownerGrid.getRowCtrlByIdx(n),u=!1;return r&&(u=!0,t?(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(r),this.gxHoveredRowId=n,this.keepGridItemVisible(n,i)):this.endRowHover(r)),u};this.getRowByDOMCtrl=function(n){return this.getRowById(parseInt(n.getAttribute("data-gxrow").substring(0,4),10)-1)};this.startRowHover=function(t){if(gx.runtimeTemplates)n(t).addClass("gx-row-hovered");else{t.gxOriginalBackcolor===void 0&&(t.gxOriginalBackcolor=t.style.backgroundColor);var i=this.getRowByDOMCtrl(t);this.gxAllowHovering&&this.gxHoverColor&&!i.selected&&(t.gxHBackcolor=t.style.backgroundColor,t.style.backgroundColor=this.gxHoverColor.Html)}};this.endRowHover=function(t){if(gx.runtimeTemplates)n(t).removeClass("gx-row-hovered");else{var i=this.getRowByDOMCtrl(t);this.gxAllowHovering&&!i.selected&&t.gxHBackcolor!==void 0&&(t.style.backgroundColor=t.gxHBackcolor)}};this.hasPagingButtons=function(){return this.usePaging&&this.pageSize>0&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(n,t){gx.lang.emptyObject(this.gxRealTitleBackColor)?t.append('<tr><td colspan="'+n+'" class="'+this.navigationClass+'" style="text-align: center;">'):t.append('<tr><td colspan="'+n+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(n){n.append("<\/td><\/tr>")};this.appendNavigationBar=function(n,t){var i=this.getRowCount(),u=n,i=(i>0||i===0&&!this.isFirstPage())&&this.usePaging,r=this.parentGxObject.Gx_mode,r=this.isGxTrn()&&!this.gxHasAddlines&&!(r=="DSP"||r=="DLT");this.navigationClass=this.gxFooterClass;this.gxIsFreestyle&&this.gxGridCols>1&&(u=this.gxGridCols);(i||r)&&this.appendNavBarRowStart(u,t);i&&(t.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">'),this.currentPage<=0&&(this.currentPage=1),t.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first"))),t.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous"))),t.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next"))),t.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last"))),t.append("<\/div>"));r&&t.append(this.buildLink("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));(i||r)&&this.appendNavBarRowEnd(t)};this.buildPagingButton=function(n,t,i){return'<button type="button" class="'+n+(t?"":" "+this.pagingButtonDisabled)+'"'+('style="padding-left:20px;padding-bottom:5px;'+(t?"":"opacity:.7;cursor:default")+'"')+' title="'+i+'"'+(t?"":" disabled")+"/>"};this.buildLink=function(n,t,i,r,u){var f=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+u+'" onblur="this.style.textDecoration = \'none\';"><span '+(r!==void 0?'id="'+r+'"':"")+' style="'+("cursor:"+(document.createTextRange?"hand":"pointer")+";")+'" class="'+f+'" onclick="'+t+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+i+"';return true;\" onMouseOut=\"this.className='"+f+"';window.status='';return true;\">"+n+"<\/span><\/a>"};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)=="0"};this.getWebImageTag=function(n){return'<img border="0" src="/'+this.basePath+this.imgsDir+n.toString()+'"/>'};i=0;this.handleLabel=function(n){if(n.src){var t="img"+i;return i++,"<img name='"+t+"' border='0' src='"+n.src+"'>"}return n};this.sort=function(n,t){var e,u,o,s,r,f;if(n.table.isGxTrn()){if(!n.gxExists()&&!t.gxExists()&&!n.gxIsMod()&&!t.gxIsMod())return 0;if(!n.gxExists()&&t.gxExists()||!n.gxIsMod()&&t.gxIsMod())return 1;if(n.gxExists()&&!t.gxExists()||n.gxIsMod()&&!t.gxIsMod())return-1}e=n.table;u=e.getColumnByIndex(e.sortColumn);o=n.values[e.sortColumn];s=t.values[e.sortColumn];gx.lang.instanceOf(o,Array)||(o=[o]);gx.lang.instanceOf(s,Array)||(s=[s]);switch(u.type){case gx.types.numeric:u=function(n){return n=gx.num.parseFloat(n,gx.thousandSeparator,gx.decimalPoint),isNaN(n)&&(n=0),n};break;case gx.types.date:case gx.types.dateTime:u=function(n){try{n=new gx.date.gxdate(n).Value}catch(t){gx.dbg.logEx(t,"JSTable.js","sort")}return n.valueOf()};break;case gx.types.bool:u=function(n){return gx.lang.booleanValue(n)?1:0};break;default:u=function(n){return(""+n).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var c=Math.max(o.length,s.length),i=0,h=0;i===0&&h<c;h++)r=o[h],r==null&&(i=-1),f=s[h],f==null&&(i=1),i===0&&(r=u(r),f=u(f),i=typeof r.localeCompare=="function"?r==f?0:r.localeCompare(f):r==f?0:r>f?1:-1),i!==0&&(i=i*(e.ascSort?1:-1));return i};this.mask=function(){var n=this.container||typeof this.getContainerControl=="function"&&this.getContainerControl();n.firstChild&&gx.dom.mask(n.firstChild)};this.unmask=function(){var n=this.container||typeof this.getContainerControl=="function"&&this.getContainerControl();n.firstChild&&gx.dom.unmask(n.firstChild)}}}(gx.$);gx.grid.column=function(n,t,i,r,u){this.table=null;this.index=-1;this.title=n||"";this.type="undefined"!=typeof t?t:gx.types.character;this.width=i||"";this.align=r||"left";this.valign=u||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};gx.grid.row=function(n,t,i,r){this.table=null;this.id=n;this.gxParentRowId=r||"";this.gxId=i+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=t.Props||[];this.gxRenderProps=t.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var n=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=n?0!==Number(n):!1};this.gxIsMod=function(){var n=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+this.gxId);return null!=n?0!==Number(n):!1};this.gxDeleted=function(){var n=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=n?0!==Number(n):!1};this.setDeleted=function(n){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,n?1:0)}};gx.grid.responsiveGrid=function(n){var t=["xs","sm","md","lg"];return function(i){return i=new gx.grid.impl(i),i.appendContainerStart=function(n,t){t.append("<div ");this.appendGridClassAttribute(t);t.append(' id="'+n+'" ');gx.lang.emptyObject(this.gxToolTipText)||t.append('title="'+this.gxToolTipText+'" ');t.append('style="');this.appendGridStyle(t);t.append('" ');this.appendGridAttributes(t);t.append(">")},i.getRowByPos=function(n){return this.container.querySelector((1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+n+")")},i.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"},i.scroll_firt_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"},i.ROW_TAG="div",i.CELL_TAG="div",i.ROW_BASE_CLASS="row",i.getRowRenderingProps=function(i,r){var f=this.ROW_TAG,u=this.ROW_BASE_CLASS,e=this.gxGridResponsiveCols;return this.gxIsFreestyle&&(f=this.CELL_TAG,u=n.map(t,function(n,t){return["col-",n,"-",Math.floor(12/(e[t]||12))||1].join("")}).join(" ")),this.gxIsFreestyle||(u+=" "+(i?this.evenRowClass:this.oddRowClass)+(r?" RowDeleted":"")),{cls:u,tag:f}},i.appendGridClassAttribute=function(n){n.append(' class="'+this.gxCssClass+'"')},i.appendGridAttributes=function(n){this.gxAllowCollapsing&&this.gxCollapsed&&n.append(" data-gx-sr-only ")},i.appendContainerEnd=i.simpleAppendFn("<\/div>"),i.appendHeaderText=gx.emptyFn,i.appendFooterText=gx.emptyFn,i.appendHeader=gx.emptyFn,i.appendBodyWrapperStart=gx.emptyFn,i.appendBodyWrapperEnd=gx.emptyFn,i.appendFooterWrapperStart=i.simpleAppendFn("<div>"),i.appendFooterWrapperEnd=i.simpleAppendFn("<\/div>"),i.appendRowStart=function(n,t,i){t==i&&!0!==this.ownerGrid.additiveResponse&&n.append('<div class="row">')},i.appendRowEnd=function(n,t,i,r){t==r&&!0!==this.ownerGrid.additiveResponse&&n.append("<\/div>")},i.appendRowBreaksWrapperStart=function(n,t){n.append("<div>");this.appendDeleteImage(n,t,gx.grid.deletePositions.left)},i.appendRowBreaksWrapperEnd=i.simpleAppendFn("<\/div><\/div>"),i.appendRowPrefix=function(i,r,u){if(r!=u){var f=this.gxGridResponsiveCols,e=!1,u=n.map(t,function(n,t){return 1!=f[t]&&0==r%f[t]||0===f[t]&&0==r%12?(e=!0,"visible-"+n):""}).join(" ");e&&i.append('<div class="clearfix '+u+'"><\/div>')}},i.appendCellPrefixStart=function(n,t,i,r,u){t=u.gxDeleted()?" RowDeleted":"";1==this.gxGridCols&&(n.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+u.gxId+'" data-gxrow="'+u.gxId.toString()+'" class="row'+t+'"><div class="col-xs-12">'),this.appendDeleteImage(n,u,gx.grid.deletePositions.left))},i.appendCellPrefixEnd=function(n){1==this.gxGridCols&&n.append("<\/div><\/div>")},i.appendNavBarRowStart=function(n,t){t.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')},i.appendNavBarRowEnd=function(n){n.append("<\/div><\/div>")},i}}(gx.$);gx.grid.flexGrid=function(n){var t,r=gx.dom,u,i;this.useNativeChildControls=!0;this.show=function(){var i;t=n("#"+this.getContainerControl().id);i=this.drawGrid(this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(t.get(0),i);this.gxWidth&&t.width(r.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&t.height(r.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){t&&t.hide()};this.appendGridAttributes=function(n){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);n.append(" data-gx-flex")};u={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"};i=function(n,t,i){u[t]!==i&&n.append(t+": "+i+";")};this.appendGridStyle=function(n){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);i(n,"flex-direction",this.FlexDirection);i(n,"flex-wrap",this.FlexWrap);i(n,"justify-content",this.JustifyContent);i(n,"align-items",this.AlignItems);i(n,"align-content",this.AlignContent)};this.getRowRenderingProps=function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowPrefix=this.appendRowEnd=this.appendRowStart=gx.emptyFn;this.appendRowBreaksWrapperStart=function(n,t){this.appendDeleteImage(n,t,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("<\/div>");this.appendCellPrefixStart=function(n,t,i,r,u){1==this.gxGridCols&&(n.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+u.gxId+'" data-gxrow="'+u.gxId.toString()+'">'),this.appendDeleteImage(n,u,gx.grid.deletePositions.left))};this.appendCellPrefixEnd=function(n){1==this.gxGridCols&&n.append("<\/div>")};this.appendNavBarRowStart=function(n,t){t.append('<\/div><\/div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(n){n.append("<\/div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);gx.GxObject=function(n){var t=function(){this.onLoadDeferred=n.Deferred();this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=t.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})+$/;this.postEventPopupCommands=[];this.targetsCounter=9996;this.feedbackCallCounter=this.feedbackTimeoutId=0;gx.lang.apply(this,new gx.util.Observable)};return t.GX_EVENT_CONTROL_DATA_ATTR="data-gx-evt-control",t.GX_EVENT_CONDITION_DATA_ATTR="data-gx-evt-condition",t.GX_EVENT_DATA_ATTR="data-gx-evt",t.GX_EVENT_CODE_DATA_ATTR="data-gx-evt-code",t.GX_EVENT_CONTEXT_DATA_ATTR="data-gx-context",t.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay",t.GX_EVENT_EXCLUDED_CTRLTYPES=["dyncombo","combo"],t.GX_EVENT_EVENT_IN_PROGRESS="data-gx-evt-inprogress",t.WEBCOMPONENT_CLASS_NAME="gxwebcomponent",t.WEBCOMPONENT_LOADING_CLASS_NAME="gxwebcomponent-loading",t.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body",t.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/,t}(gx.$);gx.fn=function(n){var u=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,t=function(n){return n=n.replace(/\\/g,"."),gx.gen.isDotNet()?n.replace(/\.aspx$/,""):n},r=function(){var n=function(n,t){return n.gxIndex<t.gxIndex?-1:n.gxIndex>t.gxIndex?1:0};return function(t){return gx.fn.toArray(t).sort(n)}}();return{attachedControls:function(){return gx.attachedControls},cancelWindow:function(n){this.closeWindow(n,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(n,t,i){if(t=t||{},i=i||gx.O,"string"==typeof n){if(this.closeFromServer(n,t.parmsMetadata))return;n=[]}if(n||(n=[]),gx.popup.ispopup()){var r=gx.popup.getPopup(),u=r.url?gx.util.noParmsUrl(r.url):"";if(!r.frameWindow||-1!=r.frameWindow.location.href.search(u+"(\\?.*)?$")||gx.grid.drawAtServer){r.close(n,t,i);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(n=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(n)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),n=gx.absoluteurl(n),gx.spa.started?(gx.spa.redirect(n),gx.ajax.enableForm(i)):(gx.evt.redirecting=!0,location.href=n)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(n,t){try{if(window.parent&&window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(n,!0),{parmsMetadata:gx.json.evalJSON(t,!0)}):window.parent.gx.fn.closeWindow(gx.json.evalJSON(n,!0),{parmsMetadata:gx.json.evalJSON(t,!0)}),!0}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(n,t,i){gx.evt.execLoad=!1;i&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(n,{parmsMetadata:t})},invalidEmptyValue:function(n){if(gx.lang.emptyObject(n.s)){for(var i=n.v.length,t=0;t<i;t++)if(n.v[t][0]===n.s)return!1;return!0}return!1},trimSelectValue:function(n,t){return"int"==t?gx.text.trim(n):gx.text.rtrim(n)},selectedDescription:function(n,t){for(var r=n.v.length,i=0;i<r;i++)if(this.trimSelectValue(n.v[i][0],t)===n.s)return n.v[i][1];return null},setGridCheckBoxValue:function(n,t,i,r){this.setCheckBoxValue(n+"_"+t,i,r)},setGridDecimalValue:function(n,t,i){return this.setGridControlValue(n,t,i)},setGridControlValue:function(n,t,i,r){if(void 0!==t)return this.setControlValue(n+"_"+t,i,r)},setVarValues:function(n,t){for(var r,u=n.length,i=0;i<u;i++)r=gx.fn.vStructForVar(n[i]),r&&r.v2v?r.v2v(t[i]):eval(n[i]+'="'+t[i]+'"')},refreshControlOldValue:function(t){if(void 0!==n(t).attr(gx.csv.GX_OLD_VALUE_ATTRIBUTE)){var i=gx.fn.getControlValue("radio"==t.type?t.name:gx.dom.id(t));gx.fn.setControlOldValue(t,i)}},setControlOldValue:function(n,t){if(n){var r=n.id,i=gx.O.getValidStructFld(r),t=gx.applyPicture(i,t,n);if(i&&i.gxgrid&&(i.gxgrid.IsValidState[r]=i.gxgrid.IsValidState[r]||{},i.gxgrid.IsValidState[r][gx.csv.GX_OLD_VALUE_ATTRIBUTE]=t),"radio"==n.type)for(var r=gx.dom.byName(n.name),i=r.length,u=0;u<i;u++)r[u].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,t);else n.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,t)}},setControlGxValid:function(n,t){if(n&&n.id){var r=n.id,i=gx.O.getValidStructFld(r);i&&i.gxgrid&&(i.gxgrid.IsValidState[r]?i.gxgrid.IsValidState[r].gxvalid=t:i.gxgrid.IsValidState[r]={gxvalid:t});n.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,t)}},setControlValue:function(n,t,i){n=gx.csv.ctxControlId(n);this.setControlValueAny(n,t,i)},setControlValueAny:function(n,t,i){var r=gx.O.getValidStructFld(n),u,e=!1,f;u=gx.dom.el(n,r&&("edit"==r.ctrltype||"checkbox"==r.ctrltype||"combo"==r.ctrltype));r&&("dtime"==r.type||"date"==r.type?""===t?t=gx.date.nulldate_toc(r.len,r.dec):"string"==typeof t&&(t=new gx.date.gxdate(t)):gx.lang.isFixedCharacterType(r.type)&&(t=gx.text.rtrim(t)));t instanceof gx.date.gxdate?gx.lang.emptyObject(r)||(t=gx.date.formatDateTime(r.dec,r.len,gx.dateFormat,t)):gx.lang.instanceOf(t,Number)||"undefined"!=typeof gx.num.dec&&t instanceof gx.num.dec.bigDecimal?gx.lang.emptyObject(r)||(t=gx.num.formatNumber(t,r.dec,gx.rtPicture(r,u),r.len,r.sign,!1)):"string"==typeof t&&!gx.lang.emptyObject(r)&&((e=void 0!=r.isPwd)?null!=u&&"SPAN"==u.nodeName&&(t=gx.text.formatString(t,r.len,r.isPwd)):t=gx.text.formatString(t,r.len,r.isPwd,gx.rtPicture(r,u)));this.persistGridControlValue(n,t);null!=u&&"SPAN"!=u.nodeName?(this.setControlValue_impl(u,t,i),!0!==gx.csv.settingUIparms&&gx.fn.setControlOldValue(u,t)):gx.fn.setHidden(n,t);null!=u&&"SPAN"==u.nodeName&&(n=u);f=!1;f=r?r.multiline:null!=u&&"TEXTAREA"==u.tagName;e?this.setControlValue_span_safe(n,gx.text.formatString(t,r.len,r.isPwd,gx.rtPicture(r,u),i,f)):this.setControlValue_span_safe(n,t,i,f)},setDecimalValue:function(n,t){this.setControlValue(n,t)},toDecimalValue:function(n,t,i){return gx.num.parseFloat(n,t,i)},toDatetimeValue:function(n,t){return new gx.date.gxdate(n,t)},setCheckBoxValue:function(n,t,i){try{var n=gx.csv.ctxControlId(n),r=gx.dom.byId(n);r||(r=gx.dom.form()[n]);r&&(r.checked=t.toString()==i.toString(),r.value=t)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(n,t,i){var r=n.lastIndexOf("_");-1!=r&&(i=i?i:gx.O.getValidStructFld(n.substring(0,r)))&&i.gxgrid&&(r=n.substring(r+1),4<r.length?(r=r.substring(4,r.length),(r=gx.O.getGrid(i.gxgrid.gridName+"_"+r))&&r.persistControlValue(n,t,i)):i.gxgrid.persistControlValue(n,t,i))},setControlValue_span_safe:function(t,i,r,u){if("string"==typeof t&&(t=gx.dom.byId("span_"+t)),t&&"SPAN"!==t.nodeName)var f="span_",f="string"==typeof t?f+t:f+gx.dom.id(t),t=gx.dom.byId(f);null!=t&&(f=gx.dom.bySelector('[data-name="'+t.id+'"]'),2>f.length&&(f=[t]),n.each(f,function(n,t){gx.fn.setControlValue_fmt(t,i,r,u)}))},setControlValue_fmt:function(n,t,i,r){try{if(null!=n)if(1==i){var u=n.getAttribute("data-gxlink");gx.lang.emptyObject(u)||null==n.firstChild||"A"!=n.firstChild.nodeName||(n=n.firstChild);gx.html.setInnerHtml(n,t,!0)}else{for(0==i&&"string"==typeof t&&(t=t.replace(/ +/g," ")),u=n;null!=n.firstChild&&"#text"!=n.firstChild.nodeName;)n=n.firstChild;0==i&&(null==n.firstChild||"#text"!=n.firstChild.nodeName)&&"A"!=n.nodeName?gx.html.setInnerText(u,t,i,r):gx.html.setInnerText(n,t,i,r)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(t,i,r){if("string"==typeof t&&(t=gx.dom.el(t)),i instanceof gx.date.gxdate&&(i=i.getString()),null!=t){var u=gx.dom.byName(t.id);(2>u.length||"radio"===t.type)&&(u=[t]);n.each(u,function(n,t){if("radio"===t.type)gx.fn.setRadioValue(t.name,i);else if(gx.dom.isEditControl(t)||"textarea"==t.type){var u=t.value!==i&&gx.dom.getActiveElement()===t&&t.selectionStart!==t.selectionEnd&&0<t.selectionEnd;t.value=i;u&&gx.fn.setSelection(t)}else void 0!=t.value?t.value=i:gx.fn.setControlValue_span_safe(t,i,r)})}},setGridComboBoxValue:function(n,t,i){this.setComboBoxValue(n+"_"+t,i)},setComboBoxValue:function(n,t){var c=gx.util.browser.isIE(),n=gx.csv.ctxControlId(n),r=gx.dom.byId(n),u,f,o,s,l,h,e,i;if(r){u="";f=gx.O.getValidStructFld(n);gx.lang.emptyObject(f)||(u=f.type);"int"==u?t=gx.text.trim(t):"date"==u&&t instanceof gx.date.gxdate?t=t.getStringWithFmt("Y4MD"):"decimal"!=u&&(t=gx.text.rtrim(t));o=t;s=!1;try{for(l=r.options.length,e=0;e<l;e++)if(i=r.options[e],gx.lang.isNumericType(u)?Number(i.value)==Number(t):gx.text.trim(i.value)==gx.text.trim(t)){if(o="undefined"!=typeof i.innerText?i.innerText:i.text,r.selectedIndex=e,s=!0,i.setAttribute("selected","selected"),h=i,c)break}else c||i.removeAttribute("selected");h&&h.value!=r.value&&gx.util.browser.isFirefox()&&gx.dom.redrawControl(r);s||(r.selectedIndex=0);0<f.grid&&this.persistGridControlValue(n,t,f)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(n,o,0)}},loadRadioButton:function(t,i,r){var u=n(t).parent().closest(".gx-radio-button"),f=n(t),i=n(gx.html.controls.applyTemplate("radio",{id:t.name,className:u.attr("class"),style:u.attr("style"),title:t.title,isDisabled:t.disabled,gxoch0:f.attr("data-gxoch0"),values:n.map(i,function(n,i){return{itemId:t.name+"_"+i,itemValue:n[0],itemDesc:n[1],isSelected:gx.text.trim(r.toString())==gx.text.trim(n[0].toString())}})}));u.replaceWith(i);gx.plugdesign.applyTemplateObject(i)},loadComboBox:function(n,t){this.setComboValues(n,t)},setGridComboValues:function(n,t){var r,i;if(0==this.controlGridId(n))this.setComboValues(n,t);else for(r=1;999>r;r++){if(i=gx.text.padl(r.toString(),4,"0"),i=gx.dom.el(n+"_"+i),null==i)break;this.setComboValues(i.name,t)}},setComboValues:function(n,t){var i=gx.dom.el(n),e=gx.util.browser,f,r,o,u;if(null!=i){for(f="",-1!=i.selectedIndex&&(f=i.options[i.selectedIndex].value);i.options.length>t.length;)i.remove(i.options.length-1);for(;t.length>i.options.length;)r=document.createElement("OPTION"),i.options.add(r);for(o=t.length,u=0;u<o;u++)(r=i.options[u],r.value=t[u][0],e.isIE()&&9<=e.ieVersion()?r.innerText!=t[u][1]&&(r.innerText=t[u][1]):r.text!=t[u][1]&&(r.text=t[u][1]),Number(r.value)?Number(r.value)==Number(f):gx.text.trim(r.value)==gx.text.trim(f))&&(i.selectedIndex=u);0==i.options.length?i.selectedIndex=-1:(-1==i.selectedIndex||i.selectedIndex>i.options.length-1)&&(i.options[0].selected=!0)}},getControlRefById:function(n){return(n=this.validStruct(n))?0==n.grid?this.getControlRef(n.fld,!1):this.getControlGridRef(n.fld,n.grid):null},getControlRef:function(n,t){if(t||(n=gx.csv.ctxControlId(n)),"FORM"==n)return document;var i=gx.dom.el(n);return null!=i?i:null},getControlRef_list:function(n){var t=gx.dom.byName(n);return null!=t?t:(n=gx.dom.byId(n),null!=n?[n]:null)},screen_CtrlRef:function(n){return n=this.getControlGridRef(n,this.controlGridId(n)),gx.lang.emptyObject(n)?null:("hidden"==n.type&&(n=gx.dom.byId("span_"+gx.dom.id(n))),n)},screen_CtrlId:function(n){return this.getControlGridId(n,this.controlGridId(n))},getControlGridId:function(n,t,i){if(n=gx.csv.ctxControlId(n),gx.dom.el(n))return n;try{return 0==t?n:(void 0==i&&(i=this.currentGridRow(t)),n+"_"+i)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(n,t,i){var r,n=gx.csv.ctxControlId(n),u;if((0==t||-1!==n.search(gx.csv.CTRL_ROW_INDEX_REGEXP))&&(r=gx.dom.el(n)))return r;try{if(0==t)return null;if(void 0==i&&(i=this.currentGridRow(t)),r=gx.dom.el(n+"_"+i))return r;if(u=gx.O.getComponentData(n),u)return gx.dom.el("gxHTMLWrp"+u.Prefix+i)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRowSafe:function(n,t){var i=gx.fn.getGridObj(n,t);if(i&&i.grid.rows.length>=t)return gx.fn.setCurrentGridRow(n,t)},setCurrentGridRow:function(n,t){if("0000"!=t)try{return gx.currentRows[n]=t}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(n){try{return gx.currentRows[n]}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(n){return n=this.currentGridRowImpl(n),void 0==n?"0001":n},gridDuplicateKey:function(n){if(n=gx.fn.validStruct(n),void 0!=n){var t=n.gxgrid;if(null!=t&&(t=t.updateControlValue(n,!0)))return t.gxHasDuplicateKey()}return!1},firstGridControl:function(n,t){var r=gx.fn.controlIds(),f=r.length,u;for(i=0;i<f;i++)if(u=gx.fn.validStruct(r[i],t),void 0!=u&&u.grid==n)return r[i];return-1},lastGridControl:function(n,t){var r=gx.fn.controlIds(),u;for(i=r.length-1;0<=i;i--)if(u=gx.fn.validStruct(r[i],t),void 0!=u&&u.grid==n)return r[i];return-1},getGridDateTimeValue:function(n,t){var i=this.getControlValue(n+"_"+t);return new gx.date.gxdate(i,gx.dateFormat)},getGridDecimalValue:function(n,t,i,r){return this.getDecimalValue(n+"_"+t,i,r)},getGridIntegerValue:function(n,t,i){return this.getIntegerValue(n+"_"+t,i)},getGridControlValue:function(n,t){return this.getControlValue(n+"_"+t)},getControlValue:function(n,t,i,r){return this.getControlValue_impl(gx.csv.ctxControlId(n,i),t,i,r)},getControlValue_impl:function(){var n=/_CMPPGM$/g;return function(t,i,r,u){var r,e,u,f;if("hidden_only"==i)return gx.fn.getHidden(t);if(0<=t.search(n))return"nohidden"===i?null:gx.fn.getHidden(t);if(r=r||gx.O,u=u||(r?r.getValidStructFld(t):null),!u||!u.gxgrid||!u.gxgrid.grid||!u.gxgrid.grid.useHiddensForControlValues){if(f=u&&("edit"==u.ctrltype||"checkbox"==u.ctrltype||"combo"==u.ctrltype)?gx.dom.byId(t):gx.dom.el(t,!1,!0),null!=f&&r&&(u&&!f.gxtype&&(f.gxtype={type:u.type,len:u.len,dec:u.dec}),"checkbox"==f.type&&u.values&&u.values.length&&1<u.values.length?e=f.checked?u.values[0]:u.values[1]:"hidden"==f.type||"text"==f.type||"textarea"==f.type||"checkbox"==f.type?e=f.value:"radio"==f.type?e=gx.fn.getRadioValue(gx.dom.byName(t)):("SELECT"==f.nodeName&&0<f.options.length?e=-1!=f.selectedIndex?"screen"==i?f.options[f.selectedIndex].text:f.options[f.selectedIndex].value:"screen"==i?f.options[0].text:f.options[0].value:u&&"date"!=u.type&&"dtime"!=u.type&&"bits"!=u.type&&"audio"!=u.type&&"video"!=u.type&&"binaryfile"!=u.type&&(e=f.value),"IMG"==f.nodeName||"INPUT"==f.nodeName&&"image"==f.type)&&(e=f.getAttribute("src")),void 0!==e))return u&&"boolean"==u.type?gx.lang.gxBoolean(e):e;if(f=gx.dom.byId("span_"+t),null!=f)return t=gx.fn.getHidden(t),f=gx.fn.getControlValue_span(f),"screen"==i?void 0!=f?f:t:void 0!=t?t:f;if(f=gx.dom.form()[t],null!=f)return this.getControlValueInt(f);if(ControlList=gx.dom.byName(t),null!=ControlList){for(r=ControlList.length,u=0;u<r;u++)if(f=ControlList[u],null!=f)return this.getControlValueInt(f);if(f=ControlList[0])return f.value}}return null==f?"nohidden"===i?null:gx.fn.getHidden(t):""}}(),setRadioValue:function(t,i){var t=gx.csv.ctxControlId(t),u=gx.dom.byName(t),e,r,f;if(null!=u)for(e=u.length,r=0;r<e;r++)if(f=n(u[r]),gx.text.ltrim(u[r].value)==gx.text.ltrim(i)){f.attr("checked","");f.prop("checked",!0);break}},getRadioValue:function(n){for(var i=n.length,t=0;t<i;t++)if(n[t].checked)return n[t].value;return""},getRadioSelected:function(n){for(var n=gx.dom.byName(n),i=n.length,t=0;t<i;t++)if(n[t].checked)return n[t];return null},getControlValueInt:function(n){var t,i;if(void 0!=n.length&&"SELECT"!=n.tagName&&"undefined"!=typeof n[0]&&"radio"==n[0].type)return this.getRadioValue(n);if("checkbox"==n.type)return n.checked;if("SPAN"==n.tagName)return t=gx.fn.getHidden(gx.dom.id(n)),void 0!=t?t:gx.fn.getControlValue_span(n);if("INPUT"==n.tagName&&"text"==n.type&&(t=gx.dom.id(n),gx.O)&&(i=gx.O.getValidStructFld(t),i&&"undefined"!=typeof gx.rtPicture(i,n))){if("int"==i.type)return this.getIntegerValue(t,-1!=gx.rtPicture(i,n).indexOf(",")?gx.thousandSeparator:"");if("decimal"==i.type)return this.getDecimalValue(t,-1!=gx.rtPicture(i,n).indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}return n.value},getControlValue_span:function(n){for(;n&&!n.nodeValue;)n=n.childNodes[0];return n&&n.nodeValue?n.nodeValue:""},getDateTimeArrayValue:function(t){try{var i,u=function(t,i){return gx.lang.emptyObject(t)||n.each(t,function(n,r){t[n]=new gx.date.gxdate(r,i)}),""},r=this.getControlValue(t,"nohidden");return i=u(r,gx.dateFormat),i||(r=gx.fn.getHidden(gx.csv.ctxControlId(t)),i=u(r,"Y4MD")),i}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(n){return this.getDateTimeValue(n)},getDateTimeValue:function(n){try{var t=this.getControlValue(n,"nohidden");return gx.lang.emptyObject(t)?(t=gx.fn.getHidden(gx.csv.ctxControlId(n)),new gx.date.gxdate(t,"Y4MD")):new gx.date.gxdate(t,gx.dateFormat)}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(n,t,i){var r=0,r=gx.O?gx.O.getValidStructFld(n):null,n=this.getControlValue(n,i,void 0,r);return(r&&n&&(n=gx.num.extractValue(gx.rtPicture(r),n)),gx.lang.isArray(n))?n:(n="undefined"!=typeof n?n.toString():"",0===n.length&&r&&"Blank"===r.emptyAsNull)?n:(r=n.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(n,10,t):new gx.num.dec.bigDecimal(gx.text.replaceAll(n,t,"")).setScale(0,gx.num.dec.ROUND_UP).toString(),isNaN(r)?0:r)},getDecimalValue:function(n,t,i,r){var u=gx.O?gx.O.getValidStructFld(n):null,r=this.getControlValue(n,r,void 0,u),n=gx.dom.el(n,u&&("edit"==u.ctrltype||"checkbox"==u.ctrltype||"combo"==u.ctrltype));return(u&&r&&(r=gx.num.extractValue(gx.rtPicture(u,n),r)),"undefined"!=typeof r&&0===r.length&&u&&"Blank"===u.emptyAsNull)?"":gx.lang.isArray(r)?r:(t=gx.num.parseFloat(r||"",t,i),isNaN(t)?0:t)},getBlobValue:function(n){var t=gx.dom.byId("Object_"+n);if(null!=t){if(t.data&&!gx.text.endsWith(t.data,"about:blank"))return t.data}else if(t=gx.dom.byId("Link_"+n),null!=t)return t.getAttribute("href");return""},getVarControlMap:function(n,t){var i,r;if(n=n||gx.O)for(i in n.VarControlMap)if("function"!=typeof i&&(r=n.VarControlMap[i],r.id==t||n.CmpContext+r.id==t))return i;return null},getVarControlMapForVar:function(n){for(var t in gx.O.VarControlMap)if("string"==typeof t&&t==n)return gx.O.VarControlMap[t];return null},v2c:function(n,t,i,r){n.v2c(r);"undefined"==typeof t&&(t=n.val(r));n=gx.fn.getControlGridRef(n.fld,n.grid,r);gx.plugdesign.controlValueChanged(n,t);i&&(n.value="")},v2cMap:function(n){var t=this.getVarControlMapForVar(n),i;null!=t&&(i="","number"==typeof t.grid&&0!=t.grid&&(i="_"+gx.fn.currentGridRowImpl(t.grid)),gx.fn.setHidden(gx.O.CmpContext+t.id+i,gx.O[n]))},c2vMap:function(n){var t=this.getVarControlMapForVar(n),i;null!=t&&(i="","number"==typeof t.grid&&0!=t.grid&&(i="_"+gx.fn.currentGridRowImpl(t.grid)),gx.O[n]=gx.fn.getHidden(gx.O.CmpContext+t.id+i))},depsToVars:function(n){for(var r,i,t=0;t<n.length;t++)r=n[t],i=gx.fn.vStructForVar(r),!gx.lang.emptyObject(i)&&"function"==typeof i.c2v?i.c2v():this.c2vMap(r)},verticalFormula:function(n,t,i,r,u,f,e){var o=gx.fn.vStructForVar(n),v,s;gx.lang.emptyObject(o)?this.v2cMap(n):o.v2c(r);var y=gx.fn.currentGridRowImpl(i),l=gx.fn.getGridObj(i,r),h=0,a=!1;if(l){for(v=l.grid.rows.length,s=0;s<v;s++){var c=l.grid.rows[s],p=c.gxDeleted(),w=c.gxExists(),b=c.gxIsMod();!p&&(w||b)&&(gx.fn.setCurrentGridRow(i,c.gxId),e&&0<e.length?this.depsToVars(e):!gx.lang.emptyObject(o)&&"function"==typeof o.c2v?o.c2v():this.c2vMap(n),u.call(gx.O)&&(a=!0,h=f(s,h)))}gx.fn.setCurrentGridRow(i,y);e&&0<e.length?this.depsToVars(e):!gx.lang.emptyObject(o)&&"function"==typeof o.c2v?o.c2v(r):this.c2vMap(n);a||(h=t)}else gx.dbg.write("verticalFormula: can´t find grid "+i+" at row "+r);return h},rowValueHandler:function(n,t,i,r,u,f,e){var o,s,h;try{o=gx.fn.vStructForVar(n)||gx.fn.getVarControlMapForVar(n);s=o?o.type:"decimal";switch(s){case"boolean":return r(n,t,i);case"int":case"decimal":return h=gx.num.parseFloat(gx.O[n],f,e),0==t?h:u(n,t,i,h);default:gx.dbg.write("Warning: Forumula not supported for: ",n,s)}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","Formula could not be calculated for Field: "+n)}},maxFrm:function(n,t,i,r,u,f,e,o){var s=function(n,t,i){return i||gx.O[n]},h=function(n,t,i,r){return r>i?r:i};return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){return gx.fn.rowValueHandler(n,t,u,s,h,i,r)},o)},sumFrm:function(n,t,i,r,u,f,e,o){var s=function(n,t,i){return i||gx.O[n]},h=function(n,t,i,r){return r+i};return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){return gx.fn.rowValueHandler(n,t,u,s,h,i,r)},o)},minFrm:function(n,t,i,r,u,f,e,o){var s=function(n,t,i){return i&&gx.O[n]},h=function(n,t,i,r){return r<i?r:i};return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){return gx.fn.rowValueHandler(n,t,u,s,h,i,r)},o)},averageFrm:function(n,t,i,r,u,f,e,o){return gx.fn.verticalFormula(n,t,u,f,e,function(t,u){var f=gx.num.parseFloat(gx.O[n],i,r);return 0==t?f:(u*t+f)/(t+1)},o)},countFrm:function(n,t,i,r,u,f){return gx.fn.verticalFormula(n,t,i,r,u,function(n,t){return 0==n?1:t+1},f)},serialRule:function(n,t,i,r,u){return(u=u||gx.O,"INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(i),i))?u[n]:(gx.lang.emptyObject(u[t])&&(u[t]=u[n]+r,(i=gx.fn.vStructForVar(t))&&i.v2c(),(i=u.VarControlMap[n])&&gx.fn.setControlValue(i.id,u[t])),t=u[t]||0,n=u[n]||0,0<r?Math.max(t,n):Math.min(t,n))},setReturnParms:function(n,t,i,r){var f,e,u,o,s,h;try{if(gx.csv.settingUIparms=!0,r)for(e=i.length,f=0;f<e;f++)u=gx.fn.vStructForVar(t[f]),r.grid.setCellValue.apply(r.grid,[u,i[f]]);else if(n&&t&&i&&(e=t.length,e==i.length)){for(gx.setGxO(n),r=null,f=0;f<e;f++)o=t[f],o&&(s=i[f],u=gx.fn.vStructForVar(o),gx.lang.emptyObject(u)&&(u=gx.fn.vStructForHC(o)),u?(h=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(u.fld)),u.v2v&&(u.v2v(s),gx.fn.v2c(u,s)),"function"==typeof u.v2bc&&u.v2bc.call(n),gx.fn.isAccepted(h)&&(r=h,gx.evt.onchange_impl(h)),n.refreshDependantGrids(u)):n.setVariable(o,s));r&&gx.fn.setFocus(r)}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setReturnParms")}gx.csv.settingUIparms=!1},isOutputParm:function(n){return n&&n.IOType&&("out"==n.IOType||"inout"==n.IOType)?!0:!1},checkPopupFocus:function(n){if(gx.popup.ispopup()){var t=gx.popup.getPopup();if(t&&t.frameDocument&&(n.ownerDocument?n.ownerDocument:n.document).URL!=t.frameWindow.location.href)return t.setFocusFirst(),!1}return!0},persistControlProperty:function(n,t,i){n=gx.fn.screen_CtrlId(gx.csv.ctxControlId(n));gx.usrPtys[n]||(gx.usrPtys[n]={});gx.usrPtys[n][t.toLowerCase()]=i},setCtrlProperty:function(n,t,i){var r,u;gx.O?(r=null,r="FORM"==n?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(n)),null!=r&&(this.persistControlProperty(n,t,i),u=gx.O.getValidStructFld(n),this.setCtrlPropertyImpl(r,t,i,u))):gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(t,i,r){var u=gx.fn.screen_CtrlRef(t),f;null!=u&&(this.setCtrlPropertyImpl(u,i,r),f=gx.fn.controlGridId(t),f&&(u=n(u).parent().closest("TD",n("[data-gxgridid="+f+"]").get(0)).get(0))&&(this.persistControlProperty(t,i,r),this.setCtrlPropertyImpl(u,i,r)))},getControls:function(t){var i=[t];return(t=this.getRONode(t.id,!1))&&i.push(t),n(i)},setCtrlPropertyImpl:function(t,i,r,u){var u,o;if(null!=t&&(t==document&&"Backcolor"==i&&(t=document.body,this.setCtrlPropertyImpl(gx.dom.form(),i,r)),u=u||gx.O.getValidStructFld(t.id),!("Enabled"===i||"Visible"===i)||!u||!(0<u.grid&&gx.fn.rowIsRemoved(u.grid,gx.fn.controlRowId(t))))){var e=u?u.ctrltype:null,s=t,f={control:s,property:i,value:r};if(gx.fx.obs.notify("gx.control.onbeforepropertychange",[f]),!f.cancel){f=n();switch(i){case"Picture":t.setAttribute("data-gx-rt-picture",r);u&&(u.v2c(),u.c2v());break;case"Caption":this.setCtrlCaption(t,r);break;case"Tooltiptext":t.title=r;break;case"Invitemessage":t.placeholder=r;break;case"Visible":if("INPUT"==t.nodeName&&"button"==t.type)this.setButtonVisibility(t,!this.propertyValueFalse(r));else{for(e="checkbox"===t.type,"INPUT"==t.nodeName&&(e&&n(t).parent().is("span:not(.gx-checkbox-wrapper)")?f=n(t).parent():"radio"==t.type&&(u=n(t).parent().closest(".gx-radio-button"),0<u.length&&(t=u[0])),(u=gx.html.multimediaUpload.getContainer(t))&&(t=u)),u=this.propertyValueFalse(r),o=t.gxusrdisabled&&!e?t.gxusrdisabled:!1,u?(e=gx.dom.byId("span_"+t.id),this.setVisible(t,!u),e&&this.setVisible(e,!u)):((e=this.getRONode(t.id,o))&&this.setVisible(e,o),this.setVisible(t,!o)),e=0;e<f.length;e++)this.setVisible(f[e],!o);gx.fn.setDateCtrlProperties(t,!o,!u)}gx.fn.checkAttachedProperty(t.id,i,gx.lang.gxBoolean(r));break;case"Enabled":if(u=this.propertyValueFalse(r),"hidden"===t.type)return;if("textblock"===e&&n(t).toggleClass("gx-disabled",u),("SPAN"===t.tagName||"DIV"===t.tagName&&"1"===t.getAttribute("data-gxformat"))&&u)return;if("INPUT"===t.nodeName&&"radio"===t.type)for(f=gx.dom.byName(t.name),o=f.length,e=0;e<o;e++)this.setEnabledProperty(f[e],!u);else(gx.dom.isEditControl(t)||"textarea"===t.type||"file"===t.type||"SELECT"===t.tagName)&&"password"!==t.type?(e=this.getRONode(t.id,u),gx.fn.isVisible(t,0)||e&&gx.fn.isVisible(e,0)?(e&&this.setVisible(e,u),this.setEnabledProperty(t,!u),this.setVisible(t,!u),gx.fn.setDateCtrlProperties(t,!u,!0),gx.fn.checkAttachedProperty(t.id,i,!u),gx.fn.checkAttachedProperty(t.id,"Visible",!u)):(this.setEnabledProperty(t,!u),gx.fn.setDateCtrlProperties(t,!u,!1),gx.fn.checkAttachedProperty(t.id,i,!u))):this.setEnabledProperty(t,!u);break;case"Class":t==document?(f=n(gx.dom.form()),u=n(document.body),e=f.attr("data-gx-class")||"",u.removeClass(e).attr("class",r+" "+u.attr("class")),f.removeClass(e).attr({"class":r+" "+f.attr("class"),"data-gx-class":r})):(f=this.getControls(t),f.attr("class",r),0>=r.indexOf("Readonly")&&n(this.getRONode(t.id,!1)).attr("class",r+" Readonly"+r));break;case"Columnclass":(f=t.parentNode)&&"TD"==f.tagName&&this.setCtrlClass(f,"gx-attribute "+r);break;case"Columnheaderclass":(f=t.parentNode)&&"TD"==f.tagName&&(f=n(f).closest("table").find("th:nth-child("+(f.cellIndex+1)+")").get(0))&&this.setCtrlClass(f,r);break;case"Link":this.setCtrlLink(this.getRONode(t.id,!1)||t,r);break;case"Linktarget":this.setCtrlLinkTarget(this.getRONode(t.id,!1)||t,r);break;case"Backcolor":(u=gx.color.html(r))&&void 0==t.gxGridName&&(f=this.getControls(t),f.css("background-color",u.Html));break;case"Background":f=this.getControls(t);f.css("background-image","url("+r+")");break;case"Forecolor":(u=gx.color.html(r))&&(f=this.getControls(t),f.css("color",u.Html));break;case"Fontbold":u=this.propertyValueFalse(r);f=this.getControls(t);f.css("fontWeight",u?"normal":"bold");break;case"Fontitalic":u=this.propertyValueFalse(r);f=this.getControls(t);f.css("fontStyle",u?"normal":"italic");break;case"Fontunderline":u=this.propertyValueFalse(r);f=this.getControls(t);f.css("textDecoration",u?"none":"underline");break;case"Fontstrikethru":u=this.propertyValueFalse(r);f=this.getControls(t);f.css("textDecoration",u?"none":"line-through");break;case"Fontname":f=this.getControls(t);f.css("fontFamily",r);break;case"Fontsize":f=this.getControls(t);f.css("fontSize",r+"pt");break;case"Filename":this.setBlobFilename(t,r);break;case"Filetype":this.setBlobFiletype(t,r);break;case"URL":this.setBlobUrl(t,r);break;case"IsBlob":this.setMultimediaType(t,r);break;case"Bitmap":t.src=r;break;case"SrcSet":void 0!==r&&(t.srcset=r);break;case"Multimedia":this.setMultimediaValue(t.id,r);break;case"Jsonclick":t.jsevent=r;break;case"Source":f=r;u=f.indexOf("?");0<u&&(f=f.substring(0,u));t.src=-1==f.indexOf(":")&&-1==f.indexOf("/")?gx.ajax.objectUrl(r):gx.util.resourceUrl(r,!0);gx.evt.attach(t,"load",gx.dom.autofitIFrame);break;case"Values":("SELECT"==t.tagName||gx.dom.isRadio(t)||"SPAN"==t.tagName)&&(r=gx.json.evalJSON(r),"SELECT"==t.tagName?!1!=r.isset&&(gx.fn.loadComboBox(t.id,r.v),gx.fn.setComboBoxValue(t.id,r.s)):gx.dom.isRadio(t)?!1!=r.isset&&gx.fn.loadRadioButton(t,r.v,r.s):(f=t.id.substring(5),e="",o=r.s,u=gx.O.getValidStructFld(f),gx.lang.emptyObject(u)||(e=u.type),o=gx.fn.trimSelectValue(o,e),r.s=o,gx.fn.setControlValue_span_safe(f,gx.fn.selectedDescription(r,e))));break;case"Width":t.width&&(t.width=r);t.style.width=gx.dom.addUnits(r);break;case"Height":t.height&&(t.height=r);t.style.height=gx.dom.addUnits(r);break;case"Ispassword":t.type=gx.lang.gxBoolean(r)?"password":"text"}(t=gx.dom.id(t))&&(u=gx.O.getValidStructFld(t),t=t+(u&&u.grid&&0<u.grid?"":"_")+i,gx.fn.createPtyCondition(i)||gx.fn.isHidden(t))&&(r=!0==r?"1":!1==r?"0":r,gx.fn.setHidden(t,r));gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:s,property:i,value:r}])}}},createPtyCondition:function(n){return("Visible"==n||"Enabled"==n)&&gx.O.isTransaction()},setEnabledProperty:function(n,t,i){var r=gx.dom.id(n);if(gx.lang.gxBoolean(t)){if(delete gx.disabledControls[r],gx.fn.isAccepted(n,!1))return}else gx.util.addOnce(gx.disabledControls,n,r);!0==gx.csv.validating&&t&&null==gx.csv.validActivatedControl&&n!=gx.csv.lastControl&&(r=gx.O.getValidStructId(r),r>gx.O.fromValid&&r<=gx.O.toValid&&(gx.csv.validActivatedControl=n));n.gxusrdisabled=!t;n.disabled=n.gxdisabled?!0==n.gxdisabled?!0:n.gxusrdisabled:n.gxusrdisabled;(void 0===i||i)&&this.setEnabled(n,t)},setEnabled:function(t,i){var r,u,f;if(gx.lang.booleanValue(i)?gx.dom.removeClass(t,"gx-disabled"):gx.dom.addClass(t,"gx-disabled"),this.disabledAsSpan(t)){try{"checkbox"==t.type&&(r=t.parentNode);"radio"==t.type&&(r=n(t).parent().closest(".gx-radio-button")[0])}catch(e){}gx.lang.booleanValue(i)?(r&&0==r.className.indexOf("Readonly")&&(r.className=r.className.substring(8)),this.isVisible(t))&&(this.setVisible(t,1),(r=this.getRONode(t.id,!0))&&this.setVisible(r,0)):(r&&0>r.className.indexOf("Readonly")&&!gx.text.startsWith(r.className,"gx-")&&(r.className="Readonly"+r.className),this.isVisible(t)&&"password"!=t.type&&"image"!=t.type&&"checkbox"!=t.type&&"radio"!==t.type)&&(r=this.getRONode(t.id,!0))&&(this.setVisible(t,0),this.setVisible(r,1),u=gx.O.getValidStructFld(t),f=0,!gx.lang.emptyObject(u)&&u.format&&(f=u.format),this.setControlValue_span_safe(r,gx.fn.getControlValue(gx.dom.id(t),"screen",void 0,u),f,"textarea"==t.type))}},disabledAsSpan:function(n){var t=n.tagName.toUpperCase();return"IMG"!=t&&!("INPUT"==t&&"button"==n.type)},setVisible:function(t,i){n(t).toggleClass("gx-invisible",!gx.lang.booleanValue(i));t.style.display=0==i?"none":this.displayByType(t.nodeName);var r=gx.O.getValidStructFld(t),u=t.parentNode;i&&r&&r.gxgrid&&!r.gxgrid.grid.gxIsFreestyle&&null!=u.getAttribute("data-colindex")?r.gxgrid.applyPropEntireColumn(u.getAttribute("data-colindex"),"Visible",i):gx.fn.rowGridId(t)&&(r=n(t).find("table")[0])&&this.setVisible(r,i)},getRONodePrefix:function(){return"span_"},getRONode:function(n,t){if(gx.lang.emptyObject(n))return null;var i=gx.dom.byId(n),u=this.getRONodePrefix()+n,r=gx.dom.byId(u);return null!=r?r:!t||null==i||"INPUT"===i.nodeName&&("radio"===i.type||"checkbox"===i.type)?null:(r=document.createElement("SPAN"),r.setAttribute("id",u),this.setVisible(r,!1),r.className="Readonly"+i.className,u="IMG"==i.nodeName||"INPUT"==i.nodeName&&"image"==i.type?i.value:gx.fn.getControlValue(gx.dom.id(i),"screen"),r.appendChild(document.createTextNode(u||"")),i.parentNode.insertBefore(r,i),r)},setDateCtrlProperties:function(t,i,r){var u=gx.dom.byId(gx.dom.id(t)+"_dp_trigger");u&&n(u).toggle(i);(u=n(gx.dom.byId(gx.dom.id(t)+"_dp_container")))&&(t.Flat&&n(t).hide(),t=n(".calendar",u),u.toggle(i&&r||!i&&r),t&&t.toggle(i&&r))},getGridCtrlProperty:function(n,t,i){var r,u;try{if(0!=n){if(r=this.getGridObj(n),r&&(u=r.grid.getColumnByHtmlName(t),u))return u[i.toLowerCase()]}else return this.getCtrlProperty(t,i)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(n,t){var r=gx.O.getValidStructFld(n),i=r&&0<r.grid?"_"+gx.fn.currentGridRowImpl(r.grid):"",i=gx.uc.getUserControlObj(gx.uc.userControlContainerId(n+i));return null!=i?i[t]:(i=this.screen_CtrlRef(n))?"Picture"===t?gx.rtPicture(r,i):"Text"===t?this.getControlValue(n,"screen",void 0,r):"Visible"==t&&gx.fn.getRONode(i.id)?this.getCtrlProperty_impl(i,t)||this.getCtrlProperty_impl(gx.fn.getRONode(n),t):"Enabled"==t&&gx.fn.getRONode(i.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(i.id),"Visible"):this.getCtrlProperty_impl(i,t):void 0},getCtrlProperty_impl:function(t,i){if(null==t)return"";switch(i){case"Tooltiptext":return t.title;case"Invitemessage":return t.placeholder;case"Visible":if("INPUT"===t.nodeName&&"radio"===t.type){var r=n(t).parent().closest(".gx-radio-button");0<r.length&&(t=r[0])}return"none"!=t.style.display;case"Enabled":return void 0===t.disabled?n(t).hasClass("gx-disabled")?!1:!0:!t.disabled;case"Class":return t.className;case"Backcolor":return gx.color.css(t.style.backgroundColor);case"Forecolor":return gx.color.css(t.style.color);case"Width":return gx.dom.dimensions(t).w;case"Height":return gx.dom.dimensions(t).h;case"Caption":return this.getCtrlCaption(t);case"Fontbold":return"bold"==t.style.fontWeight;case"Fontitalic":return"italic"==t.style.fontStyle;case"Fontunderline":return"underline"==t.style.textDecoration;case"Fontstrikethru":return"line-through"==t.style.textDecoration;case"Fontname":return t.style.fontFamily;case"Filename":return t.value.split(/(\\|\/)/g).pop();case"Fontsize":return r=parseInt(t.style.fontSize),isNaN(r)?12:r;case"Ispassword":return"password"==t.type}},displayByType:function(n){switch(n){case"TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case"P":case"DIV":return"block"}return""},setCtrlCaption:function(n,t){var r,u,i;try{if(r=gx.html.getFieldLabel(n),r)gx.fn.setControlValue_fmt(r,t,0,!1);else{switch(n.tagName){case"SPAN":case"DIV":case"FIELDSET":u=n.getAttribute("data-gxformat");i=gx.O.getValidStructFld(n);null==u&&(u=!gx.lang.emptyObject(i)&&i.format?i.format:0);r=!1;i&&(r=i.ctrltype?i.multiline:!0);gx.fn.setControlValue_fmt(n,t,u,r);return;case"INPUT":"checkbox"!=n.type&&(n.value=t);return}"#document"==n.nodeName&&(n.title=t)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(t){var i=gx.html.getFieldLabel(t);if(i)return n(i).text();switch(t.tagName){case"SPAN":case"DIV":case"FIELDSET":if(i=t.getAttribute("data-gxformat"),null!=i&&"1"==i)return t.innerHTML;for(;null!=t.firstChild&&"#text"!=t.firstChild.nodeName;)t=t.firstChild;return"undefined"!=typeof t.innerText?t.innerText:t.textContent||t.text;case"INPUT":if("checkbox"!=t.type)return t.value;break;default:return""}},propertyValueFalse:function(n){return"string"==typeof n&&(n=n.toLowerCase(),"false"==n||0==gx.num.parseFloat(n))?!0:0==n},setButtonVisibility:function(n,t){var r=t?"":"none",i=n.parentNode;gx.lang.emptyObject(i)||"SPAN"!=i.nodeName||(i.style.display=r,i=i.parentNode,!gx.lang.emptyObject(i)&&"SPAN"==i.nodeName&&(i.style.display=r,i=i.parentNode,!gx.lang.emptyObject(i)&&"SPAN"==i.nodeName&&(i.style.display=r,i=i.parentNode,!gx.lang.emptyObject(i)&&"SPAN"==i.nodeName&&(i.style.display=r))));n.style.display=r},setBlobValue:function(n,t){this.setBlobUrl(gx.dom.byId(n)||gx.dom.byId("Object_"+n),t)},setBlobFilename:function(n,t){if(null!=n){var i=gx.O.getValidStructFld(n);i&&gx.fn.setHidden(i.fld+"_Filename",gx.text.trim(t))}},setBlobFiletype:function(n,t){if(null!=n){var i=gx.O.getValidStructFld(n);i&&gx.fn.setHidden(i.fld+"_Filetype",gx.text.trim(t));i=n;"INPUT"==i.nodeName&&"file"==i.type&&(i=gx.dom.byId("Object_"+n.id));null!=i&&(t=gx.util.getContentType(t),this.setObjectCtrlType(i,t),gx.fn.setVisible(i,!0))}},resolveResourceUrl:function(n,t){if(""==n)return t?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.isabsoluteurl(n))if(gx.isRelativeToHost(n)){if(0!=n.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+n,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+n,!1);return n},setBlobUrl:function(t,i){var r=gx.html.multimediaUpload.getContainer(t),u,f;r?(u=this.resolveResourceUrl(i,!1),gx.html.multimediaUpload.setPreviewImage(r,u),gx.html.multimediaUpload.setPreviewLink(r,u)):i.match(/^[a-z]:[\S]*/i)||null==t||(r=t,u="INPUT"==r.nodeName&&"file"==r.type,""===i&&""===i&&(f=n(r),f.wrap("<form>").closest("form").get(0).reset(),f.unwrap()),u&&(r=gx.dom.byId("Object_"+t.id)),null!=r&&(u=gx.util.getContentTypeFromExt(i),r=this.setObjectCtrlType(r,u)),null!=r?"IMG"==r.tagName?(i=this.resolveResourceUrl(i,!0),r.src=i):(r.data=i||"about:blank",gx.fn.setVisible(r,!0),this.resizeObject(r),gx.dom.redrawControl(r)):(r=gx.dom.byId("Link_"+t.id),null!=r&&(r.style.display=""!=i?"block":"none",r.href=i)))},setGridMultimediaValue:function(n,t,i,r){if(void 0!==t)return this.setMultimediaValue(n+"_"+t,i,r)},setMultimediaValue:function(n,t,i){var r=gx.dom.byId(gx.csv.ctxControlId(n)),f,u,e,o;r&&(f=gx.html.multimediaUpload.getContainer(r),u=this.resolveResourceUrl(i||t||"",!1),f?(0<=gx.util.Url.parseWithAnchor(t).protocol.search(/^https?:/)&&gx.html.multimediaUpload.setPreviewImage(f,u),e=""==t&&""==i||""!=t,e||(o=gx.dom.byId(r.id+"_GXI"),o&&(o.value=i)),(n=gx.dom.byId(n))&&""==t&&(n.value=""),this.setMultimediaType(r,e),gx.html.multimediaUpload.setPreviewLink(f,u)):(("IMG"==r.tagName||"INPUT"==r.tagName&&"image"==r.type)&&(r.src=u),(t=r.parentNode)&&"A"==t.tagName&&gx.dom.isMultimediaElement(r)&&(u?t.href=u:t.removeAttribute("href"))))},setMultimediaType:function(n,t){if(n){var i=gx.html.multimediaUpload.getContainer(n);i&&gx.html.multimediaUpload.setType(i,gx.lang.gxBoolean(t))}},setObjectCtrlType:function(n,t){var u=n,r,f,e;if("IMG"==n.nodeName&&(!t||0==t.indexOf("image/")))return u;if((n.type!=t||"OBJECT"==n.nodeName&&0==t.indexOf("image/"))&&(u=0==t.indexOf("image/")?gx.html.nodesFromText('<img id="'+n.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+n.id+'" type="'+t+'">')[0])){try{for(r in n.attributes)if("id"!=r&&"type"!=r&&"implementation"!=r&&n[r])try{u[r]=n[r]}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","setObjectCtrlType")}}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","setObjectCtrlType")}if(r=n.parentNode){for(f=null,e=r.childNodes.length,i=0;i<e;i++)if(r.childNodes[i]==n){i<e-1&&(f=r.childNodes[i+1]);break}gx.dom.removeControlSafe(n);null!=f?r.insertBefore(u,f):r.appendChild(u)}}return u},resizeObject:function(n){var t=gx.lang.emptyObject;!t(n.data)&&"about:blank"!=n.data&&t(n.width)&&t(n.height)&&t(n.style.width)&&t(n.style.height)&&(n.style.width="200px",n.style.height="200px")},restoreLostCtrlOnGridRefresh:function(n,t,i){if(null==t.form){var r=gx.dom.id(t);(r=gx.O.getValidStructFld(r))&&"checkbox"==t.type&&(!r.gxgrid||parseInt(n||0,10)===parseInt(r.gxgrid.grid.firstRecordOnPage||0,10))&&(t=gx.dom.el(t.id)||gx.dom.el(t.name),t.checked=i)}return t},checkboxClick:function(n,t,i,r,u){var e=t.checked,u=u?gx.getObj(u):null,f="object"==typeof n?n:gx.fn.validStruct(n,u),s=f&&f.gxgrid?f.gxgrid.grid.firstRecordOnPage:0,h=f&&f.grid?f.grid:0,o=function(n){(n||gx.csv.validatingGrid===h)&&(t=this.restoreLostCtrlOnGridRefresh(s,t,e),gx.fn.setControlOldValue(t,t.value),t.checked=e,t.value=e?i:r,f&&("function"==typeof f.c2v&&f.c2v(),"function"==typeof f.v2bc&&f.v2bc.call(gx.O)))}.closure(this);gx.pO.supportAjaxEvents&&gx.fx.obs.addObserver("gx.onaftervalidate",this,function(n){n!==gx.evt.types.VALUECHANGED&&o()},{single:!0});gx.fx.obs.notify("gx.validation",null,function(){gx.evt.fixWebKitOnFocus()&&t.onfocus();o.call(this,!0)});gx.pO.fullAjax||o.call(this,!0)},setCtrlClass:function(n,t){null!=n&&(n.className=t)},setCtrlLink:function(t,i){var r,f,u;null!=t&&(""==i?this.unsetCtrlLink(t):"A"==t.tagName?t.href=i:(r=t.firstChild,r&&"A"==r.tagName?r.href=i:(f=t.parentNode,"A"==f.tagName?f.href=i:(u=document.createElement("A"),u.href=i,r&&"#text"==r.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(u,!0),u.innerHTML=r.nodeValue,t.replaceChild(u,r)):(f.replaceChild(u,t),u.appendChild(t)),(r=n(t).attr("data-gx-link-target"))&&n(u).attr("target",r)))))},unsetCtrlLink:function(n){if(null!=n&&(n=n.parentNode,"A"==n.tagName)){var t=n.firstChild;if(ParentTag2=n.parentNode,null!=ParentTag2){for(;null!=t;)ParentTag2.insertBefore(t,n),t=n.firstChild;gx.dom.removeControlSafe(n)}}},setCtrlLinkTarget:function(t,i){if(null!=t){var r=n(t);r.is("a")||(r=r.children());r.is("a")&&r.attr("target",i);n(t).attr("data-gx-link-target",i)}},isVisible:function(n,t){if(gx.dom.hasClass(n,"gx-invisible")||"INPUT"===n.tagName.toUpperCase()&&"hidden"===n.type||"none"===n.style.display)return!1;try{for(var i;n&&("undefined"==typeof t||0<=t);){if((i=gx.dom.getComputedStyle(n))&&("hidden"==i.visibility||"none"==i.display))return!1;n=n.parentNode;"undefined"!=typeof t&&t--}}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(n,t){var i=this.gridObjByLvl(n),r=null;if(i)return i=gx.O.getGridById(i.gridId,t)||i,(r=i.grid.getRowByGxId(t))?r.gxIsMod():!0;i=!1;try{i=1==this.getControlValue("nIsMod_"+n+"_"+t)}catch(u){i=!1}return i},gridObjByLvl:function(n){for(var i=gx.O.Grids,r=i.length,t=0;t<r;t++)if(i[t].gridLvl==n)return i[t];return null},forceEnableControls:function(n){var t,r,i;for(t in gx.disabledControls)for(t=this.getControlRef_list(t),r=t.length,i=0;i<r;i++)try{"button"!=t[i].type&&"submit"!=t[i].type&&(t[i].disabled=n)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","forceEnableControls")}},alert:function(n,t){try{var i=gx.util.balloon.getNew(n.id);i.setError(t);i.show();gx.csv.invalidForcedCtrl=n}catch(r){gx.util.alert.showError(t)}},getGridRowMode:function(n,t){return this.getGridRowModeImpl(n,t,this.currentGridRow(t))},getGridRowModeImpl:function(n,t,i){return t=this.rowIsRemoved(t,i),n=this.getControlValue("nRcdExists_"+n+"_"+i),"1"==t?"DLT":"0"==n?"INS":"UPD"},rowIsRemoved:function(n,t){var i=this.getGridObj(n);return null!=i&&(i=i.grid.getRowByGxId(t))?i.gxDeleted():!1},getGridObj:function(n,t){return gx.O.getGridById(n,t)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","changeCmpContext")}},initOld:function(n){void 0==gx.oldValues[n.id]&&(gx.oldValues[n.id]=n.value)},setFocusOnError:function(n){var i=gx.fn.controlGridId(n),n=gx.csv.ctxControlId(n),t=null,t=0==i?gx.dom.el(n):gx.fn.getControlGridRef(n,i);null!=t&&(gx.O.AnyError=1,gx.csv.anyError=!0,t.setAttribute("data-gxvalid","0"),gx.csv.stopOnError&&gx.fn.setFocus(t))},usrSetFocus:function(n){gx.usrPendingControl=n},usrSetFocus_commit:function(){gx.usrPendingControl&&(gx.fn.usrSetFocus_impl(gx.usrPendingControl),delete gx.usrPendingControl)},usrSetFocus_impl:function(n,t){void 0===t&&(t=!0);var i=gx.fn.screen_CtrlRef(n);null==i?gx.grid.setActiveGridRow(n,0):(n=gx.dom.id(i),!0==gx.csv.validating?t?gx.fx.obs.addObserver("gx.onaftervalidate",this,function(n){gx.lang.doCallTimeout(gx.fn.usrSetFocus_impl,gx.fn,[n,!1],200)}.closure(gx.fn,[n]),{single:!0}):gx.usrFocusControl=n:(gx.fn.setFocus(i),delete gx.usrFocusControl))},setFocus:function(n,t){if(n){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(n.id)&&(n=gx.dom.byId(n.id),!n))return;gx.fn.setFocusSafe(n,function(n){gx.fn.setSelection(n);n.forcedFocus=!0;t&&t()})}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(n,t){var i=gx.csv.setFocusOnload,r;n&&(r=function(n,t){try{i&&t&&gx.fx.obs.addObserver("gx.onafterfocus",this,t.closure(this,[n]),{single:!0});n.focus()}catch(r){}!i&&t&&t(n)},gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",window,function(){r.call(this,n,t)},{single:!0}):gx.lang.doCallTimeout(r,this,[n,t],i?500:0))},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(n){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},arrayCtrlFocus:function(n){return n&&"radio"==n.type&&(n=gx.fn.getRadioSelected(n.name)||n),n},setFocusOnload:function(n){n=void 0===n?!0:!1;gx.wpo(function(){var t,i;if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){if(t=null,t=gx.pO.getUserFocus(),!gx.lang.emptyObject(t)){if("notset"==t)return;if(i=gx.pO.getUserControl(gx.uc.userControlContainerId(t)),gx.lang.emptyObject(i))gx.csv.userFocus=gx.fn.getControlRef(t);else{i.setFocusBase();return}}if("notset"!=gx.csv.userFocus){t=gx.csv.userFocus;gx.fn.isAccepted(t)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?t=gx.csv.lastActiveControl:(t=gx.fn.firstAcceptedControl(gx.popup.ispopup()),t=gx.fn.arrayCtrlFocus(t)));try{t?(i=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=t,gx.csv.setFocusOnload=n,gx.fn.isAccepted(t)?gx.fn.setFocus(t,i):(gx.popup.setFocus(),i())):gx.popup.setFocus()}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","setFocusOnload")}}}})},setSelection:function(n){if(n&&gx.fn.isVisible(n))try{(gx.csv.lastControl=n,(gx.dom.isEditControl(n)||"file"==n.type)&&n.select)?n.select():("TEXTAREA"==n.nodeName||"SELECT"==n.nodeName)&&(n.focus(),n.select&&n.select())}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setSelection")}},isAccepted:function(n,t,i){var t=void 0===t||t,i=i||gx.O,r=["FIELDSET"],r=null!=n&&n.type&&"hidden"!==n.type&&!n.disabled&&!n.readOnly&&!gx.util.inArray(n.nodeName,r)&&gx.fn.isVisible(n);return r?(t&&(n=gx.dom.id(n),t=i.getValidStructFld(n),n=i.getVariable("Gx_mode"),0<gx.csv.lastGrid&&i.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),r=!gx.lang.emptyObject(t)&&t.nac?!t.nac.call(i):!0,i.setVariable("Gx_mode",n)),r):!1},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(n,t){var t=t||gx.csv.lastControl,f=gx.fn.getControlIndex(t),r=f,u=this.controlGridId(t.id||t.name),e=!1;if(n&&gx.dom.hasClass(t,"gx_newrow")&&(r=t.gxControlIdx,e=!0),-1==r)return!0;for(var i=null,o=gx.fn.getFormElements(),i=gx.fn.searchFocus(++r,!0);;i=gx.fn.searchFocus(++r,!0))if(null==i||r==o.length)r=-1;else{if(n)break;if(gx.evt.isEnterEvtCtrl(i))break;if("INPUT"==i.nodeName&&"submit"!=i.type&&"button"!=i.type&&"image"!=i.type)break}!e&&u&&gx.O.isTransaction()&&this.controlGridId(i.id||i.name)!=u&&(r=gx.O.getGridById(u),i=gx.dom.byId(r.containerName+"_NewRow").parentNode,i.gxControlIdx=f);gx.fn.setFocus(i)},getFormElements:function(){return n.makeArray(n("button, fieldset, input, img, object, output, select, textarea"))},getControlIndex:function(n){var t=gx.fn.getFormElements().length-1;return el=this.controlIndex(n,0,t)},controlIndex:function(n,t,i){if(document.all){var r=gx.fn.getFormElements(),f=r[t].sourceIndex,e=r[i].sourceIndex,u=parseInt(t+(i-t)/2)+1,r=r[u].sourceIndex;if(t==i&&n.sourceIndex==f&&n.sourceIndex==e||n.sourceIndex==f)return t;if(n.sourceIndex==e)return i;if(n.sourceIndex==r)return u;if(n.sourceIndex>r&&n.sourceIndex<e)return this.controlIndex(n,u+1,i-1);if(n.sourceIndex>f&&n.sourceIndex<r)return this.controlIndex(n,t+1,u-1)}else return n.gxIndex},searchFocus:function(n,t){return t?this.searchFocusFwd(n):this.searchFocusBack(n)},searchFocusBack:function(n){for(var t=r(gx.fn.getFormElements());0<=n;n--)if(gx.fn.isAccepted(t))return t[n];return null},searchFocusFwd:function(n){for(var t=r(gx.fn.getFormElements()),i=t.length;n<i;n++)if(gx.fn.isAccepted(t[n]))return t[n];return null},rowGridId:function(n){if(!n||!n.getAttribute)return null;var t=n.getAttribute("data-gxgridid");return null!=t?t:gx.fn.rowGridId(n.parentNode)},controlRowIndex:function(t){return n(t).parentsUntil(".gx_usercontrol, .gxwebcomponent").filter("[data-gxrow]").attr("data-gxrow")||""},controlRowIdImpl:function(n){if(!n||!n.getAttribute)return null;var t=n.getAttribute("data-gxrow");return null!=t?t:gx.fn.controlRowIdImpl(n.parentNode)},controlRowId:function(n){var t=gx.fn.controlRowIdImpl(n);return null===t&&n&&n.id&&0<n.id.lastIndexOf("_")&&(t=n.id.lastIndexOf("_"),t=n.id.substring(t+1)),t},controlGridId:function(n){var r,t,i,u,f,e;try{if(i=gx.O.Grids,i)for(t=0,len=i.length;t<len;t++)if(i[t].grid.columnsHtmlName[n])return i[t].gridId;for(r=gx.fn.controlIds(),t=0,len=r.length;t<len;t++)if(u=gx.fn.validStruct(r[t]),gx.O.isSameField(u,n))return u.grid;if(f=gx.O.getComponentData(n),f&&(e=gx.fn.gridObjByLvl(f.lvl),e))return e.gridId}catch(o){}return 0},oldGridId:function(n){var r,u,t;try{for(r=gx.fn.controlIds(),u=r.length,i=0;i<u;i++)if(t=gx.fn.validStruct(r[i]),void 0!=t&&t.gxold==n)return t.grid}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(n,t){var i="no_mode";return null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,n)&&(i=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,n)&&(i=gx.O.Gx_mode),"no_mode"==i?!0:"UPD"==i||null==gx.csv.validatingGrid?(window[n]=t,!0):!1},isLvlParmOld:function(n,t){var i,r;try{if(i=gx.O.getOldLvl(t),0<=i)return 0<n?(r=gx.fn.gridLvl(n),i<r):!0}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(n){var r,u,t;try{for(r=gx.fn.controlIds(),u=r.length,i=0;i<u;i++)if(t=gx.fn.validStruct(r[i]),void 0!=t&&void 0!=t.lvl&&t.grid==n)return t.lvl}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(n){var r,u,t;try{for(r=gx.fn.controlIds(),u=r.length,i=0;i<u;i++)if(t=gx.fn.validStruct(r[i]),void 0!=t&&t.lvl==n)return t.grid}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(n){var t,r;try{for(t=gx.fn.controlIds(),i=0;i<t.length;i++)if(r=gx.fn.validStruct(t[i]),void 0!=r&&r.fld==n)return t[i]}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(n,t){var u,f,e,r;try{for(u=null,t&&(u=[]),f=gx.fn.controlIds(),e=f.length,i=0;i<e;i++)if(r=gx.fn.validStruct(f[i]),void 0!=r&&n(r))if(r.id=f[i],t)u.push(r);else return r}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","getVStruct")}return u},vStructForOld:function(n){return gx.fn.getVStruct(function(t){return t.gxold==n})},vStructForVar:function(n){return gx.fn.getVStruct(function(t){return t.gxvar==n})},vStructForVarWId:function(n,t){var r=gx.fn.getVStruct(function(t){return t.gxvar==n},!0),u=r[0],f=r.length,i;if(1<f)for(i=0;i<f&&!(u=r[i],u.id==t);i++);return u},vStructForHC:function(n){return gx.fn.getVStruct(function(t){return t.hc==n})},firstCtrlAfterGrid:function(n,t){for(var u,r=gx.fn.lastCtrlId(),i=n;i<r;i++)if(u=gx.fn.validStruct(i),void 0!=u&&u.grid!=t)return i;return r},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(n){try{return gx.oldKeyValues[n]}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(n,t){try{return gx.oldKeyValues[n+gx.fn.currentGridRow(t)]}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","oldGridKey")}return""},setKey:function(n,t){null!=n&&(gx.oldKeyValues[n]=t)},unsetKey:function(n){null!=n&&(gx.oldKeyValues[n]=void 0)},setGridKey:function(n,t,i){null!=n&&(gx.oldKeyValues[n+gx.fn.currentGridRow(t)]=i)},unsetGridKey:function(n,t){null!=n&&(gx.oldKeyValues[n+gx.fn.currentGridRow(t)]=void 0)},removeGridRow:function(n,t){var e=gx.fn.rowIsRemoved(t,n),f,o,r,u;try{for(f=gx.fn.controlIds(),o=f.length,i=0;i<o;i++)r=gx.fn.validStruct(f[i]),void 0!=r&&r.grid==t&&(u=gx.dom.el(r.fld+"_"+n),null!=u&&(u.gxdisabled=e,u.disabled=e))}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(t,n)},controlFiresEvent:function(n){return n&&(n.evt||n.triggersEvt)},controlIds:function(n){return(n=n||gx.O)?n.getControlIds():[]},validStruct:function(n,t){return t=t||gx.O,t.getValidStruct(n)},lastCtrlId:function(n){var n,t,i;if(!0===n){for(n=this.controlIds(),t=n.length-1;0<=t;t--)if(i=this.validStruct(n[t]),i.v2v&&(void 0===i.isacc||1==i.isacc))return n[t]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(n,t){return 0==t&&n==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(n){var i,t;try{for(var f=gx.fn.vStructsArray(),u=gx.fn.controlIds(),e=u.length,r=0;r<e;r++)if(i=f[u[r]],null!=i&&(t=gx.fn.getControlGridRef(i.fld,i.grid),t&&gx.fn.isAccepted(t)&&(n||"submit"!=t.type&&"image"!=t.type&&"button"!=t.type&&"fieldset"!=t.type)))return t}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var n=gx.dom.byId(gx.csv.cmpCtx+"BTN_DELETE");null!=n&&gx.fn.setCtrlPropertyImpl(n,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(n){!0!=gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(n&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(n){var t=function(n){try{for(var i=n.length,t=0;t<i;t++)gx.fn.setCtrlPropertyImpl(n[t],"Enabled",0)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","disableCtrl")}},n=gx.fn.getControlRef_list(n);if(null!=n)if("complete"==document.gxReadyState)t(n);else gx.evt.on_ready(this,t.closure(this,[n]))},refreshGridRowBC:function(n,t){var i,r;try{if(i=gx.O.getGridBC(n),i&&(r=gx.pO.getGridForColl(i.gxvar),gx.csv.validatingGrid&&r&&gx.csv.validatingGrid.gridId==r.gridId))return gx.fn.setGridHidden(n,t),t=t[parseInt(gx.fn.currentGridRow(r.gridId))-1],gx.O.bcToScreen(i,t),!0}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(n,t){return t=gx.O.applySDTVarMapping(t,n),this.refreshFormBC(n,t)||this.refreshGridRowBC(n,t)},refreshFormBC:function(n,t){try{var i=gx.O.getFormBC(n)||gx.O.getFormBCForVar(n);if(i)return gx.setVar(n,t),gx.fn.setGridHidden(n,t),gx.O.bcToScreen(i,t),!0}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(n){return gx.http.viewStateLoaded||gx.http.loadState(),"undefined"!=typeof gx.http.viewState[n]},GX_HASH_PREFIX:"gxhash_",getHash:function(n,t,i){return gx.fn.getHidden(n+gx.fn.GX_HASH_PREFIX+t+(i?"_"+i:""))||gx.fn.getHidden(n+gx.fn.GX_HASH_PREFIX+t)},getHidden:function(n){return gx.http.viewStateLoaded||gx.http.loadState(),gx.http.viewState[n]},setHidden:function(n,t){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[n]=t},setGridHidden:function(n,t){var i=n,r=gx.fn.oldGridId(n);0<r&&(i=n+"_"+gx.fn.currentGridRowImpl(r));gx.fn.setHidden(i,t)},deleteHidden:function(n){gx.http.viewState&&delete gx.http.viewState[n]},setJsonHiddens:function(n,t,i){var e=[],u,o,i=void 0===i||i,r,f;for(r in t)i?gx.fn.setGridHidden(r,t[r]):gx.fn.setHidden(r,t[r]),f=gx.fn.getVarControlMap(n,r),u=t[r],gx.lang.emptyObject(f)||(n&&(o=n.VarControlMap[f],"date"==o.type||"dtime"==o.type)&&(u=new gx.date.gxdate(t[r],"Y4MD")),gx.setVar(f,u)),gx.fn.vStructForOld(r)&&gx.setVar(r,u),n&&n.UCBindingsHiddens[r]&&(e=e.concat(gx.O.UCBindingsHiddens[r].uc));return e},filterHiddens:function(n,t){var r={};for(var i in t)i&&0==i.search(n)&&(r[i]=t[i]);return r},autoRefreshingControl:function(n,t){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==t+n},setJsonValues:function(n,t,i,r,u){var e,o,f;if(!n)return[];for(var v=gx.O,b=n.length,y=[],l,s,p=0;p<b;p++){var h=n[p],c=h.CmpContext,w=gx.lang.booleanValue(h.IsMasterPage),a=gx.setGxO(c,w);if(!gx.lang.emptyObject(gx.O))for(e in h)"CmpContext"==e||"IsMasterPage"==e||(!u||u(e))&&(o=h[e],"object"==typeof o&&gx.fn.refreshBC(e,h[e])||"function"==typeof o||(f=gx.fn.vStructForVar(e)||gx.O.getValidStructFld(e),f?!f.v2v||gx.fn.autoRefreshingControl(f.fld,c)||(s=(s=gx.O.getGridById(f.grid))&&s.InfiniteScrolling,0!=f.grid&&(l=gx.dom.el(e,!1,!1),l=gx.fn.controlRowId(l)||(f.grid==i?r:gx.fn.currentGridRow(f.grid))),s)||(f.v2v(o),f.v2c(l)):"GX_FocusControl"==e&&!t?v.CmpContext==c&&v.IsMasterPage==w&&(gx.usrFocusControl=o):(f=gx.fn.vStructForHC(e),!gx.lang.emptyObject(f)&&!gx.lang.emptyObject(f.hc)&&!f.grid&&(f.hc==e?(a[f.hc]=o,gx.fn.setHidden(c+"GXH_"+f.fld,o)):f.hd==e&&(a[f.hd]=o)),f=gx.fn.vStructForHC(e),gx.lang.emptyObject(f)||(s="",0!=f.grid&&(s=f.grid==i?r:gx.fn.currentGridRow(f.grid)),gx.fn.setHidden(c+"GXHC"+f.fld+"_"+s,o)),f=gx.fn.getVarControlMap(a,e),gx.lang.emptyObject(f)?gx.setVar(e,o):gx.setVar(f,o),gx.fn.setGridHidden(e,o),gx.O.UCBindings[e]&&(y=y.concat(a.UCBindings[e].uc)))))}return gx.setGxO(v),y},getPropertyControlRef:function(n,t,i){var r=gx.fn.getControlRef(n,!0),r=null==r&&!i?gx.dom.byId("Object_"+n):r;return null==r&&(r=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(n))),null==r&&t&&(r=gx.dom.el(n+"_"+t)),r},setJsonProperties:function(n,t){var r,u,f,i,l,o,a,v;if(!n)return[];for(var p=gx.O,w=n.length,y=[],c=0;c<w;c++){var s=n[c],h=s.CmpContext,e=gx.lang.booleanValue(s.IsMasterPage),h=gx.setGxO(h,e);if(!gx.lang.emptyObject(gx.O))for(i in s)if(!("CmpContext"===i||"IsMasterPage"===i||""===i)&&(e=s[i],"function"!=typeof e)&&(u=h.getValidStructFld(i),"FORM"==i||u||0<=i.indexOf("gxHTMLWrp")||0<=i.indexOf("ContainerDiv")?(r=u&&("bits"==u.type||"bitstr"==u.type||"audio"==u.type||"video"==u.type||"binaryfile"==u.type),r=gx.fn.getPropertyControlRef(i,t,!r)):r=gx.fn.getPropertyControlRef(i,t),f=!1,r&&r.gxGridName&&(l=gx.fn.gridObjFromGxO(r.gxGridName),f=l.setProperty(e)),!f))if(f=h.getGridColumn(i,t),(null==r||l)&&gx.uc.isUserControl(i,h)||f&&f.isUserControl)u=i,f&&f.isUserControl&&(u=i+"_"+t),gx.uc.setProperties(u,e),y.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(u)));else if(!(null==r&&null==f))for(o in e)if(a="object"==typeof e[o],f&&!a&&(f[o.toLowerCase()]=e[o]),r)if(r.parentElement||(r=gx.fn.getPropertyControlRef(i,t)),a)for(v in e[o])gx.fn.setCtrlPropertyImpl(r,v,e[o][v],u);else gx.fn.setCtrlPropertyImpl(r,o,e[o],u)}return gx.setGxO(p),y},loadJsonGrids:function(n,t){var a=function(n){for(var t=0;t<n.length;t++)if("string"==typeof n[t])return n[t];return""},v=function(n){var t="",i=n.lastIndexOf("_");return-1!==i&&(t=(n=n.substring(i+5))?"_"+n:""),t},y=function(n,t,i){for(var f,e,u,i=i||[],r=0;r<n.Count;r++){f=n[r];for(e in f.Grids)u=gx.fn.gridObj(t,e+"_"+gx.text.padl((r+1).toString(),4,"0"),!1),u&&u.isUsercontrol&&i.push(u.grid)}return i},u=[],s,r,f,i;if(n)for(s=n.length,f=0;f<s;f++)try{if(i=n[f],void 0!=i.Count){var o=i.CmpContext,h=i.GridName,e=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(e)||e.gxComponentContext!=o&&e.gridName!=h||!gx.lang.emptyObject(e.boundedCollType)){var p="true"==i.InMasterPage?!0:!1,c="",l="";i[0]&&i[0].Props&&i[0].Props[0]&&gx.lang.isArray(i[0].Props[0])&&(l=a(i[0].Props[0]));c=v(l);(r=gx.fn.gridObj(o,h+c,p))&&(u=u.concat(y(i,o)),r.isUsercontrol&&u.push(r.grid),t?(!gx.O.Grids[r.gridName]||!gx.O.Grids[r.gridName].parentGrid)&&r.loadGrid({rowProps:i,isPostback:t}):r.updatePropsHidden(i))}}}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","loadJsonGrids")}return u},getErrorViewerCtrls:function(){var t=gx.dom.byClass("gx_ev");if(0==t.length)for(var t=[],i=gx.dom.byTag("span"),r=i.length,n=0;n<r;n++)"gxErrorViewer"==i[n].getAttribute("data-gx-id")&&t.push(i[n]);return t},setErrorViewer:function(t,i){var v,p,s,l,e,w,u,g,b,f,h,a,nt,r,c,tt,o,y,k,d;if(i=void 0===i||i,gx.O.AnyError=0,t)try{gx.fx.obs.notify("gx.onmessages",[t]);v=gx.dom.byClass("gx_ev");p=v.length;for(s in t){if(e=t[s],gx.lang.isArray(e)||(l=e.fields,e=e.msgs),w=[],l)for(u=0,g=l.length;u<g;u++)gx.lang.isArray(l[u])||(b=gx.fn.vStructForVar(l[u].replace(/^gx\.O\./,"")),b&&w.push(b.fld));if("MAIN"==s&&(s=""),"undefined"!=typeof e){for(u=0;u<p;u++)if(f=v[u],f&&f.getAttribute("data-gx-id")==s+"gxErrorViewer"){h=gx.csv.setFocusOnload?f.innerHTML:"";break}a={};for(nt in e)r=e[nt],r&&1==r.type&&(gx.O.AnyError=1),gx.lang.emptyObject(r.text)||"function"==typeof r||(c=gx.fn.screen_CtrlRef(r.att),tt=c&&n(c).is("[data-gxgridid].gx-invisible "+c.tagName),""!=r.att&&(tt&&gx.fn.isVisible(c,0)||gx.fn.isVisible(c))?(o=a[r.att],o||(o=gx.util.balloon.getNew(r.att,void 0,r.id?w:[]),a[r.att]=o),1==r.type?o.setError(r.text):o.setMessage(r.text)):h+='<div class="'+(1==r.type?"gx-error-message":"gx-warning-message")+'">'+gx.html.encode(r.text)+"<\/div>");y=!1;for(k in a)if(o=a[k],!1==o.show()&&!y&&(y=!0,gx.fn.setFocusOnError(k)),gx.csv.oneAtAtime)break;for(u=0;u<p;u++)(f=v[u])&&f.getAttribute("data-gx-id")==s+"gxErrorViewer"&&f.innerHTML!=h&&(gx.dom.shouldPurge()&&gx.dom.purge(f,!0),f.innerHTML=i?h:f.innerHTML+h,""!=h)&&(d=gx.fx.dom.highlight(f,[255,255,165],2500),d.play(),f.effect=d)}}gx.plugdesign.applyTemplateObject({templateSelector:function(n){return"errorviewer"===n.name},classMapSelector:function(){return!1}});gx.config.csv.scrollTopOnError&&gx.O.AnyError&&!y&&window.scrollTo(0,0)}catch(it){gx.dbg.logEx(it,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(n){var t=u.exec(n);return t?t[1]+t[2]:n},clearCompontHiddens:function(n){var t=[];for(var i in n)"function"!=typeof n[i]&&t.push(gx.fn.cmpContextFromCtrl(i));try{gx.O.deleteComponentHiddens(t)}catch(r){except=!0;gx.dbg.logEx(r,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(i,r,u,f,e){var h,c,l,o,a,s,v,y;try{h=[];c=!1;gx.gen.isDotNet();l=[];for(o in i)if(l.push(o),"function"!=typeof i[o])try{a=i[o];a&&(s=gx.dom.byId(o),!s&&r&&(s=gx.dom.byId(r[o])),gx.lang.emptyObject(s)&&(n(document.body).append("<div id='"+o+"'><\/div>"),s=gx.dom.byId(o)),gx.lang.emptyObject(s)||(gx.html.setInnerHtml(s,a,!1,e),v=gx.fn.cmpContextFromCtrl(o),y=t(gx.fn.getHidden(v+"_CMPPGM")),h.push({type:v,name:y,html:a,container:s})))}catch(p){c=!0;gx.dbg.logEx(p,"gxfrmutl.js","setJsonComponents")}}catch(w){c=!0;gx.dbg.logEx(w,"gxfrmutl.js","setJsonComponents")}(0==h.length||c)&&"function"==typeof f?f(l):(i=n.map(h,function(n){return gx.fn.createComponentAsync(n,u)}),n.when.apply(n,i).done(function(){f(l)}))},cmpRegexCache:{},getCmpRegex:function(n){var t=this.cmpRegexCache[n];return this.cmpRegexCache[n]||(t=RegExp("^"+n),this.cmpRegexCache[n]=t),t},processCodeCallback:function(n,t,i,r,u,f){gx.fn.createComponentObj(n,t,r);gx.fn.setJsonHiddens(u,i);f.resolve()},createComponentAsync:function(t,i){var u=n.Deferred(),f=t.type,r=t.name,h=t.html,s=t.container,e,o;u.then(function(){gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse])});try{e=gx.O;o=gx.fn.filterHiddens(gx.fn.getCmpRegex(f),i);gx.cache.codeLoaded(f+r)?(gx.fn.createComponentObj(r,f,s),gx.fn.setJsonHiddens(e,o),u.resolve()):(gx.cache.addInlineCode(f+r),gx.html.processCode(h,!1,gx.html.onTypeAvailable,[r,gx.fn.processCodeCallback,[r,f,o,s,e,u]],r))}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","createComponentAsync");u.resolve()}return u},createComponentObj:function(n,t,i){n=gx.createComponent(n,t,i);null!=n&&gx.addComponent(n)},cleanAttachedCtrls:function(){gx.attachedControls=[]},getAttachedCtrl:function(n){for(var i,r=gx.attachedControls.length,t=0;t<r;t++)if(i=gx.attachedControls[t],i.id==n)return i;return null},attachCtrl:function(n,t){null==gx.fn.getAttachedCtrl(n)&&gx.attachedControls.push({id:n,info:t})},doAttachs:function(t){for(var s=gx.fn.attachedControls(),c=s.length,l=gx.O,r,t=t&&t.length?n.map(t,gx.fn.cmpContextFromCtrl):void 0,i,h,f,o,u,e=0;e<c;e++)if(i=s[e],!t||0<=n.inArray(i.info.wc,t))if(r=gx.setGxO(i.info.wc,i.info.mp),i.info.isPrompt&&r.isTransaction()&&"DSP"==r.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(i.info.wc+i.info.id),"Visible",!1);else if(!i.attached){for(r=i.info.controls,h=r.length,o=[],u=0;u<h;u++)gx.fn.addAttach(r[u],i),f=gx.fn.validStruct(r[u]),gx.fn.checkAttachedPropertyVS(f,"Visible",!1),gx.fn.checkAttachedPropertyVS(f,"Enabled",!1),o.push(f.fld);i.attached=!0;n("#"+i.id).attr("data-gx-attached-ctrl",o.join(" "))}gx.setGxO(l)},addAttach:function(n,t){var i=gx.fn.validStruct(n);void 0==i.attachedCtrls&&(i.attachedCtrls=[]);i.attachedCtrls.push(t)},checkAttachedProperty:function(n,t,i){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(n),t,i)},checkAttachedPropertyVS:function(n,t,i){if(void 0!=n&&(n=n.attachedCtrls,void 0!=n))for(var u=n.length,r=0;r<u;r++)gx.fn.checkAttachedControlProperty(n[r],t,i)},checkAttachedControlProperty:function(n,t,i){for(var f,o=n.info.id,n=n.info,r=!0,e=n.controls,n=n.wc,s=e.length,u=0;u<s;u++)if(f=gx.fn.getCtrlProperty(n+gx.fn.validStruct(e[u]).fld,t),r=i?f==i:r&&f==i,i&&r)break;r&&gx.fn.setCtrlPropertyImpl(gx.dom.el(n+o),t,i)},changeControlOpacity:function(n,t,i,r){var f=Math.round(r),u="",u="string"==typeof n?n:n.id;t>i?(gx.fn.setOpacity(t,u),setTimeout(function(){gx.fn.changeControlOpacity(n,t-10,i,r)},f)):t<i?(gx.fn.setOpacity(t,u),setTimeout(function(){gx.fn.changeControlOpacity(n,t+10,i,r)},f)):gx.fn.setOpacity(i,u)},setOpacity:function(n,t){var i=t,r;"string"==typeof t&&(i="body"==t?document.body:gx.dom.el(t));null!=i&&(i=i.style,r="reset"==n?"":n/100,i.opacity=r,i.MozOpacity=r,i.filter="alpha(opacity="+("reset"==n?100:n)+")")},fadeControl:function(n,t,i){"in"==t?gx.fn.changeControlOpacity(n,0,100,i):gx.fn.changeControlOpacity(n,100,0,i)},fadeIn:function(n,t){gx.fn.fadeControl(n,"in",t)},statusMsg:function(n){window.status=n},objectOnload:function(t,i){var r=n(document.body),u="true"===r.attr("data-HasEnter"),f="true"===r.attr("data-Skiponenter");gx.evt.onkeypress_hdlr=gx.evt.onkeypress_hdlr||function(n){gx.evt.onkeypress(n,u,f)};gx.evt.attach(document,["keydown"],gx.evt.onkeypress_hdlr);n(document).on("keyup",function(n){gx.evt.onkeyup(n)});n(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(n){gx.evt.oncontrolvaluechanging(n)});null!=gx.pO&&(gx.pO.onload(t,i),gx.setGxO(gx.pO))},objectOnUnload:function(n){if(null!=gx.pO)gx.pO.onunload(n)},objectOnpost:function(){null!=gx.pO&&gx.pO.onpost()},objectPostback:function(n,t){null!=gx.pO&&(gx.pO.postbackLoad(n,t),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(n){return gx.fn.gridObj(gx.O.CmpContext,n,gx.O.IsMasterPage)},gridObj:function(n,t,i){return(n=gx.getObj(n,i))?n.getGrid(t):null},installComponents:function(n,i){var f=gx.fn.getHidden("GX_CMP_OBJS"),u,r;if(void 0!=f){gx.gen.isDotNet();for(u in f)(n||!gx.pO.getWebComponent(u))&&(r=t(f[u].toLowerCase()),r=gx.createComponent(r,u),null!=r&&(gx.addComponent(r,i),setTimeout(function(n){this.addComponentRemoteFiles(n)}.closure(this,[r]),1)))}},addComponentRemoteFiles:function(n){(n=n.getContainer())&&(gx.html.processCode(n.innerHTML,!0),gx.dom.fitToParent(n))},datePickerFormat:function(n,t,i){var r=gx.dateFormat,u=r.substr(0,1),f=r.substr(1,1),r=r.substr(2,1),u=gx.fn.datePickerDateFormat(u,n),f=gx.fn.datePickerDateFormat(f,n),n=gx.fn.datePickerDateFormat(r,n),r=gx.fn.datePickerTimeFormat(t);return 0<i&&0<t?u+"/"+f+"/"+n+" "+r:0<i?u+"/"+f+"/"+n:r},datePickerDateFormat:function(n,t){return"Y"==n&&"99/99/9999"==t.substr(0,10)?"%Y":"Y"==n?"%y":"M"==n?"%m":"D"==n?"%d":""},datePickerTimeFormat:function(n){var t=gx.timeFormat,i;if(12==t?(t="%I",i=" %p"):(t=24==t?"%H":"",i=""),2==n)n="";else if(5==n)n=":%M";else if(8==n)n=":%M:%S";else return"";return t+n+i},installDatePicker:function(n,t,i,r,u,f,e,o,s,h){new gx.ui.controls.datePicker({inputId:n,triggerId:n+"_dp_trigger",inline:r,inputType:u?"datetime":"date",weeksNumbers:f,mondayFirst:e,format:o,datePartLength:s,timePartLength:h,afterChange:gx.fn.datePickerChanged,vStruct:t,gxO:i}).render()},datePickerChanged:function(n,t,r,u,f){var e,o,u,s;if(!n||n.dateClicked){if(f=f||gx.O,"undefined"==typeof u)for(e=gx.fn.controlIds(),o=e.length,i=0;i<o;i++)if(u=gx.fn.validStruct(e[i]),s=0!=u.grid?"_"+gx.fn.currentGridRow(u.grid):"",r.id==f.CmpContext+u.fld+s)break;null!=u&&void 0!=u.dp&&(t=gx.date.isNullDate(t)?gx.date.nulldate_toc(u.len,u.dec):t.print(gx.fn.datePickerFormat(u.dp.pic,u.dp.dec,u.len)),t!=r.value&&(r.setAttribute("data-gxvalid","0"),r.value=t,r.onchange(),n&&n.callCloseHandler(),0<u.grid&&(gx.fn.getGridObj(u.grid)||u.gxgrid).setRowModified(gx.fn.currentGridRow(u.grid)),f.refreshDependantGrids(u)))}},toArray:function(n){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=n[t];return i}return Array.prototype.slice.call(n)},evalCtxScope:function(n,t){var r=gx.O,i;return gx.setGxO(n),i=eval(t),i instanceof Object&&(i=gx.json.serializeJson(i)),gx.setGxO(r),i}}}(gx.$);Function.prototype.closure=function(n,t,i){var o=gx.util.browser,r,u,e,f;return o.isIE()&&8>o.ieVersion()?(window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]),r=this,u=n.__objId,u||(__objs[u=n.__objId=__objs.length]=n),e=r.__funId,e||(__funs[e=r.__funId=__funs.length]=r),t||(t=[]),f=t.__argsId,f||(__args[f=t.__argsId=__args.length]=t),t=r=n=null,function(){if(__funs){var n=__args[f];if(i===!0&&(n=Array.prototype.slice.call(arguments,0),n=n.concat(__args[f])),n.length==0&&arguments.length>0&&(n=arguments),n=__funs[e].apply(__objs[u],n),__objs)try{delete __objs[u].__objId}catch(t){__objs[u].__objId=null}return __funs&&delete __funs[e].__funId,__args&&delete __args[f].__argsId,n}}):(r=this,function(){var u=t||arguments;return!0===i&&(u=Array.prototype.slice.call(arguments,0),u=u.concat(t)),r.apply(n||window,u)})};gx.thread={Map:function(){this.map={};this.add=function(n,t){this.map[n]=t};this.remove=function(n){delete this.map[n]};this.get=function(n){return null==n?null:this.map[n]};this.first=function(){return this.get(this.nextKey())};this.next=function(n){return this.get(this.nextKey(n))};this.nextKey=function(n){for(i in this.map){if(!n)return i;n==i&&(n=null)}return null}},Command:function(n,t,i){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){t.apply(n,i)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(n,t,i,r){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(n,t){gx.thread.Mutex.Wait.get(n).attempt(gx.thread.Mutex.Wait.get(t))};this.attempt=function(t){for(;t;t=gx.thread.Mutex.Wait.next(t.c.id))if(t.enter||t.number&&(t.number<this.number||t.number==this.number&&t.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+t.c.id+")",10);try{retVal=this.c.execute()}catch(i){gx.dbg.logEx(i,"gxfrmutl.js","Mutex Call")}if(this.number=0,gx.thread.Mutex.Wait.remove(this.c.id),typeof r=="function")try{r.call(n,retVal)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(n,t,i);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.INTERACTIVE_EVT="gx.onInteractive";gx.PARENT_OBJECT_EVT="gx.onCreateParentObject";gx.SETMASTERPAGE_EVT="gx.onSetMasterPage";gx.ONREADY_EVT="gx.onready";gx.ONAFTERLOAD_EVT="onafterload";gx.isInteractive=!1;gx.isReady=!1;gx.isReadyUI=function(){return gx.evt.userReady&&gx.isInputEnabled()&&gx.ajax.isFormEnabled()};gx.goInteractive=function(){gx.isInteractive=!0;gx.fx.obs.notify(gx.INTERACTIVE_EVT)};gx.goReady=function(){gx.isReady=!0;gx.fx.obs.notify(gx.ONREADY_EVT)};gx.goOnload=function(){gx.isLoaded=!0;gx.fx.obs.notify(gx.ONAFTERLOAD_EVT)};gx.observe_run=function(n,t,i,r){i[r]=function(i,r,u){u=u||[];n()?i.apply(r,u):gx.fx.obs.addObserver(t,r,i.closure(r,u),{single:!0})}};gx.observe_run(function(){return gx.isLoaded},gx.ONAFTERLOAD_EVT,gx,"ol");gx.observe_run(function(){return gx.isReady},gx.ONREADY_EVT,gx,"wr");gx.observe_run(function(){return gx.pO&&gx.pO.MasterPage},gx.SETMASTERPAGE_EVT,gx,"wmp");gx.observe_run(function(){return gx.isInteractive},gx.INTERACTIVE_EVT,gx,"wi");gx.observe_run(function(){return gx.pO},gx.PARENT_OBJECT_EVT,gx,"wpo");gx.isabsoluteurl=function(n){return-1!==n.search("://")};gx.isRelativeToHost=function(n){return"/"==n.substr(0,1)};gx.absoluteurl=function(n){return gx.isabsoluteurl(n)?n:"/"!==n.charAt(0)?gx.util.resourceUrl(n,!0):location.protocol+"//"+location.host+n};gx.timeoutActions={ignore:0,warn:1};gx.uc=function(n){return{PostRenderScripts:{},gxCssClass:"gx_usercontrol",getNew:function(t,i,r,u,f,e,o,s,h,c){return u=eval(u),gx.lang.inherits(u,gx.uc.UserControl,!0),u=new u(n),u.ContainerName=f,u.DesignContainerName=f,u.LabelForAttValue=t.CmpContext+e.toUpperCase()+(h?"_"+c:""),u.setupControl(t,e,o,i,r,s,h,c),u},fromChild:function(n){var t=gx.pO.getUsercontrolFromChild(n),r,i;if(null!=t||gx.pO.hasMasterPage()&&(t=gx.pO.MasterPage.getUsercontrolFromChild(n),null!=t))return t;for(r=gx.pO.WebComponents.length,i=0;i<r;i++)if(t=gx.pO.WebComponents[i].getUsercontrolFromChild(n),null!=t)return t;return null},getUserControlObj:function(n){var t=gx.O.getUserControl(n),r,i;if(gx.lang.emptyObject(t)){if(gx.pO.hasMasterPage()&&(t=gx.pO.MasterPage.getUserControl(n),!gx.lang.emptyObject(t)))return t;for(r=gx.pO.WebComponents.length,i=0;i<r&&!(t=gx.pO.WebComponents[i].getUserControl(n),!gx.lang.emptyObject(t));i++);}return t},CtrlId:function(n){return n.replace(/Container$/,"")},userControlContainerId:function(n){var t=n.lastIndexOf("_");return-1!=t&&(t=n.substring(0,t)+"Container"+n.substring(t),null!=gx.dom.byId(t))?t:0<=n.indexOf("ContainerDiv")?n:n+"Container"},setProperties:function(n,t){var f=gx.uc.getUserControlObj(gx.uc.userControlContainerId(n)),e,r,i,u;if(null!=f)if(void 0!=t.length)for(e=t.length,r=0;r<e;r++)for(i in t[r])u=t[r][i],f[i]=u;else for(i in t)u=t[i],f[i]=u},isUserControl:function(n,t){var t=t||gx.O,i;return gx.lang.emptyObj(t.UserControls)?!1:n instanceof gx.uc.UserControl?!0:(i=gx.dom.byId(gx.uc.userControlContainerId(n)))&&"DIV"===i.tagName&&gx.dom.hasClass(i,gx.uc.gxCssClass)?!0:!1},StartRender:function(){PostRenderScripts={}},pushPostRenderScripts:function(t){n.each(t&&t.Scripts||[],function(n,t){PostRenderScripts[t]=t})},EndRender:function(){var t=gx.lang.objToArray(PostRenderScripts),t=n.map(t,function(n){return gx.util.resourceUrl(gx.util.resolveUrl(n),!1)});gx.http.loadScripts(t,gx.emptyFn,0,!0)},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.IsPostBack=this.RealControl=this.C2ShowFunction=null;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(n){var i=""!=this.GridRow?"_"+this.GridRow:"",t=this.DesignContainerName+this.ControlName+"_"+n+i,t=gx.dom.byId(t);return t||(t=this.DesignContainerName+n+i,t=gx.dom.byId(t)),t};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(n,t,i,r,u,f,e,o){this.ParentObject=n;this.ControlName=t;this.ControlId=r;this.LastIdBefore=u;this.ControlLvl=void 0!=f?f:0;this.GridId=void 0!=e?e:0;this.GridRow=void 0!=o?o:"";gx.util.pushOnceSorted(this.ControlId,this.ParentObject.GXCtrlIds);var h=o||"_norow",s=this.ParentObject.GXValidFnc[this.ControlId];s||(this.ParentObject.GXValidFnc[this.ControlId]={id:this.ControlId,lvl:this.ControlLvl,fld:i,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl},s=this.ParentObject.GXValidFnc[this.ControlId]);s=this.ParentObject.GXValidFnc[this.ControlId];s.ucInstances=s.ucInstances||{};s.ucInstances[h]=this;s.getUCInstance=function(n){return n=n||h,s.ucInstances[n]}};this.addValidFunction=function(n,t,i){this.ValidFunctions.push(n);this.ParentObject.addUsercontrolBinding(t,i+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var i=this.ValidFunctions.length,t,n=0;n<i;n++)if((t=this.ValidFunctions[n])&&!t.call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;return gx.csv.validatingUC=null,!0};this.attachEvents=function(){var t,r,n,i;try{if(t=this.getContainerControl(),gx.lang.emptyObject(document.frames))t.onfocus=this.onfocus,this.RealControl=t;else if(r=document.frames.length,0<r)for(n=0,n=0;n<r;n++)if(i=document.frames[n],!0==gx.dom.isChildNode(i,t)){i.frameElement.onfocus=this.onfocus;this.RealControl=i.frameElement;break}}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.oninput=function(){this.autoRefreshFn&&this.autoRefreshFn()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(n){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=n};this.createWebComponent=function(n,t,i,r,u){this.ParentObject.createWebComponent(n,t,i,this.GridRow,r,u)};this.deleteWebComponent=function(n){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(n))};this.notifyContext=function(n,t){gx.fx.ctx.notify(null,n,t)};this.addV2CFunction=function(n,t,i,r){var u,f;"function"==typeof n?(f=t,this.V2CFunctions.push(n),u=gx.fn.getVarControlMap(this.ParentObject,f),void 0!==u&&this.ParentObject.addUsercontrolBinding(u,f,this)):(u=n,f=t,this.ParentObject.addUsercontrolBinding(u,f,this),this.V2CFunctions.push(function(n,t,e){var o=f;e&&(t&&(o=f+"_"+t),r?n.ParentObject[u][r]=gx.fn.getControlValue(o):n.ParentObject[u]=gx.fn.getControlValue(o));t=n.ParentObject[u];n.useGxDateForBindings&&(e=gx.fn.getVarControlMapForVar(u),"date"===e.type||"dtime"===e.type)&&"string"==typeof t&&(t=n.IsPostBack?new gx.date.gxdate(t):new gx.date.gxdate(t,"Y4MD"));n[i](t)}))};this.addC2VFunction=function(n){this.C2VFunctions.push(n)};this.setC2ShowFunction=function(n){this.C2ShowFunction=n};this.execV2CFunctions=function(n){var r=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var t=0,i=this.V2CFunctions,u=i.length,t=0;t<u;t++)try{i[t](this,this.GridRow,n)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=r};this.execC2VFunctions=function(){var i=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var n=0,t=this.C2VFunctions,r=t.length,n=0;n<r;n++)try{t[n](this,this.GridRow)}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=i};this.sdtV2c=function(n,t,i,r,u){null!==t?(t=parseInt(t,10)-1,void 0!==this.ParentObject[n][t])&&this[u](this.ParentObject[n][t][i]):(this.ParentObject[n]=gx.fn.getControlValue(r,null,this.ParentObject),this[u](this.ParentObject[n][i]))};this.sdtC2v=function(n,t,i,r,u){null!==t?(t=parseInt(t,10)-1,this.ParentObject[n][t][i]=this[u]()):this.ParentObject[n][i]=this[u]();gx.fn.setControlValue(r,this.ParentObject[n])};this.execShowFunction=function(){var t,i;!1===this.IsPostBack&&(this.IsPostBack=!0);null===this.IsPostBack&&(this.IsPostBack=!1);t=this.getContainerControl();try{null!=this.C2ShowFunction&&t&&this.C2ShowFunction(this)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","execShowFunction")}t&&(this.autoToggleVisibility&&(i=n(t).add("label[for='"+this.LabelForAttValue+"']"),gx.lang.gxBoolean(this.Visible)?i.show():i.hide()),gx.plugdesign.applyTemplateObject({selector:"#"+t.id,templateSelector:function(n){return n.onDemandInvoke===!0}}));gx.uc.pushPostRenderScripts(this)};this.updateAndShow=function(n){try{this.execV2CFunctions(n)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","updateAndShow")}n&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(n){var t=this.ParentObject,i=t.IsMasterPage?"_MPAGE":"",n=this.ControlName.toUpperCase()+i+"."+n.toUpperCase()+i;return(n=t.getClientEventName(n))?t.isServerEvent(n):(gx.dbg.logDebug("Client event name couldn't be resolved."),!1)};this.eventHandler=function(n,t,i){var f,u,r;gx.evt.setReady(!1);f=gx.O;gx.setGxO(this.ParentObject);0<n&&(u=this.DesignContainerName,r=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName),r&&r[1]&&(u=r[1]),this.ParentObject[u]=this,(n=this.ParentObject.getGridById(n))&&n.instanciateRow(t));this.execC2VFunctions();i.call(this.ParentObject,this.getEventRow()).always(function(n){gx.setGxO(n);gx.evt.setReady(!0)}.closure(this,[f]));gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(n,t){this[n]=function(i){var r=this.isServerEvent(n);r&&"function"==typeof i&&gx.fx.obs.addObserver("gx.onafterevent",this,i,{single:!0});this.eventHandler(this.GridId,this.GridRow,t);r||"function"!=typeof i||i.call(this)}.closure(this)};this.addProperty=function(n,t){this.Properties[n]=t};this.setProp=function(n,t,i,r){this.addProperty(n,t);this.PropTypes[n]=r;gx.lang.isBooleanType(r)?this[n]=gx.lang.gxBoolean(i):"color"==r?gx.lang.emptyObject(i)||(this[n]="number"==typeof i||"string"==typeof i?gx.color.html(i):i):gx.lang.isNumericType(r)?gx.lang.emptyObject(i)||(this[n]=gx.num.parseFloat(i)):this[n]=i};this.setDynProp=function(n,t,i,r,u){this.addProperty(n,t);this.DynProperties.push(n);this.PropTypes[n]=r;var f=function(){var u=this.getDynPropertyValueFromHidden(n,t);void 0===u&&(u=i);this.setProp(n,t,u,r)};u?f.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(n){n===this.ParentObject&&f.call(this)}):gx.wr(f,this)};this.refreshDynProperties=function(){for(var t,n=0,i=this.DynProperties.length;n<i;n++)t=this.DynProperties[n],this[t]=this.getDynPropertyValueFromHidden(t,this.Properties[t])};this.getDynPropertyValueFromHidden=function(n,t){var i=gx.fn.getHidden(this.getHiddenName(t));return void 0===i&&(i=gx.fn.getHidden(this.getHiddenName(n))),i};this.setGridProperties=function(){for(var n,t,i,u=this.ParentObject.getGridUCProperties(this.ControlName),f=u.length,r=0;r<f;r++)n=u[r],t=n.v,i=this.getHiddenName(n.h),i=gx.fn.getHidden(i),(void 0===t||void 0!==i)&&(t=i,"color"==n.t&&(t=gx.color.html(t))),this.setProp(n.p,n.h,t,n.t)};this.setGridEventHandlers=function(){for(var t,i=this.ParentObject.getGridUCEventHandlers(this.ControlName),r=i.length,n=0;n<r;n++)t=i[n],this.addEventHandler(t.e,t.h)};this.getHiddenName=function(n){var t="",i=this.ControlName.toUpperCase();return""!=this.GridRow&&(t="_"+this.GridRow,this.ownerGrid&&(i=this.ownerGrid.realGridName.toUpperCase())),this.ParentObject.CmpContext+i+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+n+t};this.saveProperties=function(){var t,n;for(t in this.Properties)this.hasOwnProperty(t)&&(n=this[t],"function"!=typeof this.Properties[t]&&("undefined"!=typeof n&&"undefined"!=typeof n.R&&"undefined"!=typeof n.G&&"undefined"!=typeof n.B&&(n=gx.color.rgb(n.R,n.G,n.B)),gx.lang.isBooleanType(this.PropTypes[t])&&(n=n?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[t]),n)))}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));!window.$.fn||!window.$.fn.jquery?gx.dbg.write("Warning: $ is not a jQuery object instance"):gx.dbg.write("global $ is jquery"+window.$.fn.jquery);window.Modernizr=function(n,t,i){function c(n,t){var u,r;for(u in n)if(r=n[u],!~(""+r).indexOf("-")&&a[r]!==i)return t=="pfx"?r:!0;return!1}function e(n,t,r){var u=n.charAt(0).toUpperCase()+n.slice(1),f=(n+" "+v.join(u+" ")+u).split(" "),n,e;if(typeof t=="string"||typeof t=="undefined")return c(f,t);f=(n+" "+y.join(u+" ")+u).split(" ");n:{n=f;for(e in n)if(u=t[n[e]],u!==i){if(r===!1){t=n[e];break n}if(typeof u=="function"){t=u.bind(r||t);break n}t=u;break n}t=!1}return t}var r={},l=t.documentElement,t=t.createElement("modernizr"),a=t.style,v=["Webkit","Moz","O","ms"],y=["webkit","moz","o","ms"],t={},p=[],o=p.slice,u,s={}.hasOwnProperty,h,f;h=typeof s!="undefined"&&typeof s.call!="undefined"?function(n,t){return s.call(n,t)}:function(n,t){return t in n&&typeof n.constructor.prototype[t]=="undefined"};Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError;return i=o.call(arguments,1),r=function(){var u,f;return this instanceof r?(u=function(){},u.prototype=t.prototype,u=new u,f=t.apply(u,i.concat(o.call(arguments))),Object(f)===f?f:u):t.apply(n,i.concat(o.call(arguments)))},r});t.flexbox=function(){return e("flexWrap")};t.history=function(){return!(!n.history||!history.pushState)};t.csstransitions=function(){return e("transition")};for(f in t)h(t,f)&&(u=f.toLowerCase(),r[u]=t[f](),p.push((r[u]?"":"no-")+u));return r.addTest=function(n,t){if(typeof n=="object")for(var u in n)h(n,u)&&r.addTest(u,n[u]);else{if(n=n.toLowerCase(),r[n]!==i)return r;t=typeof t=="function"?t():t;typeof enableClasses!="undefined"&&enableClasses&&(l.className=l.className+(" "+(t?"":"no-")+n));r[n]=t}return r},a.cssText="",t=null,r._version="2.8.3",r._domPrefixes=y,r._cssomPrefixes=v,r.testProp=function(n){return c([n])},r.testAllProps=e,r}(this,this.document);gx.spa=function(n){var h=/<head[^>]*>([\s\S]*?)<\/head>/i,c=/(<body[^>]*>[\s\S]*?<\/body>)/i,l=/<title[^>]*>([\s\S]*?)<\/title>/i,o=/#.*/,a=/#/,t=!1,i=!1,v=window.location.href,s=!0,r={},u,f,e;return"state"in window.history&&(s=!1),gx.wpo(function(){gx.pO.fullAjax&&(gx.cache.exceptionsRegEx=/messages\..+\.js/)},this),e=function(){t||i||this.notify("onnavigatecomplete")},{timeout:-1,setTimeout:function(n){this.timeout=n},isSameApp:function(n,t){var i=n.port===t.port,i=(i=i||n.port===""&&n.protocol==="http:"&&t.port==="80")||n.port===""&&n.protocol==="https:"&&t.port==="443";return n.protocol===t.protocol&&n.hostname===t.hostname&&i},handleClick:function(t){var i=this.getTarget(t),f,u,e;if(i&&i.tagName.toUpperCase()==="A"&&!(i.getAttribute("href")===null||i.getAttribute("href")===void 0)&&(!i.target||!(i.target=="_blank"||i.target=="_parent"&&window.parent!=window||i.target=="_top"&&window.top!=window||i.target.substr(0,1)!="_"&&window.name!=i.target))&&!(t.which>1||t.metaKey||t.ctrlKey)&&(u=this.parseUrl(i.href),this.isSameApp(location,u)&&(e=u.pathname.charAt(0)=="/"?u.pathname:"/"+u.pathname,location.pathname.substring(0,location.pathname.lastIndexOf("/"))===e.substring(0,e.lastIndexOf("/"))&&!(u.href.search(a)>=0&&u.href.replace(o,"")===location.href.replace(o,""))&&i.getAttribute("href")!==""&&i.href.indexOf("javascript:")!==0)))if(this.ignoreClick)this.ignoreClick=!1;else{u=n(i);for(f in r)if(r.hasOwnProperty(f)&&u.is(f))return;this.navigate({url:i.href,push:!0,scrollTo:!0,direction:"forward"});t.preventDefault()}},redirect:function(n,t){delete gx.referrer;var t=t===void 0||t,i=this.parseUrl(n),r=i.pathname.charAt(0)=="/"?i.pathname:"/"+i.pathname;this.isSameApp(location,i)?location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==r.substring(0,r.lastIndexOf("/"))?window.location=n:(gx.referrer=location.href,this.navigate({url:n,push:t,scrollTo:!0,direction:"forward"})):window.location=n},setLocation:function(n){gx.util.browser.isFirefox()?gx.lang.doCallTimeout(function(){this.setStopNavigating(n);window.location.href=n},this,[n],100):(this.setStopNavigating(n),window.location=n)},canNavigate:function(){return!t&&!i},isNavigating:function(){return!this.canNavigate()},isNavigatingRaw:function(){return t},setStopNavigating:function(n){t=!1;this.notify("onnavigate",[n])},navigate:function(n){var u,r,i=n.url,f=!1;this.canNavigate()?(t=!0,this.notify("onbeforenavigate",[i]),(r=this.request)&&r.readyState<4&&(r.onreadystatechange=gx.emptyFn,gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+r.readyState),r.abort()),this.request=r=gx.http.doCall({method:"GET",url:i,handler:function(t,e,o){var t=o.getResponseHeader("X-SPA-REDIRECT-URL"),s=o.getResponseHeader("X-GXOBJECT");f||(u&&clearTimeout(u),o.status==530?this.setLocation(i):t?(this.setStopNavigating(t),setTimeout(gx.spa.redirect.closure(gx.spa,[t]),100)):(n.push&&r.readyState>0&&s&&(this.updateState(),this.state=this.createState(n),window.history.pushState(null,"",r.responseURL||i)),this.processResponse.call(this,e,o,n)))},beforeSend:function(n){this.notify("onbeforesend",[this.createEvent(n,i),"X-SPA-REQUEST","X-SPA-MP"]);this.timeout>0&&(u=setTimeout(this.timeoutHandler.closure(this,[n,i]),this.timeout));n.setRequestHeader("X-SPA-REQUEST","1")},offline:function(){u&&clearTimeout(u);f=!0;t=!1},error:function(n){n=this.createEvent(n,i);n.cancel=!0;this.notify("onerror",[n]);n.cancel&&this.setLocation(i)},ajaxHeader:!1,avoidCache:!1,handleAllStatusCodes:!0,obj:this}),this.notify("onnavigatestart",[i])):this.setLocation(i)},processResponse:function(n,t,r){var u;try{u=r.url;var p=this.parseUrl(u).hash,l=r.direction,w=t.status,c=t.getResponseHeader("X-GXOBJECT"),b=t.getResponseHeader("X-SPA-RETURN"),d=t.getResponseHeader("X-SPA-RETURN-MD"),k=this.createEvent(t,u),a=gx.pO.MasterPage,o=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",s=t.getResponseHeader("X-SPA-MP")||"",f=!(o===""||o.toLowerCase()!=s.toLowerCase()),v=this.getContentPlaceholder();if(b!==null)gx.fn.closeWindowServerScript(b,d,!0);else if(w===500)window.history.pushState(null,"",u),gx.dom.writeError(t.responseText,gx.getMessage("GXM_runtimeappsrv"),w);else if(c){this.notify("onbeforeprocessresponse",[k,n,c,o,s,f]);var e=this.extractContents(t,!f),y=f?v.firstChild:document.body,h=e.body;e.body?(this.state=this.createState(r),r.push&&window.history.replaceState(this.state,"",t.responseURL||u),e.title&&(document.title=e.title),this.notify("onbeforecontentreplace",[t,u,e]),gx.cache.removeRemoteFile(gx.getThemeElement().href),gx.dom.replaceWithFx(y,h,{domRemove:!1,domAdd:f,enteringClass:l=="forward"?"entering":"leaving",leavingClass:l=="forward"?"leaving":"entering",enterDurationClass:l=="forward"?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:l=="forward"?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){return h=this.replaceContentCallback(t,u,p,n,v,e,y,h,r,c,a,o,s,f),f||gx.html.processCode(e.head.innerHTML+e.body.innerHTML,!1,this.processCodeCallback.closure(this,[t,u,p,n,v,e,y,h,r,c,a,o,s,f]),null,null,!1,!0),i=!1,this.notify("ontransitionend",[k,a,o,s,f]),this.recoverScrollPosition(r),h}.closure(this),beforeTransitionStart:function(l){return i=!0,f?(gx.html.processCode(n,!1,function(){l&&l();this.processCodeCallback(t,u,p,n,v,e,y,h,r,c,a,o,s,f)}.closure(this),null,null,!1),!0):void 0}.closure(this)})):this.setLocation(u)}else this.setLocation(u)}catch(g){gx.dbg.logEx(g,"gxspa.js","processResponse");this.setLocation(u)}},replaceContentCallback:function(t,i,r,u,f,e,o,s,h,c,l,a,v,y){if(y)o.parentNode&&(this.dettachContent(o),o.parentNode.removeChild(o));else{if(gx.util.browser.isWebkit()||gx.util.browser.isFirefox()){this.dettachContent(document.body);n(document.body).remove();var p=document.createElement("body"),t=n(s).prop("attributes");n.each(t,function(){n(p).attr(this.name,this.value)});document.documentElement.appendChild(p);p.innerHTML=s.innerHTML;s=p}else document.body=s,s=document.body;document.head=e.head}return s},processCodeCallback:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){n=this.createEvent(n,t);try{this.notify("oncontentreplace",[n,r,f,h,c,l,a,v])}catch(y){gx.dbg.logEx(y,"gxspa.js","processCodeCallback");this.setLocation(t)}r=!0;s.scrollTo&&(window.scrollTo(0,0),r=!1);s.push&&window._gaq&&_gaq.push(["_trackPageview"]);s.push&&window.ga&&window.ga("send","pageview",location.pathname);i!==""&&(f=this.parseUrl(t),f.hash=i,window.history.replaceState(this.state,"",f.href),(i=gx.dom.el(f.hash))&&(i.scrollIntoView(!0),r=!1));this.setStopNavigating(t);r&&this.recoverScrollPosition(s)},timeoutHandler:function(n,t){var i=this.createEvent(n,t);i.cancel=!0;this.notify("ontimeout",[i]);i.cancel&&(n.abort(),gx.dbg.logMsg("Request cancelled - timeout expired: "+n.readyState),this.setLocation(t))},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(t,i){var r=document.createElement("div"),e={},u,s,o,f;if(i)r=document.createElement("iframe"),r.src="about:blank",r.style.display="none",document.body.appendChild(r),f=t.responseText.match(h),f.length>1&&(u=f[1]),f=t.responseText.match(c),f.length>0&&(s=f[0]),f=t.responseText.match(l),f.length>1&&(e.title=f[1]),r.contentDocument&&r.contentDocument.body==null&&r.contentDocument.write("<body><\/body>"),r.contentDocument.body.outerHTML=s,o=r.contentDocument.head,o.innerHTML=u,n("head script").each(function(t,i){n(o).find("script").each(function(t,r){i.getAttribute("data-gx-external-script")===null?i.src==r.src&&o.removeChild(r):n(i).remove()})}),e.body=r.contentDocument.body,e.head=o;else{if(gx.html.setInnerHtml(r,t.responseText,!1,!1,!1),u=gx.dom.byClass("gx-content-placeholder","div",r),u.length===0)return e;e.body=u[0].firstChild;u=gx.dom.byTag("title",r);u.length>0&&(e.title=u[0].innerText||u[0].textContent)}return e},handlePopState:function(n){var n=n.state,t=this.getContentPlaceholder();if(n&&n.source=="gx-spa"){if(s&&v==n.url||this.state.url===n.url)return;this.navigate({id:n.id,url:n.url,push:!1,scrollPosition:n.scrollPosition,direction:this.state.id<n.id?"forward":"back"});t&&void 0}gx.popup.ispopup()&&gx.fn.cancelWindow()},parseUrl:function(n){var t=document.createElement("a");return t.href=n,t},createEvent:function(n,t){return{req:n,url:t,cancel:!1}},addIgnoredSelector:function(n){r[n]=!0},removeIgnoredSelector:function(n){delete r[n]},recoverScrollPosition:function(n){var t=n.scrollPosition;this.canNavigate()&&!n.scrollTo&&t&&window.scrollTo(t.x,t.y)},dettachContent:function(t){var i=gx.dom.getActiveElement();i&&n.contains(t,i)&&gx.dom.purgeElement(i)},updateState:function(){var n=this.state;n.url=location.href;n.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(n,"",n.url)},createState:function(n){return n=n||{},{id:n.id||(new Date).getTime(),source:"gx-spa",url:n.url}},getTarget:function(n){return n.target&&n.target.tagName=="A"?n.target:gx.dom.findParentByTagName(n.target,"A")},applyConfig:function(n){var t,i;if(n&&n.listeners)for(t in n.listeners)i=n.listeners[t],typeof i=="function"&&this.addObserver(t,n.listeners.scope||this,i)},setBodyClass:function(){var t="Form",n=document.body;n.className&&(t=n.className.split(" ")[0]);gx.dom.hasClass(n,t+"-fx")||gx.dom.addClass(n,t+"-fx")},isSupported:function(){return gx.util.browser.isIE()&&!gx.util.browser.isEdge()?!1:gx.pO&&gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(n){this.isSupported()&&!this.started&&(this.applyConfig(n),u=this.handleClick.closure(this),f=this.handlePopState.closure(this),document.addEventListener("click",u,!1),window.addEventListener("popstate",f,!1),this.state=this.createState({url:location.href}),window.history.replaceState(this.state,document.title),this.setBodyClass(),this.started=!0,this.addObserver("onnavigate",this,e),this.addObserver("ontransitionend",this,e))},stop:function(){this.started&&(document.removeEventListener("click",u,!1),window.removeEventListener("popstate",f,!1),this.started=!1)}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);gx.core={};gx.core.analytics=function(){return{supported:function(){return typeof ga=="undefined"?(console.log("Google Analytics - GA not enabled on this webpage"),!1):!0},trackView:function(n){this.supported()&&window.ga("send","pageview",n)},trackEvent:function(n,t,i,r){this.supported()&&window.ga("send",{hitType:"event",eventCategory:n,eventAction:t,eventLabel:i,eventValue:r})},trackPurchase:function(n){var i=function(n,t,i,r,u){return r&&gx.lang.emptyObject(i)&&u==null?(console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",t),!1):(gx.lang.emptyObject(i)&&r&&(i=u),!gx.lang.emptyObject(i))?(n[t]=i,!0):!1},u,t,r;if(this.supported()&&(window.ga("require","ecommerce"),t={},u=0,i(t,"id",n.TransactionId,!0))){for(i(t,"affiliation",n.Affiliation),i(t,"revenue",n.Revenue),i(t,"shipping",n.Shipping),i(t,"tax",n.Tax),i(t,"currency",n.CurrencyCode),window.ga("ecommerce:addTransaction",t),u=0;u<n.Items.length;u++)t=n.Items[u],r={},i(r,"id",n.TransactionId,!0)&&i(r,"name",t.Name,!0)&&(i(r,"sku",t.Id),i(r,"category",t.Category),i(r,"price",t.Price),i(r,"quantity",t.Quantity),i(r,"currency",t.CurrencyCode),window.ga("ecommerce:addItem",r));window.ga("ecommerce:send")}},setUserId:function(n){this.supported()&&window.ga("set","userId",n)}}}(gx.$);gx.core.audio=function(n){var t,i=[],r=[];return{supported:function(){return!(gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8)},getSoundVar:function(n){return n==2?r:i[n]},playBackground:function(n){this.play(n,1)},play:function(n,i){t=!0;i!=2&&this.stop(i);i==3&&(this.stop(2),this.pauseSound(this.getSoundVar(1)));i==2&&this.stop(3);this.playSound(i,n).always(function(){i==3&&this.resumeSound(this.getSoundVar(1))}.closure(this,[]))},playSound:function(t,u){var e=n.Deferred(),f;return this.supported()?(f=new Howl({src:[u],html5:!0,onplay:function(){},onend:function(){e.resolve()},onstop:function(){e.resolve()},onpause:function(){e.resolve()}}),f.play()):(f=n("<bgsound/>").attr({id:"gxIE7AudioSound_"+t,loop:"0",src:u}),n("body").append(f)),i[t]=f,t==2&&r.push(f),e.promise()},stop:function(n){n?(this.stopSound(this.getSoundVar(n)),i[n]=null):(this.stopSound(this.getSoundVar(3)),this.stopSound(this.getSoundVar(2)),this.stopSound(this.getSoundVar(1)))},stopSound:function(t){var i=this.supported(),t=gx.lang.isArray(t)?t:[t];n.map(t,function(r,u){r=t[u];!i&&r&&(n(r).attr("src",""),n(r).remove(),r=void 0);r&&r.stop&&r.stop()})},pauseSound:function(n){this.supported()&&n&&n.pause&&n.pause()},resumeSound:function(n){this.supported()&&n&&n.play&&n.play()},isPlaying:function(n){if(this.supported())return n?this.isPlaying_impl(this.getSoundVar(n)):this.isPlaying_impl(this.getSoundVar(3))||this.isPlaying_impl(this.getSoundVar(2))||this.isPlaying_impl(this.getSoundVar(1))},isPlaying_impl:function(n){for(var i,r=!1,n=gx.lang.isArray(n)?n:[n],t=0;t<n.length;t++)(i=n[t])&&(r=r||i.playing())},_deinit:function(){t&&(this.stop(3),this.stop(2));t=!1}}}(gx.$);gx.core.pwa=function(){var n;return window.addEventListener("beforeinstallprompt",function(t){n=t;n.userChoice.then(function(t){gx.fx.obs.notify("gx.pwa.onpromptchoice",[t.outcome]);n=null});gx.fx.obs.notify("gx.pwa.onbeforeinstallprompt")}),{showPrompt:function(){n&&n.prompt()}}}(gx.$),function(n){var v=/(gx-form-item|col-(?:xs|sm|md|lg)-\d{1,2})/g,t=function(n){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(n))},h=function(t,i){var r=n(t).parent().find("span"),u;gx.lang.gxBoolean(i)?r.parent("p").hide():(r.removeClass("form-control"),u=r.parent("p"),u.length===0?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",r[0],!0):u.show())},i=function(t,i){var r=n(".gx-form-group[data-gx-for='"+gx.dom.id(t)+"']");r.length===0&&(r=n(t).parents("div.gx-attribute").first());gx.lang.gxBoolean(i)?r.show():r.hide()},c=function(n,t){var t=t.trim(),i=gx.html.getFieldLabel(n),r=t.split(" ").join("Label ")+(t?"Label":""),u;i&&(u=(u=i.className.match(v))?u.join(" ")||"":"",r=["gx-label",u,r,"control-label"].join(" "),i.className!==r&&(i.className=r))},u,e,o,r,s;t({name:"labels",selector:"div.gx-form-group:has(label.gx-label:not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(t,i){var r=n(i).find("label.gx-label").addClass("control-label");return t.labelEl=r[0],t},listeners:{control:function(t){return n(t.labelEl).attr("for")},after:{Class:c}}});t({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",initialize:function(t){(t=n("#"+t.id)[0])&&c(t,t.className.replace("form-control",""))},listeners:{control:function(n){return n.id},after:{Enabled:h,Visible:i}}});t({name:"readonly-atts-vars",selector:'.gx-attribute span[class^="Readonly"]:not(:has(input[type="checkbox"]))',template:'<p class="form-control-static">{{{outerHTML}}}<\/p>',outerHTML:!0,listeners:{control:function(n){return n.id},after:{Visible:function(t,r){var u=n(t).parent("p");gx.lang.gxBoolean(r)?u.show():u.hide();i(t,r)}}}});t({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+gx.getMessage("GXM_revealpassword")+'"><span class="glyphicon glyphicon-eye-open"><\/span><\/button><\/span><\/div>',setContext:function(n,t){return n.inputEl=t,n},initialize:function(t){var r=n("#"+t.id),i=n("#"+t.id)[0];r.next().on("click",function(){gx.fn.setCtrlProperty(i.id,"Ispassword",i.type!="password")})},listeners:{control:function(n){return n.id},after:{Visible:function(t,r){gx.lang.gxBoolean(r)&&gx.fn.isVisible(t,0)?n(t).next().show():n(t).next().hide();i(t,r)},Enabled:function(t,i){gx.lang.gxBoolean(i)?n(t).next().children().first().prop("disabled",!1):n(t).next().children().first().prop("disabled",!0)},Ispassword:function(t,i){n("button",n(t).next()).attr("title",gx.getMessage(gx.lang.gxBoolean(i)?"GXM_revealpassword":"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")}}}});t({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute span > input[type="checkbox"]',setContext:function(t,i){return t.id=n(i)[0].id,t},initialize:function(t){t=n("#"+t.id).get(0);n(t).closest("span").addClass("gx-checkbox-wrapper")},listeners:{control:function(n){return n.id},after:{Visible:function(t,r){var u=n(t).parent().closest(".gx-checkbox-wrapper");gx.lang.gxBoolean(r)?(u.show(),u.children().show()):u.hide();i(t,r)}}}});t({name:"usercontrol",onDemandInvoke:!0,selector:".gx_usercontrol",setContext:function(t,i){return t.id=n(i)[0].id,t},listeners:{control:function(n){return n.id},after:{Visible:i}}});u=function(t,r,u){this.visible=r;var f=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(r)&&gx.fn.isVisible(t,0)?(this.enabled||this.enabled===void 0)&&f.show():f.hide();u||i(t,r)};t({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}<\/a><\/span><\/div><\/div>',outerHTML:!0,setContext:function(t,i){var r=n(i),u=r.attr("data-align");return t.datePickerCt=i,t.inputEl=r.find("input")[0],t.imgEl=r.find("img")[0],t.inputElId=t.inputEl.id,t.alignClass=u?"pull-"+u:"",t.nativeEl=r.find("#"+t.inputEl.id+"-picker")[0],r=n("#span_"+t.inputEl.id),r.length>0&&(u=r.parent("p")[0],t.spaneEl=u?u:r,u&&n(u).remove()),t},initialize:function(t){var r=n("#"+t.inputElId),f=r.parent().closest(".dp_container"),i,t;t.nativeEl&&f.append(t.nativeEl);f.find("a").on("click",function(n){try{if(n.target.nodeName!="IMG")return f.find("img")[0].click(),!1}catch(t){return!1}});i=gx.fn.isVisible(r[0],0);t=n("#span_"+t.inputEl.id);t.length>0&&(i=i||gx.fn.isVisible(t[0],0));u.call(this,r[0],i,!0)},listeners:{control:function(n){return n.inputEl.id},after:{Enabled:function(t,i){var r,u;this.enabled=gx.lang.gxBoolean(i);r=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(i)?(u=this.visible||gx.fn.isVisible(t),(u||u===void 0)&&r.show()):r.hide();h(t,i)},Visible:u}}});var f=function(t){return n(t).parent().closest("span")},l=function(n){n.find(":checked").parent("label").button("toggle")},a=function(n,t){var i=n.find("label");t?(i.prop("disabled",!1),i.removeClass("disabled"),n.find("input, label").css("pointer-events","")):(i.prop("disabled",!0),n.find("input, label").css("pointer-events","none"),i.addClass("disabled"))};t({name:"radio-button",selector:".gx-radio-button:not(.gx-tpl-ignore) label",setContext:function(t,i){var r=f(i),u;return t.name=n(i).children("input").attr("name"),t.spanEl=r,n(r).prop("initialized")||(r.children("label").addClass("gx-radio-label btn btn-default"),u=n(i).children().prop("disabled"),l(r),a(r,!(u===!0||u==="disabled")),r.find("script").remove(),r.attr("data-toggle","buttons"),u=r.hasClass("gx-radio-button-vertical")?"-vertical":"",r.addClass("btn-group"+u).removeClass("gx-radio-button-vertical").css("vertical-align","baseline")),t},initialize:function(t){if(!n(t.spanEl).prop("initialized")){t.spanEl.prop("initialized",!0);t.spanEl.children("label").on("click",function(){var t=n(this).children("input");t.trigger("focus");t.attr("checked","");t.prop("checked",!0);gx.evt.onchange(t.get(0))})}},listeners:{control:function(n){return n.name},after:{Visible:i,Enabled:function(n,t){a(f(n),t)},Value:function(n){l(f(n))}}}});t({name:"prompt",selector:function(t){return n('a:has(img[id*="PROMPT"])',t).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}<\/span><\/div>',setContext:function(t,i){return t.inputEl=i,t.promptEl=n(i).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default"),t},listeners:{control:function(n){return n.inputEl.id},before:{Visible:function(t,i){var r=n(t).parent();gx.lang.gxBoolean(i)?r.show():r.hide()},Enabled:function(t,i){var r=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(i)?r.show():r.hide()}}}});t({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(n,t){return n.imgEl=t,n},listeners:{control:function(n){return n.imgEl.id},before:{Enabled:function(t,i){var r=n(t).closest(".input-group-btn");gx.lang.gxBoolean(i)?r.show():r.hide()}}}});e=function(t,i){var r=n(t).parent(),r=r.add(r.find("img"));gx.lang.gxBoolean(i)?r.show():r.hide()};t({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"><\/div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"><\/div><\/a><\/span><\/div>',setContext:function(t,i){return t.inputEl=n(i).prev()[0],t.triggerEl=n(i)[0],t},initialize:function(t){gx.evt.attach(t.el,"click",function(){gx.geolocation.getMyPosition(this)});n("#"+t.inputEl.id+"_hook").replaceWith(t.inputEl);n("#"+t.inputEl.id+"_trigger_hook").replaceWith(t.triggerEl);e.call(this,t.inputEl,gx.fn.isVisible(t.inputEl,0))},listeners:{control:function(n){return n.inputEl.id},before:{Visible:e,Enabled:function(t,i){var r=n(t).parent().find(".input-group-btn");gx.lang.gxBoolean(i)?r.show():r.hide()}}}});t({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}<\/div><div class="col-sm-12">{{$uriOptionLbl$}}<\/div><\/div><\/div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}<\/div><\/div><div class="row"><div class="col-sm-12">{{$button$}}<\/div><\/div>',applyTo:"inner",setContext:function(t,i){var u=n(i).parent().closest(".gx-multimedia-upload")[0],r=gx.html.multimediaUpload.getElements(u);return r.fileOptionLbl=r.fileOption.parentNode,r.uriOptionLbl=r.uriOption.parentNode,gx.lang.apply(t,r),t.container=u,t},initialize:function(t){n(t.button).addClass("btn btn-default Button");n(t.uriField).addClass("form-control")},listeners:{control:function(n){return gx.html.multimediaUpload.CtrlId(n.container.id)},after:{Visible:function(n,t){i(n,t,7)}}}});t({name:"navbar",selector:".gx-navbar",setContext:function(t,i){return t.toggleBtn=n(i).find(".gx-navbar-toggle"),t.navBarInner=n(i).find(".gx-navbar-inner"),t},initialize:function(n){n.toggleBtn.attr("data-target","#"+n.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var t=n(".navbar-collapse");t.collapse&&t.collapse("hide")});o=function(n){n.anchor.get(0).href==location.href?n.anchor.parent().addClass("active"):n.anchor.parent().removeClass("active")};t({name:"navbar-textblock-link",selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(t,i){var f=["id","class","style",gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,"title"],u=n(i),r;for(t.anchor=u.children("a"),t.anchor.length===0&&u.is("a")&&(t.anchor=u),r=0;r<f.length;r++)t.anchor.attr(f[r],u.attr(f[r]));return t},reDraw:o,initialize:o,listeners:{control:function(n){return n.id},before:{Caption:function(t,i){return n(t).text(i),!0},Link:function(t,i){return n(t).attr("href",i),!0}}}});t({name:"navbar-textblock-text",selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(t){n(t.el).addClass("navbar-text")},listeners:{control:function(n){return n.id},after:{Link:function(t,i){var r=n(t);i&&r.hasClass("navbar-text")&&(r.removeClass("navbar-text"),gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",t))}}}});t({name:"errorviewer",selector:".gx_ev div",initialize:function(t){var t=n(t.el),i=t.parent(".gx_ev"),r=i.css("position");(r==="fixed"||r==="absolute")&&(i[0].effect&&i[0].effect.end(),t.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(n('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button>')))}});t({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(t,i){return t.el=n(i),t},initialize:function(t){var i=t.el,t=i[0],u=n(window),f=parseInt(i.attr("rows"),10),e=parseInt(i.attr("data-gx-text-maxlines"),10),r;i.css("overflow-x","hidden");r=function(n,t,i){return t=t+i,n.attr("rows",t),t};i=function(){for(var o=u.scrollTop(),t=parseInt(n(this).attr("rows"),10),i=n(this);t>f&&this.scrollHeight>=this.clientHeight;)t=r(i,t,-1);for(;n(this).val()!==""&&t<e&&this.scrollHeight>this.clientHeight;)t=r(i,t,1);u.scrollTop(o)};gx.evt.attach(t,["input","keyup"],i.closure(t,[]));gx.evt.on_ready(t,i.closure(t,[]))}});r=function(n){return n=n.get(0),gx.dom.getComputedStyle(n).getPropertyValue("--gx-image-scaling").trim()==="on"};s=function(n){var t=n;r(n)&&(n.parent("a").length>0&&(t=n.parent("a")),t.parent("div[data-align-inner]").parent().parent().attr("data-align-image",""))};t({name:"image",selector:"img[data-gx-image]",setContext:function(t,i){return t.el=n(i),t},initialize:function(n){var n=n.el,t=n.get(0).currentSrc||n.attr("src");t&&r(n)&&n.css("background-image","url("+t+")");s(n)},listeners:{control:function(n){return n.id},after:{Bitmap:function(t,i){var u=n(t);i&&r(u)?u.css("background-image","url("+i+")"):u.css("background-image","none")},Class:function(t){var i=n(t);t.src&&r(i)?i.css("background-image","url("+t.src+")"):i.css("background-image","none");s(i)}}}})}(gx.$);gx.ui=function(n){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(n){this.gridContainer=n;this.DesignContainerName=this.ContainerName=gx.dom.id(n);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(n,t,i,r){var f,o,e;for(this.clearFunctions(),this.refreshDynProperties(),this.properties=[],f=0;f<this.rows.length;f++)for(this.properties[f]=[],o=this.rows[f],e=0;e<this.columns.length;e++){var s=this.columns[e],h=o.gxProps[s.index],u=s.gxControl;u.grid=this.ownerGrid;u.row=o;u.gridId=this.gxId;u.gridRow=o.gxId;i?u.value=h[0]:u.setProperties.apply(u,h);this.setRenderProperties(o.gxRenderProps[e],u);!u.enabled&&u.type<=gx.html.controls.types.checkBox&&u.cssClass!==""&&u.cssClass.indexOf("Readonly")!==0&&(u.cssClass="Readonly"+u.cssClass);this.properties[f][e]=gx.lang.clone(u);this.addC2V(s,this.properties[f][e])}this.firstTime=n;this.autoRefreshing=t?!0:!1;this.loadingCollection=i?!0:!1;this.show&&(this.setC2ShowFunction(function(n){n.show();r()}),this.autoRefreshing&&(this.show(),r()));this.autoRefreshing=!1};this.addC2V=function(n,t){this.addC2VFunction(function(i){if(n.gxAttName!==""){var r=i.ParentObject.getValidStruct(n.gxId);r&&(i.ParentObject[r.gxvar]=t.value);gx.fn.setHidden(t.id,t.value)}})};this.setRenderProperties=function(n,t){if(n)for(var i in n)t[i]=n[i]};this.selectRow=function(n){(n=this.rows[n])&&(this.instanciateSelectionVars(n.gxId),this.instanciateSelectedRow(n))};this.getEventRow=function(){return gx.lang.emptyObject(this.GridRow)?"0001":this.GridRow};this.executeEvent=function(n,t){var i,r,u;n<this.columns.length&&t<this.rows.length&&(i=this.properties[t][n],r=gx.html.controls.eventJSCode(i.jsScrCode,i.eventName,i.jsDynCode,i.grid,i.row),r!==""?(gx.lang.emptyObject(i.usrOnclick)||(r="if("+i.usrOnclick+") { "+r+" }"),i=new Function(r),typeof i=="function"&&i()):i.clickEvent&&(r=this.parentGxObject,u=i.row.gxId,this.ownerGrid.instanciateRow(u),r[i.clickEvent].call(r,u)))};this.executeIsValid=function(n,t){if(n<this.columns.length&&t<this.rows.length){var r=this.parentGxObject,i=this.properties[t][n],u=i.vStruct||r.GXValidFnc[i.column.gxId],i=i.row.gxId;u&&u.isvalid&&(this.ownerGrid.instanciateRow(i),r[u.isvalid].call(r))}};this.addEventHandler=function(n,t){this[n]=function(i){var r=this.isServerEvent(n);r&&i&&gx.fx.obs.addObserver("gx.onafterevent",this,i,{single:!0});this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),t);!r&&i&&i.call(this)}.closure(this)};var t={};this.requestSuggest=function(i,r,u){var e=n.Deferred();if(i<this.columns.length&&r<this.rows.length){var o=this.parentGxObject,r=this.properties[r][i],i=r.vStruct||o.GXValidFnc[r.column.gxId],r=r.row.gxId,f=t[r+"_"+i.id];!f&&i&&i.gxsgprm&&(this.ownerGrid.instanciateRow(r),f=new gx.fx.suggestProvider(o,i.gxsgprm[1],null,i.gxsgprm[0]),t[r+"_"+i.id]=f);f?(gx.fx.updateSuggestParms(i.gxsgprm[2]),f.requestSuggestions([],function(){e.resolve(f.values)},function(){e.reject()},u)):e.reject()}else e.reject();return e.promise()};this.executeValidate=function(n,t){if(n<this.columns.length&&t<this.rows.length){var u=this.parentGxObject,i=this.properties[t][n],r=i.vStruct||u.GXValidFnc[i.column.gxId],i=i.row.gxId;r&&r.fnc&&(this.ownerGrid.instanciateRow(i),r.fnc.call(u))}}}}}(gx.$);gx.ui.controls=function(n){var t=function(){var n=["render","selectTabPageByIndex","hideTabPageByIndex","showTabPageByIndex","getTabPageIndexByControlName","getTabPageControlNameByIndex"];return{show:function(){for(var t=this.ActivePage,i=0;i<n.length;i++)this[n[i]]||console.error("Missing required method",n[i],this);this.IsPostBack?this.update&&this.update():(this.HistoryManagement&&HistoryManager.Initialize(this),this.beforeRender&&this.beforeRender(),this.render(),this.ActivePageControlName&&(t=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),10)),t||(t=1),this.selectTabPageByIndex(t),this.tabPageSelected(t,!0,!1),this.afterRender&&this.afterRender());this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(n,t,i){this.ActivePage!==n&&(this.ActivePage=n||1,this.ActivePageControlName=this.getTabPageControlNameByIndex(n)||"",this.HistoryManagement&&i!==!1&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,!0,null,!1),!t&&this.TabChanged&&this.TabChanged())},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){var n;gx.grid.drawAtServer||(n=(n=document.location.hash.length>0?document.location.hash.substr(1):"")?this.getTabPageIndexByControlName(n):1,this.selectTabPageByIndex(n),this.tabPageSelected(n,!1,!1))},SelectTab:function(n){this.selectTabPageByIndex(n);this.tabPageSelected(n,!1,void 0)},HideTab:function(n){this.hideTabPageByIndex(n)},ShowTab:function(n){this.showTabPageByIndex(n)}}}();return{datePicker:function(t){this.$input=n("#"+t.inputId);this.$trigger=n("#"+t.triggerId);this.showInLine=t.inline;this.inputType=t.inputType;this.format=t.format;this.datePartLength=t.datePartLength;this.timePartLength=t.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=t.afterChange;this.opts=t;this.getInputType=function(){return this.timePartLength>0&&this.datePartLength===0?"time":this.datePartLength>0&&this.timePartLength===0?"date":"datetime-local"};this.getTimeStep=function(){return this.timePartLength>6?1:60};this.resolveValue=function(n,t){var i,r;return gx.date.isNullDate(t)&&n!=="time"&&(t=new Date),n=="date"?(t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),i=t.toISOString().slice(0,10)):(t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),i=0,r=19,n=="time"&&(i=11,r=this.getTimeStep()==60?16:19),i=new gx.date.gxdate(t).Value.toISOString().slice(i,r)),i};this.render=function(){var i,f;if(this.nativeSupport){var r=this.$input,u=this.getInputType(),t=n("<input>");t.attr("type",u);(u==="time"||u==="datetime-local")&&t.attr("step",this.getTimeStep());t.css("position","absolute");t.css("top","0");t.css("left","0");t.css("opacity","0");t.attr("id",r.attr("id")+"-picker");this.dtPicker=t;r.parent().append(t);t.bind("touchstart touchend mousedown mouseup",function(){return r.prop("disabled")!==!0});i=this;f=function(n){var n=n.val(),t=new gx.date.gxdate(n,"Y4MD"),n=n!==""?t.Value:gx.date.nullDate();i.afterChange&&i.afterChange(null,n,r[0],i.opts.vStruct,i.opts.gxO)};this.$trigger.on("click",function(){var n=gx.date.dateObject(r.val());gx.date.isNullDate(n)||(n=i.resolveValue(u,n),t.val(n),f(t));t.trigger("click").trigger("focus")});gx.evt.attach(t[0],"change",function(){var t=n(this);f(t)})}else gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts.inputId,this.opts.inline,this.opts.inputType!=="date",this.opts.weeksNumbers,this.opts.mondayFirst,this.opts.format])};this.installCalendar=function(t,i,r,u,f,e){var s=gx.dom.byId(t),o=n(s);(gx.lang.emptyObject(s)||s.nodeName!="SELECT")&&(i===0?(i=t+"_dp_trigger",((s=gx.dom.byId(i))&&o.css("display")!=="none"&&o.css("visibility")!=="hidden"&&o.css("display")==="none"||o.css("visibility")==="hidden"||!s)&&(i=t),o=o.parent().closest(".dp_container")[0],Calendar.setup({inputField:t,parentNode:o,showsTime:r,weekNumbers:u,mondayFirst:f,ifFormat:e,button:i,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,displayRight:!1})):(gx.lang.emptyObject(s)||o.css("display","none"),Calendar.setup({inputField:t,showsTime:r,weekNumbers:u,mondayFirst:f,ifFormat:e,flat:t+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0})))}},actionGroup:function(){return{init:function(){n("[data-gx-base-lib='none']").length>0&&gx.fx.obs.addObserver("gx.onclick",this,function(t){var t=t.event,i=t.target,r;n(i).is(".gx-navbar .dropdown>a")&&(t.preventDefault(),t=i.getAttribute("aria-expanded"),r=function(t){var u=n(i).next(".gx-dropdown-menu"),t=t.event.target;n(t).closest(u).length||t==i||i.getAttribute("aria-expanded")!=="true"||(i.setAttribute("aria-expanded","false"),gx.fx.obs.deleteObserver("gx.onclick",this,r))},t==="false"?(gx.fx.obs.addObserver("gx.onclick",this,r),i.setAttribute("aria-expanded","true")):(gx.fx.obs.deleteObserver("gx.onclick",this,r),i.setAttribute("aria-expanded","false")))})},dynamicItems:function(){return function(n){this.preProcessItems=function(n){for(var t=0,i=n.length;t<i;t++)n[t].Children?this.preProcessItems(n[t].Children):n[t].Children=[]};this.getItems=function(){return this.items};this.setItems=function(n){this.preProcessItems(n);this.items=n||[]};this.getType=function(t){var i;return function(){return i||(i=n(t.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type")),i}}(this);this.renderMenu=function(t){var i="";this.IsPostBack?n('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():n(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"><\/li>').css("display","none").appendTo(gx.dom.form());t.length&&(i=Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",{containerName:this.ContainerName,Children:t},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}<\/a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}<\/a>{{/Children.length}}{{/Link}}<\/li>',navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"><\/span><\/a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}<\/ul><\/li>'}),n('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(i))};this.renderToolbar=function(t){var i="";t.length&&(i=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}<\/a><\/span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}<\/div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}<\/span>{{/Children.length}}{{/Link}}{{/Children}}',{containerName:this.ContainerName,Children:t},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}<\/a><\/span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}<\/div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}<\/span>{{/Children.length}}{{/Link}}{{/Children}}'}));n(this.getContainerControl()).attr("data-gx-dynitem-container","").html(i)};this.show=function(){var n=this.getType(),t=gx.lang.isArray(this.items)?this.items:[this.items];n=="menu"?this.renderMenu(t):n=="toolbar"&&this.renderToolbar(t)};this.destroy=function(){var t=this.getType();t=="menu"?(n('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove(),n('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()):t=="toolbar"&&n(this.getContainerControl()).html("")}}}()}}(),defineTabControl:function(n){return gx.lang.apply(n.prototype,t),n}}}(gx.$)