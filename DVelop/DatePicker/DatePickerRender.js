function WWP_DatePicker_UC(){this.show=function(){defaultWWPDateRangeSettings.minYear=this.MinYear;defaultWWPDateRangeSettings.maxYear=this.MaxYear;defaultWWPDateRangeSettings.style=this.Style;defaultWWPDateRangeSettings.optsLoaded=!0}}function WWPDateTimePicker_updateOption(n,t,i,r){i!=null&&(n[t]=r?moment(i):i,n.settingsBeforeMerge!=null&&(n.settingsBeforeMerge[t]=n[t]),n.flatDisplay&&((n.minDate&&n.startDate.isBefore(n.minDate)||n.maxDate&&n.endDate.isAfter(n.maxDate))&&n.clickCancel(),n.updateView()))}window.Calendar||(Calendar={});Calendar.setup=function(n){var t="#"+n.inputField,e=n.showsTime,l=n.weekNumbers,k=n.mondayFirst,r=n.ifFormat,i=n.button,u=i==null?n.flat:null,a=i!=null||n.onSelect!=null?n.onSelect:n.flatCallback,d=n.align,v=n.singleClick,y=n.displayRight,o=mapGXDateFormatToDatePickerFormat(r,e),b,f,c;defaultWWPDateRangeSettings.dateFormat||n.inputField!="vPICKERDUMMYVARIABLE_MPAGE"||(defaultWWPDateRangeSettings.dateFormat=o);var p={DatePicker:{ShowDropdowns:!0,ShowWeekNumbers:l,SingleDatePicker:!0},TimePicker:{Show:e,Hour24:r.indexOf("%p")<0,ShowSeconds:r.indexOf("%S")>0,Increment:1},Locale:{Format:o},Advanced:{AutoApply:v,OpenLocation:y?"right":null},parentEl:u!=null?$(t).parent():null,flatDisplay:u!=null},s=$(t).val(),w=new gx.date.gxdate(s),h=gx.date.isNullDate(w);if(h&&$(t).val(""),b=new WWP_DateRangePicker(t,p,WWP_DatePicker_UC_on_Changed.closure({field:$(t),vStruct:gx.O.getValidStructFld(n.inputField),onSelect:a})),h&&$(t).val(s),f=function(n){var u=$(t).val(),r=new gx.date.gxdate(u),i=$(t).data("daterangepicker");!r||gx.date.isNullDate(r)?($(n.attachedCtrl).val(""),i.setStartDate(new Date),i.setEndDate(new Date),i.isNullVal=!0):(i.isNullVal=!1,i.setStartDate(r.Value),i.setEndDate(r.Value))},i!=null)$("#"+i).on("click",function(){f(this);$(t).trigger("click")});else u!=null&&(c=$(t).data("daterangepicker"),c.flatDisplay=!0,$(t).trigger("click"));$(t).on("focusin",function(){f(this)})};var WWP_DatePicker_UC_on_Changed=function(n){var u,f;this.startDate=n;var t=$(this.field),i=this.vStruct,e=t[0],r=this.onSelect;r&&r(null,n||gx.date.nullDate(),e,i,gx.O);u=t.data("daterangepicker");this.startDate?u.updateElement(!0):i?(f=gx.date.nulldate_toc(i.len,i.dec),t.val(f)):(t.val(""),console.log("WWP_DatePicker_UC: Ctrl on screen not found:"+this.field))};$(window).one('load',function(){WWP_VV([['WWP.DatePicker','14.1000']]);});